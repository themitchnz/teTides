window.SAPO="undefined"==typeof SAPO?{}:window.SAPO,SAPO.namespace=function(ns){if(!ns||!ns.length)return null;for(var levels=ns.split("."),nsobj=SAPO,i="SAPO"===levels[0]?1:0;levels.length>i;++i)nsobj[levels[i]]=nsobj[levels[i]]||{},nsobj=nsobj[levels[i]];return nsobj},SAPO.verify=function(ns,minVersion){if(ns){for(var levels=ns.split("."),nsobj=SAPO,k="SAPO"===levels[0]?1:0,m=levels.length;m>k;k++)if(nsobj=nsobj[levels[k]],!nsobj)throw Error("SAPO.verify: "+ns+" not found");if(minVersion){"function"==typeof nsobj&&(nsobj=nsobj.prototype);var lhs=(nsobj.version+"").match(/\d+/g)||[0],rhs=(minVersion+"").match(/\d+/g)||[0];for(k=0,m=Math.min(lhs.length,rhs.length);m>k;k++)if(lhs[k]<rhs[k])throw Error("SAPO.verify: "+ns+" has low version ("+nsobj.version+" < "+minVersion+")");if(lhs.length<rhs.length)throw Error("SAPO.verify: "+ns+" has low version ("+nsobj.version+" < "+minVersion+")")}}},SAPO.Class=function(name,baseClass,properties){var derivedFunction=function(){if(!this.__dont_init){if(this===window||!this)throw Error('Call "new '+name+'(...);"');if(derivedFunction["abstract"])throw Error("Abstract class: don't instantiate");if(baseClass){var abstractBackup=baseClass["abstract"];abstractBackup&&(baseClass["abstract"]=!1),baseClass.apply(this,arguments),abstractBackup&&(baseClass["abstract"]=abstractBackup)}properties&&"function"==typeof properties.init&&properties.init.apply(this,arguments)}};return derivedFunction.name=derivedFunction.displayName=name,derivedFunction["abstract"]=properties["abstract"],baseClass&&(baseClass.prototype.__dont_init=1,derivedFunction.prototype=new baseClass,delete baseClass.prototype.__dont_init),derivedFunction.prototype.toString=function(){return"[object "+name+"]"},properties&&SAPO.extendObj(derivedFunction.prototype,properties),derivedFunction},SAPO.safeCall=function(object,listener){function rethrow(exception){setTimeout(function(){throw exception.message&&(exception.message+="\n"+(exception.stacktrace||exception.stack||"")),exception},1)}if(null===object&&(object=window),"string"==typeof listener&&"function"==typeof object[listener])try{return object[listener].apply(object,[].slice.call(arguments,2))}catch(ex){rethrow(ex)}else if("function"==typeof listener)try{return listener.apply(object,[].slice.call(arguments,2))}catch(ex){rethrow(ex)}else if("function"==typeof object)try{return object.apply(window,[].slice.call(arguments,1))}catch(ex){rethrow(ex)}},window.s$=function(element){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;length>i;i++)elements.push(s$(arguments[i]));return elements}return"string"==typeof element&&(element=document.getElementById(element)),element},Function.prototype.bindObj=function(){if(2>arguments.length&&void 0===arguments[0])return this;for(var __method=this,args=[],i=0,total=arguments.length;total>i;i++)args.push(arguments[i]);var object=args.shift(),fn=function(){return __method.apply(object,args.concat(function(tmpArgs){for(var args2=[],j=0,total=tmpArgs.length;total>j;j++)args2.push(tmpArgs[j]);return args2}(arguments)))};return fn.toString=function(){return __method+""},fn.name=fn.displayName=__method.name,fn},Function.prototype.bindObjEvent=function(){for(var __method=this,args=[],i=0;arguments.length>i;i++)args.push(arguments[i]);var object=args.shift();return function(event){return __method.apply(object,[event||window.event].concat(args))}},Object.extend=function(destination,source){for(var property in source)destination[property]=source[property];return destination},SAPO.extendObj=function(destination,source){if(source)for(var property in source)source.hasOwnProperty(property)&&(destination[property]=source[property]);return destination},SAPO.Browser===void 0&&(SAPO.Browser={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var myWidth=0,myHeight=0;"number"==typeof window.innerWidth?(myWidth=window.innerWidth,myHeight=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(myWidth=document.documentElement.clientWidth,myHeight=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(myWidth=document.body.clientWidth,myHeight=document.body.clientHeight),this.windowWidth=myWidth,this.windowHeight=myHeight},setReferrer:function(){this.referrer=void 0!==document.referrer?document.referrer.length>0?window.escape(document.referrer):!1:!1},detectBrowser:function(){var sAgent=navigator.userAgent;if(this.userAgent=sAgent,sAgent=sAgent.toLowerCase(),RegExp("applewebkit/").test(sAgent))RegExp("chrome/").test(sAgent)?(this.CHROME=!0,this.model="chrome",this.version=sAgent.replace(RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=sAgent.replace(RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(RegExp("opera").test(sAgent))this.OPERA=!0,this.model="opera",this.version=sAgent.replace(RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(RegExp("konqueror").test(sAgent))this.KONQUEROR=!0,this.model="konqueror",this.version=sAgent.replace(RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(RegExp("msie\\ ").test(sAgent))this.IE=!0,this.model="ie",this.version=sAgent.replace(RegExp("(.*)\\smsie\\s([^;]+);(.*)"),"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(RegExp("gecko").test(sAgent)){this.GECKO=!0;var re=RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(re.test(sAgent))this.model=sAgent.match(re)[1],this.version=sAgent.replace(RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var reVersion=RegExp("(.*)rv:([^)]+)(.*)");reVersion.test(sAgent)&&(this.version=sAgent.replace(reVersion,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var str="known browsers: (ie, gecko, opera, safari, konqueror) \n";str+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",str+="model -> "+this.model+"\n",str+="version -> "+this.version+"\n",str+="\n",str+="original UA -> "+this.userAgent,alert(str)}},SAPO.Browser.init()),SAPO.logReferer=function(classURL){var thisOptions=SAPO.extendObj({s:"js.sapo.pt",swakt:"59a97a5f-0924-3720-a62e-0c44d9ea4f16",pg:!1,swasection:!1,swasubsection:"",dc:"",ref:!1,etype:"libsapojs-view",swav:"1",swauv:"1",bcs:"1",bsr:"1",bul:"1",bje:"1",bfl:"1",debug:!1},arguments[1]||{});if(classURL!==void 0&&null!==classURL){thisOptions.pg||(thisOptions.pg=classURL),thisOptions.swasection||(thisOptions.swasection=classURL),thisOptions.ref||(thisOptions.ref=location.href);var waURI="http://wa.sl.pt/wa.gif?",waURISSL="https://ssl.sapo.pt/wa.sl.pt/wa.gif?",aQuery=["pg="+encodeURIComponent(thisOptions.pg),"swasection="+encodeURIComponent(thisOptions.swasection),"swasubsection="+encodeURIComponent(thisOptions.swasubsection),"dc="+encodeURIComponent(thisOptions.dc),"s="+thisOptions.s,"ref="+encodeURIComponent(thisOptions.ref),"swakt="+thisOptions.swakt,"etype="+encodeURIComponent(thisOptions.etype),"swav="+encodeURIComponent(thisOptions.swav),"swauv="+encodeURIComponent(thisOptions.swauv),"bcs="+encodeURIComponent(thisOptions.bcs),"bsr="+encodeURIComponent(thisOptions.bsr),"bul="+encodeURIComponent(thisOptions.bul),"bje="+encodeURIComponent(thisOptions.bje),"bfl="+encodeURIComponent(thisOptions.bfl),""],waLogURI="https:"===location.protocol?waURISSL:waURI,img=new Image;img.src=waLogURI+aQuery.join("&")}},SAPO._require=function(uri,callBack){if("string"==typeof uri){var script=document.createElement("script");script.type="text/javascript";var aHead=document.getElementsByTagName("HEAD");aHead.length>0&&aHead[0].appendChild(script),document.addEventListener?script.onload=function(){callBack!==void 0&&callBack()}:script.onreadystatechange=function(){"loaded"===this.readyState&&callBack!==void 0&&callBack()},script.src=uri}},SAPO.require=function(reqArray,callBack){var objectsToCheck=[],uriToAdd=[],_isSAPOObject=function(param){return"string"==typeof param&&/^SAPO\./.test(param)?!0:!1},_isObjectUri=function(param){return"object"==typeof param&&param.constructor===Object&&"string"==typeof param.uri?!0:!1},_isObjectArray=function(param){return"object"==typeof param&&param.constructor===Array?!0:!1},_parseSAPOObject=function(param){var aSAPO=param.split("."),sapoURI=aSAPO.join("/");return"http://js.sapo.pt/"+sapoURI+"/"},_parseObjectUri=function(param){return param.uri},_objectExists=function(objStr,ver){if(objStr!==void 0){for(var aStrObj=objStr.split("."),objParent=window,k=0,aStrObjLength=aStrObj.length;aStrObjLength>k;k++){if(void 0===objParent[aStrObj[k]])return!1;objParent=objParent[aStrObj[k]]}return ver!==void 0&&null!==ver?objParent.version!==void 0?objParent.version===ver?!0:!1:!0:!0}},requestRecursive=function(){uriToAdd.length>1?(SAPO._require(uriToAdd[0],requestRecursive),uriToAdd.splice(0,1)):1===uriToAdd.length?(callBack!==void 0?SAPO._require(uriToAdd[0],callBack):SAPO._require(uriToAdd[0]),uriToAdd.splice(0,1)):0===uriToAdd.length&&callBack!==void 0&&callBack()};if(reqArray!==void 0){var cur=!1;if("string"==typeof reqArray)_isSAPOObject(reqArray)?_objectExists(reqArray)||uriToAdd.push(_parseSAPOObject(reqArray)):uriToAdd.push(reqArray);else for(var i=0,reqArrayLength=reqArray.length;reqArrayLength>i;i++)cur=reqArray[i],_isSAPOObject(cur)?_objectExists(cur)||(objectsToCheck.push(cur),uriToAdd.push(_parseSAPOObject(cur))):_isObjectArray(cur)?cur.length>0&&_isSAPOObject(cur[0])&&(_objectExists(cur[0])||(2===cur.length?uriToAdd.push(_parseSAPOObject(cur[0])+cur[1]+"/"):uriToAdd.push(_parseSAPOObject(cur[0])))):"string"==typeof cur?uriToAdd.push(cur):_isObjectUri(cur)&&("string"==typeof cur.check?"string"==typeof cur.version?_objectExists(cur.check,cur.version)||uriToAdd.push(_parseObjectUri(cur)):_objectExists(cur.check)||uriToAdd.push(_parseObjectUri(cur)):uriToAdd.push(_parseObjectUri(cur)));if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[2]===!0){for(var l=0,uriToAddLength=uriToAdd.length;uriToAddLength>l;l++)SAPO._require(uriToAdd[l]);return callBack!==void 0&&callBack(),void 0}requestRecursive()}else requestRecursive()}},function(window,undefined){"use strict";if(SAPO.namespace("Dom"),!SAPO.Dom.Css){var ua=navigator.userAgent.toLowerCase(),isNativeAndroidBrowser=-1!==ua.indexOf("android")&&-1===ua.indexOf("chrome")&&-1!==ua.indexOf("safari"),isNode="object"==typeof Node?function(o){return o instanceof Node}:function(o){return o&&"object"==typeof o&&"number"==typeof o.nodeType&&"string"==typeof o.nodeName};SAPO.Dom.Css={addRemoveClassName:function(elm,className,addRemState){return addRemState?SAPO.Dom.Css.addClassName(elm,className):(SAPO.Dom.Css.removeClassName(elm,className),undefined)},addClassName:function(elm,className){elm=s$(elm),elm&&className&&(elm.classList!==undefined?elm.classList.add(className):this.hasClassName(elm,className)||(elm.className+=(elm.className?" ":"")+className))},removeClassName:function(elm,className){if(elm=s$(elm),elm&&className)if(elm.classList!==undefined)elm.classList.remove(className);else{if(elm.className===undefined)return!1;var elmClassName=elm.className,re=RegExp("(^|\\s+)"+className+"(\\s+|$)");elmClassName=elmClassName.replace(re," "),elmClassName=elmClassName.replace(/^\s+/,"").replace(/\s+$/,""),elm.className=elmClassName}},setClassName:function(elm,className,add){add?SAPO.Dom.Css.addClassName(elm,className):SAPO.Dom.Css.removeClassName(elm,className)},hasClassName:function(elm,className){if(elm=s$(elm),elm&&className){if(elm.classList!==undefined)return elm.classList.contains(className);if(elm.className===undefined)return!1;var elmClassName=elm.className;if(elmClassName.length===undefined)return!1;if(elmClassName.length>0){if(elmClassName===className)return!0;var re=RegExp("(^|\\s)"+className+"(\\s|$)");if(re.test(elmClassName))return!0}}return!1},blinkClass:function(element,className,timeout,negate){element=s$(element),SAPO.Dom.Css.setClassName(element,className,!negate),setTimeout(function(){SAPO.Dom.Css.setClassName(element,className,negate)},100|Number(timeout))},toggleClassName:function(elm,className,forceAdd){return elm&&className&&elm.classList!==undefined?(elm=s$(elm),null!==elm&&elm.classList.toggle(className),!0):(forceAdd!==undefined?forceAdd===!0?this.addClassName(elm,className):forceAdd===!1&&this.removeClassName(elm,className):this.hasClassName(elm,className)?this.removeClassName(elm,className):this.addClassName(elm,className),undefined)},setOpacity:function(elm,value){if(elm=s$(elm),null!==elm){var val=1;isNaN(Number(value))||(val=0>=value?0:1>=value?value:100>=value?value/100:1),elm.style.opacity!==undefined?elm.style.opacity=val:elm.style.filter="alpha(opacity:"+(0|100*val)+")"}},_camelCase:function(str){return str?str.replace(/-(\w)/g,function(_,$1){return $1.toUpperCase()}):str},getStyle:function(elm,style){if(elm=s$(elm),null!==elm){style="float"===style?"cssFloat":SAPO.Dom.Css._camelCase(style);var value=elm.style[style];if(!window.getComputedStyle||value&&"auto"!==value)!value&&elm.currentStyle&&(value=elm.currentStyle[style],"auto"!==value||"width"!==style&&"height"!==style||(value=elm["offset"+style.charAt(0).toUpperCase()+style.slice(1)]+"px"));else{var css=getComputedStyle(elm,null);value=css?css[style]:null}if("opacity"===style)return value?parseFloat(value,10):1;if("borderTopWidth"===style||"borderBottomWidth"===style||"borderRightWidth"===style||"borderLeftWidth"===style){if("thin"===value)return"1px";if("medium"===value)return"3px";if("thick"===value)return"5px"}return"auto"===value?null:value}},setStyle:function(elm,style){if(elm=s$(elm),null!==elm)if("string"==typeof style)elm.style.cssText+="; "+style,-1!==style.indexOf("opacity")&&this.setOpacity(elm,style.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var prop in style)style.hasOwnProperty(prop)&&("opacity"===prop?this.setOpacity(elm,style[prop]):"float"===prop||"cssFloat"===prop?elm.style.styleFloat===undefined?elm.style.cssFloat=style[prop]:elm.style.styleFloat=style[prop]:elm.style[prop]=style[prop])},show:function(elm,forceDisplayProperty){elm=s$(elm),null!==elm&&(elm.style.display=forceDisplayProperty?forceDisplayProperty:"")},hide:function(elm){elm=s$(elm),null!==elm&&(elm.style.display="none")},showHide:function(elm,show){elm=s$(elm),elm&&(elm.style.display=show?"":"none")},toggle:function(elm,forceShow){elm=s$(elm),null!==elm&&(forceShow!==undefined?forceShow===!0?this.show(elm):this.hide(elm):"none"===elm.style.display?this.show(elm):this.hide(elm))},_getRefTag:function(head){if(head.firstElementChild)return head.firstElementChild;for(var child=head.firstChild;child;child=child.nextSibling)if(1===child.nodeType)return child;return null},appendStyleTag:function(selector,style,options){options=SAPO.extendObj({type:"text/css",force:!1},options||{});var i,l,styles=document.getElementsByTagName("style"),oldStyle=!1,setStyle=!0;for(i=0,l=styles.length;l>i;i++)oldStyle=styles[i].innerHTML,oldStyle.indexOf(selector)>=0&&(setStyle=!1);if(setStyle){var defStyle=document.createElement("style"),head=document.getElementsByTagName("head")[0],refTag=!1,styleStr="";defStyle.type=options.type,styleStr+=selector+" {",styleStr+=style,styleStr+="} ",defStyle.styleSheet!==undefined?defStyle.styleSheet.cssText=styleStr:defStyle.appendChild(document.createTextNode(styleStr)),options.force?head.appendChild(defStyle):(refTag=this._getRefTag(head),refTag&&head.insertBefore(defStyle,refTag))}},appendStylesheet:function(path,options){options=SAPO.extendObj({media:"screen",type:"text/css",force:!1},options||{});var refTag,style=document.createElement("link"),head=document.getElementsByTagName("head")[0];style.media=options.media,style.type=options.type,style.href=path,style.rel="Stylesheet",options.force?head.appendChild(style):(refTag=this._getRefTag(head),refTag&&head.insertBefore(style,refTag))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(url,callback){if(!url)return callback(url);if(SAPO.Dom.Css._loadedCSSFiles[url])return callback(url);var cbs=SAPO.Dom.Css._loadingCSSFiles[url];if(cbs)return cbs.push(callback);SAPO.Dom.Css._loadingCSSFiles[url]=[callback];var linkEl=document.createElement("link");linkEl.type="text/css",linkEl.rel="stylesheet",linkEl.href=url;var headEl=document.getElementsByTagName("head")[0];headEl.appendChild(linkEl);var innerCb=function(frameEl){var url=this;SAPO.Dom.Css._loadedCSSFiles[url]=!0;for(var callbacks=SAPO.Dom.Css._loadingCSSFiles[url],i=0,f=callbacks.length;f>i;++i)callbacks[i](url);delete SAPO.Dom.Css._loadingCSSFiles[url],frameEl&&isNode(frameEl)&&frameEl.parentNode.removeChild(frameEl)};if(isNativeAndroidBrowser){var frameEl=document.createElement("iframe");frameEl.style.display="none",frameEl.onerror=innerCb,frameEl.onload=innerCb.bindObj(url,frameEl),document.body.appendChild(frameEl)}else{var imgEl=document.createElement("img");imgEl.onerror=innerCb.bindObj(url),imgEl.src=url}},decToHex:function(dec){var normalizeTo2=function(val){return 1===val.length&&(val="0"+val),val=val.toUpperCase()};if("object"==typeof dec){var rDec=normalizeTo2(parseInt(dec.r,10).toString(16)),gDec=normalizeTo2(parseInt(dec.g,10).toString(16)),bDec=normalizeTo2(parseInt(dec.b,10).toString(16));return rDec+gDec+bDec}dec+="";var rgb=dec.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==rgb?normalizeTo2(parseInt(rgb[1],10).toString(16))+normalizeTo2(parseInt(rgb[2],10).toString(16))+normalizeTo2(parseInt(rgb[3],10).toString(16)):normalizeTo2(parseInt(dec,10).toString(16))},hexToDec:function(hex){return 0===hex.indexOf("#")&&(hex=hex.substr(1)),6===hex.length?{r:parseInt(hex.substr(0,2),16),g:parseInt(hex.substr(2,2),16),b:parseInt(hex.substr(4,2),16)}:3===hex.length?{r:parseInt(hex.charAt(0)+hex.charAt(0),16),g:parseInt(hex.charAt(1)+hex.charAt(1),16),b:parseInt(hex.charAt(2)+hex.charAt(2),16)}:2>=hex.length?parseInt(hex,16):undefined},getPropertyFromStylesheet:function(selector,property){var rule=SAPO.Dom.Css.getRuleFromStylesheet(selector);return rule?rule.style[property]:null},getPropertyFromStylesheet2:function(selector,property){var rules=SAPO.Dom.Css.getRulesFromStylesheet(selector);return rules.forEach(function(rule){var x=rule.style[property];return null!==x&&x!==undefined?x:undefined}),null},getRuleFromStylesheet:function(selector){var sheet,rules,ri,rf,rule,s=document.styleSheets;if(!s)return null;for(var si=0,sf=document.styleSheets.length;sf>si;++si){if(sheet=document.styleSheets[si],rules=sheet.rules?sheet.rules:sheet.cssRules,!rules)return null;for(ri=0,rf=rules.length;rf>ri;++ri)if(rule=rules[ri],rule.selectorText&&rule.selectorText===selector)return rule}return null},getRulesFromStylesheet:function(selector){var sheet,rules,ri,rf,rule,res=[],s=document.styleSheets;if(!s)return res;for(var si=0,sf=document.styleSheets.length;sf>si;++si){if(sheet=document.styleSheets[si],rules=sheet.rules?sheet.rules:sheet.cssRules,!rules)return null;for(ri=0,rf=rules.length;rf>ri;++ri)rule=rules[ri],rule.selectorText&&rule.selectorText===selector&&res.push(rule)}return res},getPropertiesFromRule:function(selector){var prop,i,f,rule=this.getRuleFromStylesheet(selector),props={};rule=rule.style.cssText;var steps,val,pre,pos,parts=rule.split(";");for(i=0,f=parts.length;f>i;++i)" "===parts[i].charAt(0)&&(parts[i]=parts[i].substring(1)),steps=parts[i].split(":"),prop=this._camelCase(steps[0].toLowerCase()),val=steps[1],val&&(val=val.substring(1),"padding"===prop||"margin"===prop||"borderWidth"===prop?("borderWidth"===prop?(pre="border",pos="Width"):(pre=prop,pos=""),-1!==val.indexOf(" ")?(val=val.split(" "),props[pre+"Top"+pos]=val[0],props[pre+"Bottom"+pos]=val[0],props[pre+"Left"+pos]=val[1],props[pre+"Right"+pos]=val[1]):(props[pre+"Top"+pos]=val,props[pre+"Bottom"+pos]=val,props[pre+"Left"+pos]=val,props[pre+"Right"+pos]=val)):"borderRadius"===prop?-1!==val.indexOf(" ")?(val=val.split(" "),props.borderTopLeftRadius=val[0],props.borderBottomRightRadius=val[0],props.borderTopRightRadius=val[1],props.borderBottomLeftRadius=val[1]):(props.borderTopLeftRadius=val,props.borderTopRightRadius=val,props.borderBottomLeftRadius=val,props.borderBottomRightRadius=val):props[prop]=val);return props},changeFontSize:function(selector,delta,op,minVal,maxVal){var e;if("string"!=typeof selector?e="1st argument must be a CSS selector rule.":"number"!=typeof delta?e="2nd argument must be a number.":op!==undefined&&"+"!==op&&"*"!==op?e='3rd argument must be one of "+", "*".':minVal!==undefined&&("number"!=typeof minVal||0>=minVal)?e="4th argument must be a positive number.":maxVal!==undefined&&("number"!=typeof maxVal||maxVal>maxVal)&&(e="5th argument must be a positive number greater than minValue."),e)throw new TypeError(e);var val,el,els=SAPO.Dom.Selector.select(selector);minVal===undefined&&(minVal=1),op="*"===op?function(a,b){return a*b}:function(a,b){return a+b};for(var i=0,f=els.length;f>i;++i)el=els[i],val=parseFloat(SAPO.Dom.Css.getStyle(el,"fontSize")),val=op(val,delta),minVal>val||"number"==typeof maxVal&&val>maxVal||(el.style.fontSize=val+"px")}}}}(window),SAPO.namespace("Dom"),SAPO.Dom.Element={get:function(elm){return elm!==void 0?"string"==typeof elm?document.getElementById(elm):elm:null},create:function(tag,properties){var el=document.createElement(tag);return SAPO.extendObj(el,properties),el},remove:function(el){var parEl;el&&(parEl=el.parentNode)&&parEl.removeChild(el)},scrollTo:function(elm){if(elm=this.get(elm)){if(elm.scrollIntoView)return elm.scrollIntoView();var elmOffset={},elmTop=0,elmLeft=0;do elmTop+=elm.offsetTop||0,elmLeft+=elm.offsetLeft||0,elm=elm.offsetParent;while(elm);elmOffset={x:elmLeft,y:elmTop},window.scrollTo(elmOffset.x,elmOffset.y)}},offsetTop:function(elm){elm=this.get(elm);for(var offset=elm.offsetTop;elm.offsetParent&&"body"!==elm.offsetParent.tagName.toLowerCase();)elm=elm.offsetParent,offset+=elm.offsetTop;return offset},offsetLeft:function(elm){elm=this.get(elm);for(var offset=elm.offsetLeft;elm.offsetParent&&"body"!==elm.offsetParent.tagName.toLowerCase();)elm=elm.offsetParent,offset+=elm.offsetLeft;return offset},positionedOffset:function(element){var valueTop=0,valueLeft=0;element=this.get(element);do if(valueTop+=element.offsetTop||0,valueLeft+=element.offsetLeft||0,element=element.offsetParent){if("body"===element.tagName.toLowerCase())break;var value=element.style.position;if(!value&&element.currentStyle&&(value=element.currentStyle.position),(!value||"auto"===value)&&"undefined"!=typeof getComputedStyle){var css=getComputedStyle(element,null);value=css?css.position:null}if("relative"===value||"absolute"===value)break}while(element);return[valueLeft,valueTop]},offset:function(elm){return[this.offsetLeft(elm),this.offsetTop(elm)]},scroll:function(elm){return elm=elm?s$(elm):document.body,[window.pageXOffset?window.pageXOffset:elm.scrollLeft,window.pageYOffset?window.pageYOffset:elm.scrollTop]},_getPropPx:function(cs,prop){var n,c,val=cs.getPropertyValue?cs.getPropertyValue(prop):cs[prop];return val?(c=val.indexOf("px"),n=-1===c?0:parseInt(val,10)):n=0,n},offset2:function(el){el=s$(el);var dRes,bRes,parent,cs,bProp=["border-left-width","border-top-width"],res=[0,0],getPropPx=SAPO.Dom.Element._getPropPx;do cs=window.getComputedStyle?window.getComputedStyle(el,null):el.currentStyle,dRes=[0|el.offsetLeft,0|el.offsetTop],bRes=[getPropPx(cs,bProp[0]),getPropPx(cs,bProp[1])],SAPO.Browser.OPERA?(res[0]+=dRes[0],res[1]+=dRes[1]):(res[0]+=dRes[0]+bRes[0],res[1]+=dRes[1]+bRes[1]),parent=el.offsetParent;while(el=parent);return bRes=[getPropPx(cs,bProp[0]),getPropPx(cs,bProp[1])],SAPO.Browser.OPERA||(SAPO.Browser.GECKO?(res[0]+=bRes[0],res[1]+=bRes[1]):(res[0]-=bRes[0],res[1]-=bRes[1])),res},hasAttribute:function(elm,attr){return elm.hasAttribute?elm.hasAttribute(attr):!!elm.getAttribute(attr)},insertAfter:function(newElm,targetElm){(targetElm=this.get(targetElm))&&targetElm.parentNode.insertBefore(newElm,targetElm.nextSibling)},insertTop:function(newElm,targetElm){(targetElm=this.get(targetElm))&&targetElm.insertBefore(newElm,targetElm.firstChild)},textContent:function(node){node=s$(node);var text;switch(node&&node.nodeType){case 9:return this.textContent(node.documentElement||node.body&&node.body.parentNode||node.body);case 1:if(text=node.innerText,text!==void 0)return text;case 11:if(text=node.textContent,text!==void 0)return text;if(node.firstChild===node.lastChild)return this.textContent(node.firstChild);text=[];for({var child,k=0,cs=node.childNodes;cs.length};child=cs[k];k++)text.push(this.textContent(child));return text.join("");case 3:case 4:return node.nodeValue}return""},setTextContent:function(node,text){switch(node=s$(node),node&&node.nodeType){case 1:if("innerText"in node){node.innerText=text;break}case 11:if("textContent"in node){node.textContent=text;break}case 9:for(;node.firstChild;)node.removeChild(node.firstChild);if(""!==text){var doc=node.ownerDocument||node;node.appendChild(doc.createTextNode(text))}break;case 3:case 4:node.nodeValue=text}},isLink:function(element){var b=element&&1===element.nodeType&&(/^a|area$/i.test(element.tagName)||element.hasAttributeNS&&element.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!b},isAncestorOf:function(ancestor,node){if(!node||!ancestor)return!1;if(node.compareDocumentPosition)return 0!==(16&ancestor.compareDocumentPosition(node));for(;node=node.parentNode;)if(node===ancestor)return!0;return!1},descendantOf:function(node,descendant){return node!==descendant&&this.isAncestorOf(node,descendant)},firstElementChild:function(elm){if(!elm)return null;if("firstElementChild"in elm)return elm.firstElementChild;for(var child=elm.firstChild;child&&1!==child.nodeType;)child=child.nextSibling;return child},lastElementChild:function(elm){if(!elm)return null;if("lastElementChild"in elm)return elm.lastElementChild;for(var child=elm.lastChild;child&&1!==child.nodeType;)child=child.previousSibling;return child},nextElementSibling:function(node){var sibling=null;if(!node)return sibling;if("nextElementSibling"in node)return node.nextElementSibling;for(sibling=node.nextSibling;sibling&&1!==sibling.nodeType;)sibling=sibling.nextSibling;return sibling},previousElementSibling:function(node){var sibling=null;if(!node)return sibling;if("previousElementSibling"in node)return node.previousElementSibling;for(sibling=node.previousSibling;sibling&&1!==sibling.nodeType;)sibling=sibling.previousSibling;return sibling},elementWidth:function(element){return"string"==typeof element&&(element=document.getElementById(element)),element.offsetWidth},elementHeight:function(element){return"string"==typeof element&&(element=document.getElementById(element)),element.offsetHeight},elementLeft:function(element){return"string"==typeof element&&(element=document.getElementById(element)),element.offsetLeft},elementTop:function(element){return"string"==typeof element&&(element=document.getElementById(element)),element.offsetTop},elementDimensions:function(element){return"string"==typeof element&&(element=document.getElementById(element)),[element.offsetWidth,element.offsetHeight]},clonePosition:function(cloneTo,cloneFrom){return cloneTo.style.top=this.offsetTop(cloneFrom)+"px",cloneTo.style.left=this.offsetLeft(cloneFrom)+"px",cloneTo},ellipsizeText:function(element){if(element=s$(element))for(;element&&element.scrollHeight>element.offsetHeight+8;)element.textContent=element.textContent.replace(/(\s+\S+)\s*$/,replace||"â€¦")},findUpwardsByClass:function(element,className){for(var re=RegExp("(^|\\s)"+className+"(\\s|$)");;){if(element.className!==void 0&&re.test(element.className))return element;if(element=element.parentNode,!element||1!==element.nodeType)return!1}},findUpwardsByTag:function(element,tag){for(;;){if(element&&element.nodeName.toUpperCase()===tag.toUpperCase())return element;if(element=element.parentNode,!element||1!==element.nodeType)return!1}},findUpwardsById:function(element,id){for(;;){if(element.id!==void 0&&element.id===id)return element;if(element=element.parentNode,!element||1!==element.nodeType)return!1}},getChildrenText:function(el,removeIt){var node,j,part,nodes=el.childNodes,jLen=nodes.length,text="";if(!el)return text;for(j=0;jLen>j;++j)node=nodes[j],node&&3===node.nodeType&&(part=this._trimString(node.data+""),part.length>0?(text+=part,removeIt&&el.removeChild(node)):el.removeChild(node));return text},_trimString:function(text){return String.prototype.trim?text.trim():text.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(select){for(var selectEl=s$(select),values=[],i=0;selectEl.options.length>i;++i)values.push(selectEl.options[i].value);return values},_normalizeData:function(data){for(var d,data2=[],i=0,f=data.length;f>i;++i)d=data[i],d instanceof Array?1===d.length&&d.push(d[0]):d=[d,d],data2.push(d);return data2},fillSelect:function(container,data,skipEmpty,defaultValue){var containerEl=s$(container);if(containerEl){containerEl.innerHTML="";var d,optionEl;skipEmpty||(optionEl=document.createElement("option"),optionEl.setAttribute("value",""),containerEl.appendChild(optionEl)),data=SAPO.Dom.Element._normalizeData(data);for(var i=0,f=data.length;f>i;++i)d=data[i],optionEl=document.createElement("option"),optionEl.setAttribute("value",d[0]),d.length>2&&optionEl.setAttribute("extra",d[2]),optionEl.appendChild(document.createTextNode(d[1])),d[0]===defaultValue&&optionEl.setAttribute("selected","selected"),containerEl.appendChild(optionEl)}},fillSelect2:function(ctn,opts){ctn=s$(ctn),ctn.innerHTML="";var defs={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!opts)throw"param opts is a requirement!";if(!opts.data)throw"opts.data is a requirement!";opts=SAPO.extendObj(defs,opts);var optionEl,d,optGroupValuesEl=document.createElement("optgroup");optGroupValuesEl.setAttribute("label",opts.optionsGroupLabel),opts.data=SAPO.Dom.Element._normalizeData(opts.data),opts.skipCreate||opts.data.unshift(["$create$",opts.createLabel]),opts.skipEmpty||opts.data.unshift(["",opts.emptyLabel]);for(var i=0,f=opts.data.length;f>i;++i)d=opts.data[i],optionEl=document.createElement("option"),optionEl.setAttribute("value",d[0]),optionEl.appendChild(document.createTextNode(d[1])),d[0]===opts.defaultValue&&optionEl.setAttribute("selected","selected"),""===d[0]||"$create$"===d[0]?ctn.appendChild(optionEl):optGroupValuesEl.appendChild(optionEl);var lastValIsNotOption=function(data){var lastVal=data[data.length-1][0];return""===lastVal||"$create$"===lastVal};lastValIsNotOption(opts.data)&&(optionEl=document.createElement("option"),optionEl.setAttribute("value","$dummy$"),optionEl.setAttribute("disabled","disabled"),optionEl.appendChild(document.createTextNode(opts.emptyOptionsGroupLabel)),optGroupValuesEl.appendChild(optionEl)),ctn.appendChild(optGroupValuesEl);var addOption=function(v,l){var optionEl=ctn.options[ctn.options.length-1];optionEl.getAttribute("disabled")&&optionEl.parentNode.removeChild(optionEl),optionEl=document.createElement("option"),optionEl.setAttribute("value",v),optionEl.appendChild(document.createTextNode(l)),optGroupValuesEl.appendChild(optionEl),ctn.options[ctn.options.length-1].setAttribute("selected",!0)};opts.skipCreate||(ctn.onchange=function(){"$create$"===ctn.value&&"function"==typeof opts.onCreate&&opts.onCreate(ctn,addOption)})},fillRadios:function(insertAfterEl,name,data,skipEmpty,defaultValue,splitEl){var afterEl=s$(insertAfterEl);for(afterEl=afterEl.nextSibling;afterEl&&1!==afterEl.nodeType;)afterEl=afterEl.nextSibling;var containerEl=document.createElement("span");afterEl?afterEl.parentNode.insertBefore(containerEl,afterEl):s$(insertAfterEl).appendChild(containerEl),data=SAPO.Dom.Element._normalizeData(data),"]"!==name.substring(name.length-1)&&(name+="[]");
var d,inputEl;skipEmpty||(inputEl=document.createElement("input"),inputEl.setAttribute("type","radio"),inputEl.setAttribute("name",name),inputEl.setAttribute("value",""),containerEl.appendChild(inputEl),splitEl&&containerEl.appendChild(document.createElement(splitEl)));for(var i=0;data.length>i;++i)d=data[i],inputEl=document.createElement("input"),inputEl.setAttribute("type","radio"),inputEl.setAttribute("name",name),inputEl.setAttribute("value",d[0]),containerEl.appendChild(inputEl),containerEl.appendChild(document.createTextNode(d[1])),splitEl&&containerEl.appendChild(document.createElement(splitEl)),d[0]===defaultValue&&(inputEl.checked=!0);return containerEl},fillChecks:function(insertAfterEl,name,data,defaultValue,splitEl){var afterEl=s$(insertAfterEl);for(afterEl=afterEl.nextSibling;afterEl&&1!==afterEl.nodeType;)afterEl=afterEl.nextSibling;var containerEl=document.createElement("span");afterEl?afterEl.parentNode.insertBefore(containerEl,afterEl):s$(insertAfterEl).appendChild(containerEl),data=SAPO.Dom.Element._normalizeData(data),"]"!==name.substring(name.length-1)&&(name+="[]");for(var d,inputEl,i=0;data.length>i;++i)d=data[i],inputEl=document.createElement("input"),inputEl.setAttribute("type","checkbox"),inputEl.setAttribute("name",name),inputEl.setAttribute("value",d[0]),containerEl.appendChild(inputEl),containerEl.appendChild(document.createTextNode(d[1])),splitEl&&containerEl.appendChild(document.createElement(splitEl)),d[0]===defaultValue&&(inputEl.checked=!0);return containerEl},parentIndexOf:function(parentEl,childEl){for(var node,idx=0,i=0,f=parentEl.childNodes.length;f>i;++i)if(node=parentEl.childNodes[i],1===node.nodeType){if(node===childEl)return idx;++idx}return-1},nextSiblings:function(elm){if("string"==typeof elm&&(elm=document.getElementById(elm)),"object"==typeof elm&&null!==elm&&elm.nodeType&&1===elm.nodeType){for(var elements=[],siblings=elm.parentNode.children,index=SAPO.Dom.Element.parentIndexOf(elm.parentNode,elm),i=++index,len=siblings.length;len>i;i++)elements.push(siblings[i]);return elements}return[]},previousSiblings:function(elm){if("string"==typeof elm&&(elm=document.getElementById(elm)),"object"==typeof elm&&null!==elm&&elm.nodeType&&1===elm.nodeType){for(var elements=[],siblings=elm.parentNode.children,index=SAPO.Dom.Element.parentIndexOf(elm.parentNode,elm),i=0,len=index;len>i;i++)elements.push(siblings[i]);return elements}return[]},siblings:function(elm){if("string"==typeof elm&&(elm=document.getElementById(elm)),"object"==typeof elm&&null!==elm&&elm.nodeType&&1===elm.nodeType){for(var elements=[],siblings=elm.parentNode.children,i=0,len=siblings.length;len>i;i++)elm!==siblings[i]&&elements.push(siblings[i]);return elements}return[]},childElementCount:function(elm){return elm=s$(elm),"childElementCount"in elm?elm.childElementCount:elm?this.siblings(elm).length+1:0},appendHTML:function(elm,html){var temp=document.createElement("div");temp.innerHTML=html;for(var tempChildren=temp.children,i=0;tempChildren.length>i;i++)elm.appendChild(tempChildren[i])},prependHTML:function(elm,html){var temp=document.createElement("div");temp.innerHTML=html;for(var first=elm.firstChild,tempChildren=temp.children,i=tempChildren.length-1;i>=0;i--)elm.insertBefore(tempChildren[i],first),first=elm.firstChild},htmlToFragment:function(html){return this.htmlToFragment="function"==typeof document.createRange&&"function"==typeof Range.prototype.createContextualFragment?function(html){var range;return"string"!=typeof html?document.createDocumentFragment():(range=document.createRange(),range.selectNode(document.body),range.createContextualFragment(html))}:function(html){var tempElement,current,fragment=document.createDocumentFragment();if("string"!=typeof html)return fragment;for(tempElement=document.createElement("div"),tempElement.innerHTML=html;current=tempElement.firstChild;)fragment.appendChild(current);return fragment},this.htmlToFragment.call(this,html)},data:function(selector){if("object"!=typeof selector&&"string"!=typeof selector)throw"[SAPO.Dom.Element.data] :: Invalid selector defined";if("object"==typeof selector)this._element=selector;else{if(this._element=SAPO.Dom.Selector.select(selector),0>=this._element.length)throw"[SAPO.Dom.Element.data] :: Can't find any element with the specified selector";this._element=this._element[0]}var prop,propName,i,dataset={},attributesElements=this._element.dataset||this._element.attributes||{};for(prop in attributesElements)if(!("hasOwnProperty"in attributesElements&&!attributesElements.hasOwnProperty(prop)||attributesElements[prop]===void 0||"object"==typeof attributesElements[prop]&&(prop=attributesElements[prop].name||prop,(attributesElements[prop].name||attributesElements[prop].nodeValue)&&0!==prop.indexOf("data-")||!(attributesElements[prop].nodeValue||attributesElements[prop].value||attributesElements[prop])))){if(propName=prop.replace("data-",""),-1!==propName.indexOf("-")){for(propName=propName.split("-"),i=1;propName.length>i;i+=1)propName[i]=propName[i].substr(0,1).toUpperCase()+propName[i].substr(1);propName=propName.join("")}dataset[propName]=attributesElements[prop].nodeValue||attributesElements[prop].value||attributesElements[prop],("true"===dataset[propName]||"false"===dataset[propName])&&(dataset[propName]="true"===dataset[propName])}return dataset},moveCursorTo:function(el,t){if(el.setSelectionRange)el.setSelectionRange(t,t);else{var range=el.createTextRange();range.collapse(!0),range.moveEnd("character",t),range.moveStart("character",t),range.select()}}},SAPO.namespace("Dom"),SAPO.Dom.Event={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,element:function(ev){var node=ev.target||"mouseout"==ev.type&&ev.fromElement||"mouseleave"==ev.type&&ev.fromElement||"mouseover"==ev.type&&ev.toElement||"mouseenter"==ev.type&&ev.toElement||ev.srcElement||null;return!node||3!=node.nodeType&&4!=node.nodeType?node:node.parentNode},relatedTarget:function(ev){var node=ev.relatedTarget||"mouseout"==ev.type&&ev.toElement||"mouseleave"==ev.type&&ev.toElement||"mouseover"==ev.type&&ev.fromElement||"mouseenter"==ev.type&&ev.fromElement||null;return!node||3!=node.nodeType&&4!=node.nodeType?node:node.parentNode},findElement:function(ev,elmTagName,force){for(var node=this.element(ev);;){if(node.nodeName.toLowerCase()===elmTagName.toLowerCase())return node;if(node=node.parentNode,!node)return force?!1:document;if(!node.parentNode)return force?!1:document}},fire:function(element,eventName,memo){element=s$(element);var ev,nativeEvents;if(nativeEvents=document.createEvent?{DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0,focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0,wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0,DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:{onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0,onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0,ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0,onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0,onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0},null!==element){element==document&&document.createEvent&&!element.dispatchEvent&&(element=document.documentElement),document.createEvent?(ev=document.createEvent("HTMLEvents"),nativeEvents[eventName]===void 0?ev.initEvent("dataavailable",!0,!0):ev.initEvent(eventName,!0,!0)):(ev=document.createEventObject(),ev.eventType=nativeEvents["on"+eventName]===void 0?"ondataavailable":"on"+eventName),ev.eventName=eventName,ev.memo=memo||{};try{if(document.createEvent)element.dispatchEvent(ev);else{if(!element.fireEvent)return;element.fireEvent(ev.eventType,ev)}}catch(ex){}return ev}},observe:function(element,eventName,callBack){if(element=s$(element),null!==element){if(-1!=eventName.indexOf(":")||"hashchange"==eventName&&element.attachEvent&&!window.onhashchange){var argCallback=callBack;callBack=function(ev,eventName,cb){(ev.eventName===eventName||SAPO.Browser.IE&&"dom:loaded"==eventName)&&(window.addEventListener&&(window.event=ev),cb())}.bindObjEvent(this,eventName,argCallback),eventName="dataavailable"}element.addEventListener?element.addEventListener(eventName,callBack,!1):element.attachEvent("on"+eventName,callBack)}},stopObserving:function(element,eventName,callBack){element=s$(element),null!==element&&(element.removeEventListener?element.removeEventListener(eventName,callBack,!1):element.detachEvent("on"+eventName,callBack))},stop:function(event){null!==event.cancelBubble&&(event.cancelBubble=!0),event.stopPropagation&&event.stopPropagation(),event.preventDefault&&event.preventDefault(),window.attachEvent&&(event.returnValue=!1),null!==event.cancel&&(event.cancel=!0)},stopDefault:function(event){event.preventDefault&&event.preventDefault(),window.attachEvent&&(event.returnValue=!1),null!==event.cancel&&(event.cancel=!0)},pointer:function(ev){return{x:ev.pageX||ev.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:ev.pageY||ev.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(ev){return this.pointer(ev).x},pointerY:function(ev){return this.pointer(ev).y},isLeftClick:function(ev){if(window.addEventListener){if(0===ev.button)return!0;if("touch"==ev.type.substring(0,5)&&null==ev.button)return!0}else if(1===ev.button)return!0;return!1},isRightClick:function(ev){return 2===ev.button?!0:!1},isMiddleClick:function(ev){if(window.addEventListener){if(1===ev.button)return!0}else if(4===ev.button)return!0;return!1},getCharFromKeyboardEvent:function(event,changeCasing){var k=event.keyCode,c=String.fromCharCode(k),shiftOn=event.shiftKey;if(k>=65&&90>=k)return"boolean"==typeof changeCasing&&(shiftOn=changeCasing),shiftOn?c:c.toLowerCase();if(k>=96&&105>=k)return String.fromCharCode(48+(k-96));switch(k){case 109:case 189:return"-";case 107:case 187:return"+"}return c},debug:function(){}},SAPO.namespace("Dom"),SAPO.Dom.Loaded={version:"1.1",_cbQueue:[],run:function(win,fn){fn||(fn=win,win=window),this._win=win,this._doc=win.document,this._root=this._doc.documentElement,this._done=!1,this._top=!0,this._handlers={checkState:this._checkState.bindObjEvent(this),poll:this._poll.bindObj(this)};var ael=this._doc.addEventListener;this._add=ael?"addEventListener":"attachEvent",this._rem=ael?"removeEventListener":"detachEvent",this._pre=ael?"":"on",this._det=ael?"DOMContentLoaded":"onreadystatechange",this._wet=this._pre+"load";var csf=this._handlers.checkState;if("complete"===this._doc.readyState)fn.call(this._win,"lazy");else if(this._cbQueue.push(fn),this._doc[this._add](this._det,csf),this._win[this._add](this._wet,csf),!ael&&this._root.doScroll){try{this._top=!this._win.frameElement}catch(e){}this._top&&this._poll()}},_checkState:function(event){if(event&&("readystatechange"!==event.type||"complete"===this._doc.readyState)){var where="load"===event.type?this._win:this._doc;where[this._rem](this._pre+event.type,this._handlers.checkState,!1),this._ready()}},_poll:function(){try{this._root.doScroll("left")}catch(e){return setTimeout(this._handlers.poll,50)}this._ready()},_ready:function(){if(!this._done){this._done=!0;for(var i=0;this._cbQueue.length>i;++i)this._cbQueue[i].call(this._win)}}},SAPO.namespace("Dom"),function(window,undefined){function Sizzle(selector,context,results,seed){results=results||[],context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||"string"!=typeof selector)return results;if(1!==nodeType&&9!==nodeType)return[];if(xml=isXML(context),!xml&&!seed&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,slice.call(context.getElementsByTagName(selector),0)),results;if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName)return push.apply(results,slice.call(context.getElementsByClassName(m),0)),results}return select(selector.replace(rtrim,"$1"),context,results,seed,xml)}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function siblingCheck(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(tokens.push(matched=new Token(match.shift())),soFar=soFar.slice(matched.length),matched.type=match[0].replace(rtrim," "));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match,document,!0))||(tokens.push(matched=new Token(match.shift())),soFar=soFar.slice(matched.length),matched.type=type,matched.matches=match);if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===combinator.dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(checkNonElements||1===elem.nodeType)return matcher(elem,context,xml)}:function(elem,context,xml){if(xml){for(;elem=elem[dir];)if((checkNonElements||1===elem.nodeType)&&matcher(elem,context,xml))return elem}else for(var cache,dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;elem=elem[dir];)if(checkNonElements||1===elem.nodeType){if((cache=elem[expando])===cachedkey)return elem.sizset;if("string"==typeof cache&&0===cache.indexOf(dirkey)){if(elem.sizset)return elem}else{if(elem[expando]=cachedkey,matcher(elem,context,xml))return elem.sizset=!0,elem;elem.sizset=!1}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){if(!seed||!postFinder){var i,elem,postFilterIn,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[],seed),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(postFilterIn=condense(matcherOut,postMap),postFilter(postFilterIn,[],context,xml),i=postFilterIn.length;i--;)(elem=postFilterIn[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed)for(i=preFilter&&matcherOut.length;i--;)(elem=matcherOut[i])&&(seed[preMap[i]]=!(results[preMap[i]]=elem));else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&tokens.join(""))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.E;for(outermost&&(outermostContext=context!==document&&context,cachedruns=superMatcher.el);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j];j++)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++superMatcher.el)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j];j++)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return superMatcher.el=0,bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results,seed){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results,seed);return results}function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector);if(match.length,!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&!xml&&Expr.relative[tokens[1].type]){if(context=Expr.find.ID(token.matches[0].replace(rbackslash,""),context,xml)[0],!context)return results;selector=selector.slice(tokens.shift().length)}for(i=matchExpr.POS.test(selector)?-1:tokens.length-1;i>=0&&(token=tokens[i],!Expr.relative[type=token.type]);i--)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml))){if(tokens.splice(i,1),selector=seed.length&&tokens.join(""),!selector)return push.apply(results,slice.call(seed,0)),results;break}}return compile(selector,match)(seed,context,xml,results,rsibling.test(selector)),results}function setFilters(){}var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,outermostContext,baseHasDuplicate=!0,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},markFunction=function(fn,value){return fn[expando]=null==value||value,fn},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){return keys.push(key)>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value},cache)},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rsibling=/[\x20\t\r\n\f]*[+~]/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:RegExp("^#("+characterEncoding+")"),CLASS:RegExp("^\\.("+characterEncoding+")"),NAME:RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:RegExp("^"+attributes),PSEUDO:RegExp("^"+pseudos),POS:RegExp(pos,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return!1}finally{div=null}},assertTagNameNoComments=assert(function(div){return div.appendChild(document.createComment("")),!div.getElementsByTagName("*").length}),assertHrefNotNormalized=assert(function(div){return div.innerHTML="<a href='#'></a>",div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&"#"===div.firstChild.getAttribute("href")}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return"boolean"!==type&&"string"!==type}),assertUsableClassName=assert(function(div){return div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",div.getElementsByClassName&&div.getElementsByClassName("e").length?(div.lastChild.className="e",2===div.getElementsByClassName("e").length):!1}),assertUsableName=assert(function(div){div.id=expando+0,div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>",docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;return assertGetIdNotName=!document.getElementById(expando),docElem.removeChild(div),pass});try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i];i++)results.push(elem);return results}}Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},contains=Sizzle.contains=docElem.contains?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&1===bup.nodeType&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},Sizzle.attr=function(elem,name){var val,xml=isXML(elem);return xml||(name=name.toLowerCase()),(val=Expr.attrHandle[name])?val(elem):xml||assertAttributes?elem.getAttribute(name):(val=elem.getAttributeNode(name),val?"boolean"==typeof elem[name]?elem[name]?name:null:val.specified?val.value:null:null)},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:assertHrefNotNormalized?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):undefined}:function(tag,context){var results=context.getElementsByTagName(tag);if("*"===tag){for(var elem,tmp=[],i=0;elem=results[i];i++)1===elem.nodeType&&tmp.push(elem);return tmp}return results},NAME:assertUsableName&&function(tag,context){return typeof context.getElementsByName!==strundefined?context.getElementsByName(name):undefined},CLASS:assertUsableClassName&&function(className,context,xml){return typeof context.getElementsByClassName===strundefined||xml?undefined:context.getElementsByClassName(className)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(rbackslash,""),match[3]=(match[4]||match[5]||"").replace(rbackslash,""),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1]?(match[2]||Sizzle.error(match[0]),match[3]=+(match[3]?match[4]+(match[5]||1):2*("even"===match[2]||"odd"===match[2])),match[4]=+(match[6]+match[7]||"odd"===match[2])):match[2]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var unquoted,excess;return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[3]:(unquoted=match[4])&&(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(unquoted=unquoted.slice(0,excess),match[0]=match[0].slice(0,excess)),match[2]=unquoted),match.slice(0,3))}},filter:{ID:assertGetIdNotName?function(id){return id=id.replace(rbackslash,""),function(elem){return elem.getAttribute("id")===id}}:function(id){return id=id.replace(rbackslash,""),function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){return"*"===nodeName?function(){return!0}:(nodeName=nodeName.replace(rbackslash,"").toLowerCase(),function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName})},CLASS:function(className){var pattern=classCache[expando][className];return pattern||(pattern=classCache(className,RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))),function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.substr(result.length-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.substr(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,argument,first,last){return"nth"===type?function(elem){var node,diff,parent=elem.parentNode;if(1===first&&0===last)return!0;if(parent)for(diff=0,node=parent.firstChild;node&&(1!==node.nodeType||(diff++,elem!==node));node=node.nextSibling);return diff-=last,diff===first||0===diff%first&&diff/first>=0}:function(elem){var node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0
},parent:function(elem){return!Expr.pseudos.empty(elem)},empty:function(elem){var nodeType;for(elem=elem.firstChild;elem;){if(elem.nodeName>"@"||3===(nodeType=elem.nodeType)||4===nodeType)return!1;elem=elem.nextSibling}return!0},header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return"input"===elem.nodeName.toLowerCase()&&"text"===(type=elem.type)&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===type)},radio:createInputPseudo("radio"),checkbox:createInputPseudo("checkbox"),file:createInputPseudo("file"),password:createInputPseudo("password"),image:createInputPseudo("image"),submit:createButtonPseudo("submit"),reset:createButtonPseudo("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return!(elem!==doc.activeElement||doc.hasFocus&&!doc.hasFocus()||!elem.type&&!elem.href)},active:function(elem){return elem===elem.ownerDocument.activeElement},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;length>++i;)matchIndexes.push(i);return matchIndexes})}},sortOrder=docElem.compareDocumentPosition?function(a,b){return a===b?(hasDuplicate=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},[0,0].sort(sortOrder),baseHasDuplicate=!hasDuplicate,Sizzle.uniqueSort=function(results){var elem,i=1;if(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate)for(;elem=results[i];i++)elem===results[i-1]&&results.splice(i--,1);return results},Sizzle.error=function(msg){throw Error("Syntax error, unrecognized expression: "+msg)},compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},document.querySelectorAll&&function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active",":focus"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){div.innerHTML="<p test=''></p>",div.querySelectorAll("[test^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')"),div.innerHTML="<input type='hidden'/>",div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled")}),rbuggyQSA=RegExp(rbuggyQSA.join("|")),select=function(selector,context,results,seed,xml){if(!(seed||xml||rbuggyQSA&&rbuggyQSA.test(selector))){var groups,i,old=!0,nid=expando,newContext=context,newSelector=9===context.nodeType&&selector;if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+groups[i].join("");newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}return oldSelect(selector,context,results,seed,xml)},matches&&(assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle"),rbuggyMatches.push("!=",pseudos)}catch(e){}}),rbuggyMatches=RegExp(rbuggyMatches.join("|")),Sizzle.matchesSelector=function(elem,expr){if(expr=expr.replace(rattributeQuotes,"='$1']"),!(isXML(elem)||rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,null,null,[elem]).length>0})}(),Expr.pseudos.nth=Expr.pseudos.eq,Expr.filters=setFilters.prototype=Expr.pseudos,Expr.setFilters=new setFilters,SAPO.Dom.Selector={},SAPO.Dom.Selector.select=Sizzle,SAPO.Dom.Selector.matches=Sizzle.matches,SAPO.Dom.Selector.find=function(){throw"SAPO.Dom.Selector.find() no longer exists. Use SAPO.Dom.Selector.select() instead or use version 0.1"}}(window),SAPO.namespace("Utility"),Array.prototype.forEach||(Array.prototype.forEach=function forEach(cb,thisArg){var O,len,T,k,kValue;if(null===this||void 0===this)throw new TypeError("this is null or not defined");if(O=Object(this),len=O.length>>>0,"[object Function]"!=={}.toString.call(cb))throw new TypeError(cb+" is not a function");for(thisArg&&(T=thisArg),k=0;len>k;)Object.prototype.hasOwnProperty.call(O,k)&&(kValue=O[k],cb.call(T,kValue,k,O)),++k}),Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,A,k;(null===this||void 0===this)&&new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("[object Function]"!=={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),A=Array(len),k=0;len>k;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),++k}return A}),SAPO.Utility.Array={inArray:function(value,arr){if("object"==typeof arr)for(var i=0,f=arr.length;f>i;++i)if(arr[i]===value)return!0;return!1},sortMulti:function(arr,key){if(arr===void 0||arr.constructor!==Array)return!1;if("string"!=typeof key)return arr.sort();if(arr.length>0){if(arr[0][key]===void 0)return!1;arr.sort(function(a,b){var x=a[key],y=b[key];return y>x?-1:x>y?1:0})}return arr},keyValue:function(value,arr,first){if(value!==void 0&&"object"==typeof arr&&this.inArray(value,arr)){for(var aKeys=[],i=0,f=arr.length;f>i;++i)if(arr[i]===value){if(first!==void 0&&first===!0)return i;aKeys.push(i)}return aKeys}return!1},shuffle:function(arr){if(arr!==void 0&&arr.constructor!==Array)return!1;for(var total=arr.length,tmp1=!1,rnd=!1;total--;)rnd=Math.floor(Math.random()*(total+1)),tmp1=arr[total],arr[total]=arr[rnd],arr[rnd]=tmp1;return arr},each:function(arr,cb){var arrCopy=arr.slice(0),total=arrCopy.length,iterations=Math.floor(total/8),leftover=total%8,i=0;if(leftover>0)do cb(arrCopy[i++],i-1,arr);while(--leftover>0);if(0===iterations)return arr;do cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr),cb(arrCopy[i++],i-1,arr);while(--iterations>0);return arr},intersect:function(arr1,arr2){if(!arr1||!arr2||arr1 instanceof Array==!1||arr2 instanceof Array==!1)return[];for(var shared=[],i=0,I=arr1.length;I>i;++i)for(var j=0,J=arr2.length;J>j;++j)arr1[i]===arr2[j]&&shared.push(arr1[i]);return shared},convert:function(arr){return Array.prototype.slice.call(arr||[],0)},insert:function(arr,idx,value){arr.splice(idx,0,value)}},SAPO.namespace("Utility"),SAPO.Utility.Date={_months:function(index){var _m=["Janeiro","Fevereiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return _m[index]},_iMonth:function(month){return Number(month)?+month-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"marÃ§o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[month.toLowerCase()]},_wDays:function(index){var _d=["Domingo","Segunda","TerÃ§a","Quarta","Quinta","Sexta","SÃ¡bado"];return _d[index]},_iWeek:function(week){return Number(week)?+week||7:{segunda:1,seg:1,"terÃ§a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"sÃ¡bado":6,"sÃ¡b":6,domingo:7,dom:7}[week.toLowerCase()]},_daysInMonth:function(_m,_y){var nDays;return nDays=1===_m||3===_m||5===_m||7===_m||8===_m||10===_m||12===_m?31:4===_m||6===_m||9===_m||11===_m?30:0===_y%400||0===_y%4&&0!==_y%100?29:28},get:function(format,_date){(format===void 0||""===format)&&(format="Y-m-d");var jsDate,iFormat=format.split(""),result=Array(iFormat.length),escapeChar="\\";jsDate=_date===void 0?new Date:"number"==typeof _date?new Date(1e3*_date):new Date(_date);for(var jsFirstDay,jsThisDay,jsHour,i=0;iFormat.length>i;i++)switch(iFormat[i]){case escapeChar:result[i]=iFormat[i+1],i++;break;case"d":var jsDay=jsDate.getDate();result[i]=(jsDay+"").length>1?jsDay:"0"+jsDay;break;case"D":result[i]=this._wDays(jsDate.getDay()).substring(0,3);break;case"j":result[i]=jsDate.getDate();break;case"l":result[i]=this._wDays(jsDate.getDay());break;case"N":result[i]=jsDate.getDay()||7;break;case"S":var temp=jsDate.getDate(),suffixes=["st","nd","rd"],suffix="";result[i]=temp>=11&&13>=temp?"th":(suffix=suffixes[(temp+"").substr(-1)-1])?suffix:"th";break;case"w":result[i]=jsDate.getDay();break;case"z":jsFirstDay=Date.UTC(jsDate.getFullYear(),0,0),jsThisDay=Date.UTC(jsDate.getFullYear(),jsDate.getMonth(),jsDate.getDate()),result[i]=Math.floor((jsThisDay-jsFirstDay)/864e5);break;case"W":var jsYearStart=new Date(jsDate.getFullYear(),0,1);jsFirstDay=jsYearStart.getDay()||7;var days=Math.floor((jsDate-jsYearStart)/864e5+1);result[i]=Math.ceil((days-(8-jsFirstDay))/7)+1;break;case"F":result[i]=this._months(jsDate.getMonth());break;case"m":var jsMonth=jsDate.getMonth()+1+"";result[i]=jsMonth.length>1?jsMonth:"0"+jsMonth;break;case"M":result[i]=this._months(jsDate.getMonth()).substring(0,3);break;case"n":result[i]=jsDate.getMonth()+1;break;case"t":result[i]=this._daysInMonth(jsDate.getMonth()+1,jsDate.getYear());break;case"L":var jsYear=jsDate.getFullYear();result[i]=jsYear%4?!1:jsYear%100?!0:jsYear%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":result[i]=jsDate.getFullYear();break;case"y":result[i]=(jsDate.getFullYear()+"").substring(2);break;case"a":result[i]=12>jsDate.getHours()?"am":"pm";break;case"A":result[i]=12>jsDate.getHours?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":jsHour=jsDate.getHours(),result[i]=12>=jsHour?jsHour:jsHour-12;break;case"G":result[i]=jsDate.getHours()+"";break;case"h":jsHour=jsDate.getHours()+"",jsHour=12>=jsHour?jsHour:jsHour-12,result[i]=jsHour.length>1?jsHour:"0"+jsHour;break;case"H":jsHour=jsDate.getHours()+"",result[i]=jsHour.length>1?jsHour:"0"+jsHour;break;case"i":var jsMinute=jsDate.getMinutes()+"";result[i]=jsMinute.length>1?jsMinute:"0"+jsMinute;break;case"s":var jsSecond=jsDate.getSeconds()+"";result[i]=jsSecond.length>1?jsSecond:"0"+jsSecond;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":jsFirstDay=new Date(jsDate.getFullYear(),0,1),result[i]=jsDate.getTimezoneOffset()!==jsFirstDay.getTimezoneOffset()?1:0;break;case"O":var jsMinZone=jsDate.getTimezoneOffset(),jsMinutes=jsMinZone%60;jsHour=-1*((jsMinZone-jsMinutes)/60)+"","-"!==jsHour.charAt(0)&&(jsHour="+"+jsHour),jsHour=3===jsHour.length?jsHour:jsHour.replace(/([+\-])(\d)/,"$10$2"),result[i]=jsHour+jsMinutes+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":result[i]=60*jsDate.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var jsDayName=this._wDays(jsDate.getDay()).substr(0,3),jsMonthName=this._months(jsDate.getMonth()).substr(0,3);result[i]=jsDayName+", "+jsDate.getDate()+" "+jsMonthName+this.get(" Y H:i:s O",jsDate);break;case"U":result[i]=Math.floor(jsDate.getTime()/1e3);break;default:result[i]=iFormat[i]}return result.join("")},set:function(format,str_date){if(void 0!==str_date){(format===void 0||""===format)&&(format="Y-m-d");for(var iFormat=format.split(""),result=Array(iFormat.length),escapeChar="\\",objIndex={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},matches=0,i=0;iFormat.length>i;i++)switch(iFormat[i]){case escapeChar:result[i]=iFormat[i+1],i++;break;case"d":result[i]="(\\d{2})",objIndex.day={original:i,match:matches++};break;case"j":result[i]="(\\d{1,2})",objIndex.day={original:i,match:matches++};break;case"D":result[i]="([\\wÃ¡]{3})",objIndex.dayW={original:i,match:matches++};break;case"l":result[i]="([\\wÃ¡]{5,7})",objIndex.dayW={original:i,match:matches++};break;case"N":result[i]="(\\d)",objIndex.dayW={original:i,match:matches++};break;case"w":result[i]="(\\d)",objIndex.dayW={original:i,match:matches++};break;case"S":result[i]="\\w{2}";break;case"z":result[i]="(\\d{1,3})",objIndex.dayY={original:i,match:matches++};break;case"W":result[i]="(\\d{1,2})",objIndex.week={original:i,match:matches++};break;case"F":result[i]="([\\wÃ§]{4,9})",objIndex.month={original:i,match:matches++};break;case"M":result[i]="(\\w{3})",objIndex.month={original:i,match:matches++};break;case"m":result[i]="(\\d{2})",objIndex.month={original:i,match:matches++};break;case"n":result[i]="(\\d{1,2})",objIndex.month={original:i,match:matches++};break;case"t":result[i]="\\d{2}";break;case"L":result[i]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":result[i]="(\\d{4})",objIndex.year={original:i,match:matches++};break;case"y":result[i]="(\\d{2})",(objIndex.year===void 0||"Y"!==iFormat[objIndex.year.original])&&(objIndex.year={original:i,match:matches++});break;case"a":result[i]="(am|pm)",objIndex.ampm={original:i,match:matches++};break;case"A":result[i]="(AM|PM)",objIndex.ampm={original:i,match:matches++};break;case"B":throw'"B" not implemented!';case"g":result[i]="(\\d{1,2})",objIndex.hourD={original:i,match:matches++};break;case"G":result[i]="(\\d{1,2})",objIndex.hour={original:i,match:matches++};break;case"h":result[i]="(\\d{2})",objIndex.hourD={original:i,match:matches++};break;case"H":result[i]="(\\d{2})",objIndex.hour={original:i,match:matches++};break;case"i":result[i]="(\\d{2})",objIndex.min={original:i,match:matches++};break;case"s":result[i]="(\\d{2})",objIndex.sec={original:i,match:matches++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":result[i]="\\d";break;case"O":result[i]="([-+]\\d{4})",objIndex.diffH={original:i,match:matches++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":result[i]="(\\-?\\d{1,5})",objIndex.diffM={original:i,match:matches++};break;case"c":throw'"c" not implemented!';case"r":result[i]="([\\wÃ¡]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",objIndex.date={original:i,match:matches++};break;case"U":result[i]="(\\d{1,13})",objIndex.date={original:i,match:matches++};break;default:result[i]=iFormat[i]}var pattr=RegExp(result.join(""));try{var mList=str_date.match(pattr);if(!mList)return}catch(e){return}var _haveDatetime=objIndex.date!==void 0,_haveYear=objIndex.year!==void 0,_haveYDay=objIndex.dayY!==void 0,_haveDay=objIndex.day!==void 0,_haveMonth=objIndex.month!==void 0,_haveMonthDay=_haveMonth&&_haveDay,_haveOnlyDay=!_haveMonth&&_haveDay,_haveWDay=objIndex.dayW!==void 0,_haveWeek=objIndex.week!==void 0,_haveWeekWDay=_haveWeek&&_haveWDay,_haveOnlyWDay=!_haveWeek&&_haveWDay,_validDate=_haveYDay||_haveMonthDay||!_haveYear&&_haveOnlyDay||_haveWeekWDay||!_haveYear&&_haveOnlyWDay,_noDate=!(_haveYear||_haveYDay||_haveDay||_haveMonth||_haveWDay||_haveWeek),_haveHour12=objIndex.hourD!==void 0&&objIndex.ampm!==void 0,_haveHour24=objIndex.hour!==void 0,_haveHour=_haveHour12||_haveHour24,_haveMin=objIndex.min!==void 0,_haveSec=objIndex.sec!==void 0,_haveMSec=objIndex.msec!==void 0,_haveMoreM=!_noDate||_haveHour,_haveMoreS=_haveMoreM||_haveMin,_haveDiffM=objIndex.diffM!==void 0,_haveDiffH=objIndex.diffH!==void 0;if(_haveDatetime){if("U"===iFormat[objIndex.date.original])return new Date(1e3*+mList[objIndex.date.match+1]);var dList=mList[objIndex.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/),hour=+dList[4]+ +dList[7].slice(0,3),min=+dList[5]+60*((dList[7].slice(0,1)+dList[7].slice(3))/100);return new Date(dList[3],this._iMonth(dList[2]),dList[1],hour,min,dList[6])}var year,month,day,date,hour,min,sec,msec,gmt,_d=new Date;if(_validDate||_noDate){if(_validDate){if(_haveYear){var _y=_d.getFullYear()-50+"";year=mList[objIndex.year.match+1],"y"==iFormat[objIndex.year.original]&&(year=+_y.slice(0,2)+(year>=_y.slice(2)?0:1)+year)}else year=_d.getFullYear();if(_haveYDay)month=0,day=mList[objIndex.dayY.match+1];else if(_haveDay)month=_haveMonth?this._iMonth(mList[objIndex.month.match+1]):_d.getMonth(),day=mList[objIndex.day.match+1];else{month=0;var week;week=_haveWeek?mList[objIndex.week.match+1]:this.get("W",_d),day=7*(week-2)+(8-(new Date(year,0,1).getDay()||7))+this._iWeek(mList[objIndex.week.match+1])}if(0==month&&day>31){var aux=new Date(year,month,day);month=aux.getMonth(),day=aux.getDate()}}else year=_d.getFullYear(),month=_d.getMonth(),day=_d.getDate();return date=year+"-"+(month+1)+"-"+day+" ",hour=_haveHour12?+mList[objIndex.hourD.match+1]+("pm"==mList[objIndex.ampm.match+1]?12:0):_haveHour24?mList[objIndex.hour.match+1]:_noDate?_d.getHours():"00",min=_haveMin?mList[objIndex.min.match+1]:_haveMoreM?"00":_d.getMinutes(),sec=_haveSec?mList[objIndex.sec.match+1]:_haveMoreS?"00":_d.getSeconds(),msec=_haveMSec?mList[objIndex.msec.match+1]:"000",gmt=_haveDiffH?mList[objIndex.diffH.match+1]:_haveDiffM?(100*(-1*mList[objIndex.diffM.match+1]/60)+"").replace(/^(\d)/,"+$1").replace(/(^[-+])(\d{3}$)/,"$10$2"):"+0000",new Date(date+hour+":"+min+":"+sec+"."+msec+gmt)}}}},function(window,undefined){"use strict";SAPO.namespace("Utility");var Event=SAPO.Dom.Event,Swipe=function(el,options){this._options=SAPO.extendObj({minDist:undefined,maxDist:undefined,minDuration:undefined,maxDuration:undefined,forceAxis:undefined,storeGesture:!1,stopEvents:!0},options||{}),this._handlers={down:this._onDown.bindObjEvent(this),move:this._onMove.bindObjEvent(this),up:this._onUp.bindObjEvent(this)},this._element=s$(el),this._init()};Swipe._supported="ontouchstart"in document.documentElement,Swipe.prototype={version:"0.1",_init:function(){var db=document.body;Event.observe(db,"touchstart",this._handlers.down),this._options.storeGesture&&Event.observe(db,"touchmove",this._handlers.move),Event.observe(db,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(el,parentEl){if(el){do{if(el===parentEl)return!0;el=el.parentNode}while(el);return!1}},_onDown:function(ev){1===event.changedTouches.length&&this._isMeOrParent(ev.target,this._element)&&(this._options.stopEvents===!0&&Event.stop(ev),ev=ev.changedTouches[0],this._isOn=!0,this._target=ev.target,this._t0=(new Date).valueOf(),this._p0=[ev.pageX,ev.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(ev){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&Event.stop(ev),ev=ev.changedTouches[0];var t1=(new Date).valueOf(),dt=.001*(t1-this._t0);this._gesture.push([ev.pageX,ev.pageY]),this._time.push(dt)}},_onUp:function(ev){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&Event.stop(ev),ev=ev.changedTouches[0],this._isOn=!1;var t1=(new Date).valueOf(),p1=[ev.pageX,ev.pageY],dt=.001*(t1-this._t0),dr=[p1[0]-this._p0[0],p1[1]-this._p0[1]],dist=Math.sqrt(dr[0]*dr[0]+dr[1]*dr[1]),axis=Math.abs(dr[0])>Math.abs(dr[1])?"x":"y",o=this._options;if(!(o.minDist&&o.minDist>dist||o.maxDist&&dist>o.maxDist||o.minDuration&&o.minDuration>dt||o.maxDuration&&dt>o.maxDuration||o.forceAxis&&axis!==o.forceAxis)){var O={elementId:this._element.id,duration:dt,dr:dr,dist:dist,axis:axis,target:this._target};this._options.storeGesture&&(O.gesture=this._gesture,O.time=this._time),this._options.callback(this,O)}}}},SAPO.Utility.Swipe=Swipe}(window),SAPO.namespace("Utility"),SAPO.Utility.Url={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){var url=!1;return url=location.href},genQueryString:function(uri,params){var sep,pKey,pValue,hasQuestionMark=-1!==uri.indexOf("?"),parts=[uri];for(pKey in params)params.hasOwnProperty(pKey)&&(hasQuestionMark?sep="&":(sep="?",hasQuestionMark=!0),pValue=params[pKey],"number"==typeof pValue||pValue||(pValue=""),parts=parts.concat([sep,encodeURIComponent(pKey),"=",encodeURIComponent(pValue)]));return parts.join("")},getQueryString:function(string){var url;url=string&&string!==void 0?string:this.getUrl();var aParams={};if(url.match(/\?(.+)/i)){var queryStr=url.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(queryStr.length>0)for(var aQueryStr=queryStr.split(/[;&]/),i=0;aQueryStr.length>i;i++){var pairVar=aQueryStr[i].split("=");aParams[decodeURIComponent(pairVar[0])]=pairVar[1]!==void 0&&pairVar[1]?decodeURIComponent(pairVar[1]):!1}}return aParams},getAnchor:function(string){var url;url=string&&string!==void 0?string:this.getUrl();var anchor=!1;return url.match(/#(.+)/)&&(anchor=url.replace(/([^#]+)#(.*)/,"$2")),anchor},getAnchorString:function(string){var url;url=string&&string!==void 0?string:this.getUrl();var aParams={};if(url.match(/#(.+)/i)){var anchorStr=url.replace(/^([^#]+)#(.*)?/g,"$2");if(anchorStr.length>0)for(var aAnchorStr=anchorStr.split(/[;&]/),i=0;aAnchorStr.length>i;i++){var pairVar=aAnchorStr[i].split("=");aParams[decodeURIComponent(pairVar[0])]=pairVar[1]!==void 0&&pairVar[1]?decodeURIComponent(pairVar[1]):!1}}return aParams},parseUrl:function(url){var aURL={};if(url&&url!==void 0&&"string"==typeof url){if(url.match(/^([^:]+):\/\//i)){var re=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;url.match(re)&&(aURL.scheme=url.replace(re,"$1"),aURL.host=url.replace(re,"$2"),aURL.path="/"+url.replace(re,"$3"),aURL.query=url.replace(re,"$4")||!1,aURL.fragment=url.replace(re,"$5")||!1)}else{var re1=RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),re2=RegExp("^([^\\?]+)\\?([^#]+)#?","i"),re3=RegExp("^([^\\?]+)\\??","i");url.match(re1)?(aURL.scheme=!1,aURL.host=!1,aURL.path=url.replace(re1,"$1"),aURL.query=url.replace(re1,"$2"),aURL.fragment=url.replace(re1,"$3")):url.match(re2)?(aURL.scheme=!1,aURL.host=!1,aURL.path=url.replace(re2,"$1"),aURL.query=url.replace(re2,"$2"),aURL.fragment=!1):url.match(re3)&&(aURL.scheme=!1,aURL.host=!1,aURL.path=url.replace(re3,"$1"),aURL.query=!1,aURL.fragment=!1)}if(aURL.host){var regPort=RegExp("^(.*)\\:(\\d+)$","i");if(aURL.host.match(regPort)){var tmpHost1=aURL.host;aURL.host=tmpHost1.replace(regPort,"$1"),aURL.port=tmpHost1.replace(regPort,"$2")}else aURL.port=!1;if(aURL.host.match(/@/i)){var tmpHost2=aURL.host;aURL.host=tmpHost2.split("@")[1];var tmpUserPass=tmpHost2.split("@")[0];tmpUserPass.match(/\:/)?(aURL.user=tmpUserPass.split(":")[0],aURL.pass=tmpUserPass.split(":")[1]):(aURL.user=tmpUserPass,aURL.pass=!1)}}}return aURL},currentScriptElement:function(match){var aScripts=document.getElementsByTagName("script");if(match===void 0)return aScripts.length>0?aScripts[aScripts.length-1]:!1;for(var curScript=!1,re=RegExp(""+match,"i"),i=0,total=aScripts.length;total>i;i++)if(curScript=aScripts[i],re.test(curScript.src))return curScript;return!1},base64Encode:function(string){if(!SAPO.Utility.String||SAPO.Utility.String===void 0)throw"SAPO.Utility.Url.base64Encode depends of SAPO.Utility.String, which has not been referred.";for(var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0,input=SAPO.Utility.String.utf8Encode(string);input.length>i;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},base64Decode:function(string){if(!SAPO.Utility.String||SAPO.Utility.String===void 0)throw"SAPO.Utility.Url.base64Decode depends of SAPO.Utility.String, which has not been referred.";for(var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0,input=string.replace(/[^A-Za-z0-9\+\/\=]/g,"");input.length>i;)enc1=this._keyStr.indexOf(input.charAt(i++)),enc2=this._keyStr.indexOf(input.charAt(i++)),enc3=this._keyStr.indexOf(input.charAt(i++)),enc4=this._keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!==enc3&&(output+=String.fromCharCode(chr2)),64!==enc4&&(output+=String.fromCharCode(chr3));return output=SAPO.Utility.String.utf8Decode(output)}},SAPO.namespace("Utility"),SAPO.Utility.Validator={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de sÃ´r",243:"santarÃ©m",244:"leiria",245:"portalegre",249:"torres novas",251:"valenÃ§a",252:"vila nova de famalicÃ£o",253:"braga",254:"peso da rÃ©gua",255:"penafiel",256:"sÃ£o joÃ£o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da raÃ­nha",263:"vila franca de xira",265:"setÃºbal",266:"Ã©vora",268:"estremoz",269:"santiago do cacÃ©m",271:"guarda",272:"castelo branco",273:"braganÃ§a",274:"proenÃ§a-a-nova",275:"covilhÃ£",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portimÃ£o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do heroÃ­smo, graciosa, sÃ£o jorge, terceira",296:"ponta delgada, sÃ£o miguel, santa maria",91:"rede mÃ³vel 91 (Vodafone / Yorn)",93:"rede mÃ³vel 93 (Optimus)",96:"rede mÃ³vel 96 (TMN)",92:"rede mÃ³vel 92 (TODOS)",707:"nÃºmero Ãºnico",760:"nÃºmero Ãºnico",800:"nÃºmero grÃ¡tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"mÃ³vel 91",95:"mÃ³vel 95",97:"mÃ³vel 97",98:"mÃ³vel 98",99:"mÃ³vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"mÃ³vel 91",92:"mÃ³vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"mÃ³vel 82",84:"mÃ³vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"mÃ³vel 7"},_isLeapYear:function(year){var yearRegExp=/^\d{4}$/;return yearRegExp.test(year)?year%4?!1:year%100?!0:year%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(_m,_y){var nDays=0;return nDays=1===_m||3===_m||5===_m||7===_m||8===_m||10===_m||12===_m?31:4===_m||6===_m||9===_m||11===_m?30:0===_y%400||0===_y%4&&0!==_y%100?29:28},_isValidDate:function(year,month,day){var yearRegExp=/^\d{4}$/,validOneOrTwo=/^\d{1,2}$/;return yearRegExp.test(year)&&validOneOrTwo.test(month)&&validOneOrTwo.test(day)&&month>=1&&12>=month&&day>=1&&this._daysInMonth(month,year)>=day?!0:!1},mail:function(email){var emailValido=RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return emailValido.test(email)?!0:!1},url:function(url,full){if(full===void 0||full===!1){var reHTTP=RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");reHTTP.test(url)===!1&&(url="http://"+url)}var reUrl=RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return reUrl.test(url)===!1?!1:!0},isPTPhone:function(phone){phone=""+phone;var aInd=[];for(var i in this._indicativosPT)"string"==typeof this._indicativosPT[i]&&aInd.push(i);var strInd=aInd.join("|"),re351=/^(00351|\+351)/;re351.test(phone)&&(phone=phone.replace(re351,""));var reSpecialChars=/(\s|\-|\.)+/g;phone=phone.replace(reSpecialChars,"");var reInt=/[\d]{9}/i;if(9===phone.length&&reInt.test(phone)){var reValid=RegExp("^("+strInd+")");if(reValid.test(phone))return!0}return!1},isPortuguesePhone:function(phone){return this.isPTPhone(phone)},isCVPhone:function(phone){phone=""+phone;var aInd=[];for(var i in this._indicativosCV)"string"==typeof this._indicativosCV[i]&&aInd.push(i);var strInd=aInd.join("|"),re238=/^(00238|\+238)/;re238.test(phone)&&(phone=phone.replace(re238,""));var reSpecialChars=/(\s|\-|\.)+/g;phone=phone.replace(reSpecialChars,"");var reInt=/[\d]{7}/i;if(7===phone.length&&reInt.test(phone)){var reValid=RegExp("^("+strInd+")");if(reValid.test(phone))return!0}return!1},isAOPhone:function(phone){phone=""+phone;var aInd=[];for(var i in this._indicativosAO)"string"==typeof this._indicativosAO[i]&&aInd.push(i);var strInd=aInd.join("|"),re244=/^(00244|\+244)/;re244.test(phone)&&(phone=phone.replace(re244,""));var reSpecialChars=/(\s|\-|\.)+/g;phone=phone.replace(reSpecialChars,"");var reInt=/[\d]{9}/i;if(9===phone.length&&reInt.test(phone)){var reValid=RegExp("^("+strInd+")");if(reValid.test(phone))return!0}return!1},isMZPhone:function(phone){phone=""+phone;var aInd=[];for(var i in this._indicativosMZ)"string"==typeof this._indicativosMZ[i]&&aInd.push(i);var strInd=aInd.join("|"),re258=/^(00258|\+258)/;re258.test(phone)&&(phone=phone.replace(re258,""));var reSpecialChars=/(\s|\-|\.)+/g;phone=phone.replace(reSpecialChars,"");var reInt=/[\d]{8,9}/i;if((9===phone.length||8===phone.length)&&reInt.test(phone)){var reValid=RegExp("^("+strInd+")");if(reValid.test(phone)){if(0===phone.indexOf("2")&&8===phone.length)return!0;if(0===phone.indexOf("8")&&9===phone.length)return!0}}return!1},isTLPhone:function(phone){phone=""+phone;var aInd=[];for(var i in this._indicativosTL)"string"==typeof this._indicativosTL[i]&&aInd.push(i);var strInd=aInd.join("|"),re670=/^(00670|\+670)/;re670.test(phone)&&(phone=phone.replace(re670,""));var reSpecialChars=/(\s|\-|\.)+/g;phone=phone.replace(reSpecialChars,"");var reInt=/[\d]{7}/i;if(7===phone.length&&reInt.test(phone)){var reValid=RegExp("^("+strInd+")");if(reValid.test(phone))return!0}return!1},isPhone:function(){var index;if(0===arguments.length)return!1;var phone=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](phone);throw"Invalid Country Code!"}var func;for(index=0;arguments[1].length>index;index++){if("function"!=typeof(func=this["is"+arguments[1][index].toUpperCase()+"Phone"]))throw"Invalid Country Code!";
if(func(phone))return!0}}else for(index=0;this._countryCodes.length>index;index++)if(this["is"+this._countryCodes[index]+"Phone"](phone))return!0;return!1},codPostal:function(cp1,cp2,returnBothResults){var cPostalSep=/^(\s*\-\s*|\s+)$/,trim=/^\s+|\s+$/g,cPostal4=/^[1-9]\d{3}$/,cPostal3=/^\d{3}$/,parserCPostal=/^(.{4})(.*)(.{3})$/;if(returnBothResults=!!returnBothResults,cp1=cp1.replace(trim,""),cp2!==void 0){if(cp2=cp2.replace(trim,""),cPostal4.test(cp1)&&cPostal3.test(cp2))return returnBothResults===!0?[!0,!0]:!0}else{if(cPostal4.test(cp1))return returnBothResults===!0?[!0,!1]:!0;var cPostal=cp1.match(parserCPostal);if(null!==cPostal&&cPostal4.test(cPostal[1])&&cPostalSep.test(cPostal[2])&&cPostal3.test(cPostal[3]))return returnBothResults===!0?[!0,!1]:!0}return returnBothResults===!0?[!1,!1]:!1},isDate:function(format,dateStr){if(this._dateParsers[format]===void 0)return!1;var yearIndex=this._dateParsers[format].year,monthIndex=this._dateParsers[format].month,dayIndex=this._dateParsers[format].day,dateParser=this._dateParsers[format].parser,separator=this._dateParsers[format].sep,data=dateStr.match(dateParser);if(null!==data&&data[2]===data[4]&&data[2]===separator){var _y=2===data[yearIndex].length?"20"+(""+data[yearIndex]):data[yearIndex];if(this._isValidDate(_y,""+data[monthIndex],""+data[dayIndex]))return!0}return!1},isColor:function(str){var match,valid=!1,keyword=/^[a-zA-Z]+$/,hexa=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,rgb=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,rgba=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,hsl=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,hsla=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(keyword.test(str)||hexa.test(str))return!0;var i;if(null!==(match=rgb.exec(str))||null!==(match=rgba.exec(str)))for(i=match.length;i--;){if((2===i||4===i||6===i)&&match[i]!==void 0&&""!==match[i]){if(!(match[i-1]!==void 0&&match[i-1]>=0&&100>=match[i-1]))return!1;valid=!0}if(1===i||3===i||5===i&&(match[i+1]===void 0||""===match[i+1])){if(!(match[i]!==void 0&&match[i]>=0&&255>=match[i]))return!1;valid=!0}}if(null!==(match=hsl.exec(str))||null!==(match=hsla.exec(str)))for(i=match.length;i--;){if(3===i||5===i){if(!(match[i-1]!==void 0&&match[i]!==void 0&&""!==match[i]&&match[i-1]>=0&&100>=match[i-1]))return!1;valid=!0}if(1===i){if(!(match[i]!==void 0&&match[i]>=0&&360>=match[i]))return!1;valid=!0}}return valid}},SAPO.namespace("Communication"),SAPO.Communication.Ajax=function(url,options){this.init(url,options)},SAPO.Communication.Ajax.version=2.1,SAPO.Communication.Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;SAPO.Communication.Ajax.prototype={version:SAPO.Communication.Ajax.version,init:function(url,userOptions){if(!url)throw Error("WRONG_ARGUMENTS_ERR");var options=SAPO.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},SAPO.Communication.Ajax.globalOptions);if(userOptions&&"object"==typeof userOptions){if(options=SAPO.extendObj(options,userOptions),"object"==typeof userOptions.parameters)options.parameters=SAPO.extendObj(SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.parameters),userOptions.parameters);else if(null!=userOptions.parameters){var globalParameters=this.paramsObjToStr(SAPO.Communication.Ajax.globalOptions.parameters);globalParameters&&(options.parameters=userOptions.parameters+"&"+globalParameters)}options.requestHeaders=SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.requestHeaders),options.requestHeaders=SAPO.extendObj(options.requestHeaders,userOptions.requestHeaders)}this.options=options,this.safeCall("onInit");var urlLocation=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");urlLocation.href=url,this.url=url,this.isHTTP=urlLocation.protocol.match(/^https?:$/i)&&!0,this.requestHasBody=0>options.method.search(/^get|head$/i),this.isCrossDomain=this.isHTTP&&"widget:"!=location.protocol&&"object"!=typeof window.widget?location.protocol!=urlLocation.protocol||location.host!=urlLocation.host.split(":")[0]:!1,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var headers={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-SAPO-Version":"0.1"};if(this.options.cors&&(this.options.signRequest||delete headers["X-Requested-With"],delete headers["X-SAPO-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var headerReqName in this.options.requestHeaders)headers[headerReqName]=this.options.requestHeaders[headerReqName];this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(headers.Connection="close");for(var headerName in headers)headers.hasOwnProperty(headerName)&&this.transport.setRequestHeader(headerName,headers[headerName])}catch(e){}},paramsObjToStr:function(optParams){var k,m,p,a,params=[];if("object"!=typeof optParams)return optParams;for(p in optParams)if(optParams.hasOwnProperty(p))if(a=optParams[p],"[object Array]"!==Object.prototype.toString.call(a)||isNaN(a.length))params=params.concat([encodeURIComponent(p),"=",encodeURIComponent(a),"&"]);else for(k=0,m=a.length;m>k;k++)params=params.concat([encodeURIComponent(p),"=",encodeURIComponent(a[k]),"&"]);return params.length>0&&params.pop(),params.join("")},setParams:function(){var params=null,optParams=this.options.parameters;params="object"==typeof optParams?this.paramsObjToStr(optParams):""+optParams,params&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+params:this.url.split("#")[0]+"?"+params)},getHeader:function(name){if(this.usingXDomainReq&&"Content-Type"===name)return this.transport.contentType;try{return this.transport.getResponseHeader(name)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(e){return null}},getResponse:function(){var t=this.transport,r={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};r.readyState=t.readyState;try{r.responseText=t.responseText}catch(e){}try{r.responseXML=t.responseXML}catch(e){}try{r.status=t.status}catch(e){r.status=0}try{r.statusText=t.statusText}catch(e){r.statusText=""}return r},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(ex){}this.finish()}},runStateChange:function(){var rs=this.transport.readyState;if(3===rs)this.isHTTP&&this.safeCall("onHeaders");else if(4===rs||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return this.delayTimeout=setTimeout(this.runStateChange.bindObj(this),this.options.delay+this.startTime-(new Date).getTime()),void 0;var responseJSON,responseContent=this.transport.responseText,response=this.getResponse(),curStatus=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===curStatus?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):curStatus=responseContent?200:404:304===curStatus&&(curStatus=200);var isSuccess=this.usingXDomainReq||curStatus>=200&&300>curStatus,headerContentType=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(headerContentType.indexOf("application/json")>=0||"force"===this.options.evalJS))try{responseJSON=this.evalJSON(responseContent,this.sanitizeJSON),responseJSON&&(responseContent=response.responseJSON=responseJSON)}catch(e){isSuccess&&this.safeCall("onException",e)}if(this.usingXDomainReq&&-1!==headerContentType.indexOf("xml")&&"DOMParser"in window){var mimeType;switch(headerContentType){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":mimeType=headerContentType;break;default:mimeType="text/xml"}var xmlDoc=(new DOMParser).parseFromString(this.transport.responseText,mimeType);this.transport.responseXML=xmlDoc,response.responseXML=xmlDoc}null!=this.transport.responseXML&&null==response.responseJSON&&""!==this.transport.responseXML.xml&&(responseContent=this.transport.responseXML),(curStatus||this.usingXDomainReq)&&(isSuccess?this.safeCall("onSuccess",response,responseContent):this.safeCall("onFailure",response,responseContent),this.safeCall("on"+curStatus,response,responseContent)),this.finish(response,responseContent)}},finish:function(response,responseContent){if(response&&this.safeCall("onComplete",response,responseContent),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(e){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(listener,first,second){function rethrow(exception){setTimeout(function(){throw exception.message&&(exception.message+="\n"+(exception.stacktrace||exception.stack||"")),exception},1)}"function"==typeof this.options[listener]?SAPO.safeCall(this,this.options[listener],first,second):first&&window.Error&&first instanceof Error&&rethrow(first)},setRequestHeader:function(name,value){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[name]=value},request:function(){if(this.transport){var params=null;this.requestHasBody?(null!=this.options.postBody&&""!==this.options.postBody?(params=this.options.postBody,this.setParams()):null!=this.options.parameters&&""!==this.options.parameters&&(params=this.options.parameters),"object"!=typeof params||params.nodeType?"object"!=typeof params&&null!=params&&(params=""+params):params=this.paramsObjToStr(params),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var url=this.url,method=this.options.method,crossDomain=this.isCrossDomain;crossDomain&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",url),url=this.options.xhrProxy+encodeURIComponent(url),crossDomain=!1);try{this.transport.open(method,url,this.options.asynchronous)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())}.bindObj(this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=this.runStateChange.bindObj(this):this.usingXDomainReq&&(this.transport.onload=this.runStateChange.bindObj(this));try{if(crossDomain)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(params)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(code,message){if("function"!=typeof Error)return{code:code,message:message};var e=Error(message);return e.code=code,e},isJSON:function(str){return"string"==typeof str&&str?(str=str.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(str)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&JSON.parse!==void 0?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw Error("ERROR: Bad JSON string...")}return null}},SAPO.Communication.Ajax.load=function(url,callback){return new SAPO.Communication.Ajax(url,{method:"GET",onSuccess:function(response){callback(response.responseText,response)}})},SAPO.Communication.Ajax.ping=function(url,callback){return new SAPO.Communication.Ajax(url,{method:"HEAD",onSuccess:function(response){"function"==typeof callback&&callback(response)}})},function(undefined){"use strict";SAPO.namespace("Ink");var instances={},lastIdNum=0,Ajax=SAPO.Communication.Ajax,Css=SAPO.Dom.Css,Selector=SAPO.Dom.Selector,Url=SAPO.Utility.Url;SAPO.Ink.Aux={Layouts:{SMALL:"s",MEDIUM:"m",LARGE:"l"},isDOMElement:function(o){return"object"==typeof o&&"nodeType"in o&&1===o.nodeType},isInteger:function(n){return"number"==typeof n&&0===n%1},elOrSelector:function(elOrSelector,fieldName){if(!this.isDOMElement(elOrSelector)){var t=Selector.select(elOrSelector);if(0===t.length)throw new TypeError(fieldName+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return t[0]}return elOrSelector},clone:function(o){try{if("object"!=typeof o)throw Error("Given argument is not an object!");return JSON.parse(JSON.stringify(o))}catch(ex){throw Error("Given object cannot have loops!")}},childIndex:function(childEl){for(var els=Selector.select("> *",childEl.parentNode),i=0,f=els.length;f>i;++i)if(els[i]===childEl)return i;throw"not found!"},ajaxJSON:function(endpoint,params,cb){new Ajax(endpoint,{evalJS:"force",method:"POST",parameters:params,onSuccess:function(r){try{if(r=r.responseJSON,"ok"!==r.status)throw"server error: "+r.message;cb(null,r)}catch(ex){cb(ex)}},onFailure:function(){cb("communication failure")}})},currentLayout:function(){var i,f,k,v,el,detectorEl=Selector.select("#ink-layout-detector")[0];if(!detectorEl){detectorEl=document.createElement("div"),detectorEl.id="ink-layout-detector";for(k in this.Layouts)this.Layouts.hasOwnProperty(k)&&(v=this.Layouts[k],el=document.createElement("div"),el.className="ink-for-"+v,el.setAttribute("data-ink-layout",v),detectorEl.appendChild(el));document.body.appendChild(detectorEl)}for(i=0,f=detectorEl.childNodes.length;f>i;++i)if(el=detectorEl.childNodes[i],"hidden"!==Css.getStyle(el,"visibility"))return el.getAttribute("data-ink-layout")},hashSet:function(o){if("object"!=typeof o)throw new TypeError("o should be an object!");var hashParams=Url.getAnchorString();hashParams=SAPO.extendObj(hashParams,o),window.location.hash=Url.genQueryString("",hashParams).substring(1)},cleanChildren:function(parentEl){for(var prevEl,el=parentEl.lastChild;el;)prevEl=el.previousSibling,parentEl.removeChild(el),el=prevEl},storeIdAndClasses:function(fromEl,inObj){var id=fromEl.id;id&&(inObj._id=id);var classes=fromEl.className;classes&&(inObj._classes=classes)},restoreIdAndClasses:function(toEl,inObj){inObj._id&&toEl.id!==inObj._id&&(toEl.id=inObj._id),inObj._classes&&-1===toEl.className.indexOf(inObj._classes)&&(toEl.className?toEl.className+=" "+inObj._classes:toEl.className=inObj._classes),inObj._instanceId&&!toEl.getAttribute("data-instance")&&toEl.setAttribute("data-instance",inObj._instanceId)},registerInstance:function(inst,el,optionalPrefix){if(!inst._instanceId){if("object"!=typeof inst)throw new TypeError("1st argument must be a JavaScript object!");if(!inst._options||!inst._options.skipRegister){if(!this.isDOMElement(el))throw new TypeError("2nd argument must be a DOM element!");if(optionalPrefix!==undefined&&"string"!=typeof optionalPrefix)throw new TypeError("3rd argument must be a string!");var id=(optionalPrefix||"instance")+ ++lastIdNum;instances[id]=inst,inst._instanceId=id;var dataInst=el.getAttribute("data-instance");dataInst=null!==dataInst?[dataInst,id].join(" "):id,el.setAttribute("data-instance",dataInst)}}},unregisterInstance:function(id){delete instances[id]},getInstanceFromSelector:function(selector){var el=Selector.select(selector)[0];if(!el)throw Error("Element not found!");return this.getInstance(el)},getInstance:function(instanceIdOrElement){var ids;if(this.isDOMElement(instanceIdOrElement)){if(ids=instanceIdOrElement.getAttribute("data-instance"),null===ids)throw Error("argument is not a DOM instance element!")}else ids=instanceIdOrElement;ids=ids.split(" ");var inst,id,i,l=ids.length,res=[];for(i=0;l>i;++i){if(id=ids[i],!id)throw Error("Element is not a JS instance!");if(inst=instances[id],!inst)throw Error('Instance "'+id+'" not found!');res.push(inst)}return 1===l?res[0]:res},getInstanceIds:function(){var res=[];for(var id in instances)instances.hasOwnProperty(id)&&res.push(id);return res},getInstances:function(){var res=[];for(var id in instances)instances.hasOwnProperty(id)&&res.push(instances[id]);return res},destroyComponent:function(){SAPO.Ink.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}},SAPO.Dom.Loaded.run(function(){SAPO.Ink.Close();var collapsibles=Selector.select(".ink-collapsible");collapsibles.forEach(function(collapsible){new SAPO.Ink.Collapsible(collapsible)});var dockables=Selector.select(".ink-dockable");dockables.forEach(function(dockable){new SAPO.Ink.Dockable(dockable)})})}(),function(undefined){SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Element=SAPO.Dom.Element,Event=SAPO.Dom.Event;SAPO.Ink.DatePicker=function(selector,options){if(this._options=SAPO.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,validDayFn:undefined,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Fechar",cleanText:"Limpar",prevLinkText:"Â«",nextLinkText:"Â»",ofText:"&nbsp;de&nbsp;",month:{1:"Janeiro",2:"Fevereiro",3:"Mar&ccedil;o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},wDay:{0:"Domingo",1:"Segunda",2:"Ter&ccedil;a",3:"Quarta",4:"Quinta",5:"Sexta",6:"S&aacute;bado"}},options||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,selector&&(this._dataField=Aux.elOrSelector(selector,"1st argument")),this._picker=null,this._options.pickerField&&(this._picker=Aux.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)){var parsed=this._options.startDate.split("-");this._year=parsed[0],this._month=parsed[1]-1,this._day=parsed[2]}this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._init(),this._render(),this._options.startDate&&this.setDate(),Aux.registerInstance(this,this._containerObject,"datePicker")},SAPO.Ink.DatePicker.prototype={version:"0.1",_init:function(){},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var dom=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var clean=document.createElement("a");clean.className="clean",clean.innerHTML=this._options.cleanText,this._superTopBar.appendChild(clean)}if(this._options.showClose){var close=document.createElement("a");close.className="close",close.innerHTML=this._options.closeText,this._superTopBar.appendChild(close)}this._containerObject.appendChild(this._superTopBar)}var calendarTop=document.createElement("div");calendarTop.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",calendarTop.appendChild(this._monthPrev),calendarTop.appendChild(this._monthDescContainer),calendarTop.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(calendarTop),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";for(var ulSelector,liMonth,i=1;12>=i;i++)0===(i-1)%4&&(ulSelector=document.createElement("ul")),liMonth=document.createElement("li"),liMonth.innerHTML='<a href="#" class="sapo_calmonth_'+(2===(i+"").length?i:"0"+i)+'">'+this._options.month[i].substring(0,3)+"</a>",ulSelector.appendChild(liMonth),0===i%4&&this._monthSelector.appendChild(ulSelector);if(this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=Aux.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=Element.elementTop(this._dataField),this._picker.style.left=Element.elementLeft(this._dataField)+(Element.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=Aux.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=Aux.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=Aux.elOrSelector(this._options.yearField,"yearField")}dom.insertBefore(this._containerObject,dom.childNodes[0]),this._picker?Event.observe(this._picker,"click",function(e){Event.stop(e),this._containerObject=Element.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"}.bindObjEvent(this)):Event.observe(this._dataField,"focus",function(){this._containerObject=Element.clonePosition(this._containerObject,this._dataField),"bottom"==this._options.position?this._containerObject.style.top=Element.elementHeight(this._dataField)+Element.offsetTop(this._dataField)+"px":this._containerObject.style.left=Element.elementWidth(this._dataField)+Element.offsetLeft(this._dataField)+"px",dom.appendChild(this._containerObject),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"}.bindObjEvent(this)),this._options.displayInSelect?(Event.observe(this._options.dayField,"change",function(){var yearSelected=this._options.yearField[this._options.yearField.selectedIndex].value;""!==yearSelected&&0!==yearSelected&&(this._updateDate(),this._showDefaultView())}.bindObjEvent(this)),Event.observe(this._options.monthField,"change",function(){var yearSelected=this._options.yearField[this._options.yearField.selectedIndex].value;""!==yearSelected&&0!==yearSelected&&(this._updateDate(),this._showDefaultView())}.bindObjEvent(this)),Event.observe(this._options.yearField,"change",function(){this._updateDate(),this._showDefaultView()}.bindObjEvent(this))):(Event.observe(this._dataField,"change",function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")}.bindObjEvent(this)),Event.observe(this._dataField,"blur",function(){this._hoverPicker||(this._containerObject.style.display="none")}.bindObjEvent(this))),Event.observe(document,"click",function(e){e.target===undefined&&(e.target=e.srcElement),Element.descendantOf(this._containerObject,e.target)||e.target===this._dataField||(this._picker?e.target===this._picker||this._options.displayInSelect&&(e.target===this._options.dayField||e.target===this._options.monthField||e.target===this._options.yearField)||this._options.dayField&&(Element.descendantOf(this._options.dayField,e.target)||Element.descendantOf(this._options.monthField,e.target)||Element.descendantOf(this._options.yearField,e.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")}.bindObjEvent(this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),Event.observe(this._containerObject,"mouseover",function(e){Event.stop(e),this._hoverPicker=!0}.bindObjEvent(this)),Event.observe(this._containerObject,"mouseout",function(e){Event.stop(e),this._hoverPicker=!1}.bindObjEvent(this)),Event.observe(this._containerObject,"click",function(e){e.target===undefined&&(e.target=e.srcElement);var className=e.target.className,isInactive=-1!==className.indexOf("sapo_cal_off");if(Event.stop(e),0!==className.indexOf("sapo_cal_")||isInactive)if(0!==className.indexOf("sapo_calmonth_")||isInactive)if(0!==className.indexOf("sapo_calyear_")||isInactive)0!==className.indexOf("change_month_")||isInactive?0!==className.indexOf("change_year_")||isInactive?"clean"===className?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===className&&(this._containerObject.style.display="none"):"change_year_next"===className?this._showYearSelector(1):"change_year_prev"===className&&this._showYearSelector(-1):"change_month_next"===className?this._updateCal(1):"change_month_prev"===className&&this._updateCal(-1);else{var year=className.substr(13,4);Number(year)&&(this._year=year,this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else{var month=className.substr(14,2);Number(month)&&(this._month=month-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year==this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year==this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(),this._monthContainer.style.display="block")}else{var day=className.substr(9,2);Number(day)?(this.setDate(this._year+"-"+(this._month+1)+"-"+day),this._containerObject.style.display="none"):"sapo_cal_link_month"===className?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===className&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")}this._updateDescription()}.bindObjEvent(this))},_setMinMax:function(dateRange){if(dateRange){var dates=dateRange.split(":"),pattern=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(dates[0])if("NOW"==dates[0])this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate();else if(pattern.test(dates[0])){var auxDate=dates[0].split("-");this._yearMin=Math.floor(auxDate[0]),this._monthMin=Math.floor(auxDate[1])||1,this._dayMin=Math.floor(auxDate[2])||1,this._monthMin>1&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),this._monthMin>1&&this._monthMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1;if(dates[1])if("NOW"==dates[1])this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(pattern.test(dates[1])){var auxDate=dates[1].split("-");this._yearMax=Math.floor(auxDate[0]),this._monthMax=Math.floor(auxDate[1])||12,this._dayMax=Math.floor(auxDate[2])||this._daysInMonth(this._yearMax,this._monthMax),this._monthMax>1&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var MDay=this._daysInMonth(this._yearMax,this._monthMax);this._monthMax>1&&this._monthMax>MDay&&(this._dayMax=MDay)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31;this._yearMax>=this._yearMin&&this._monthMax>=this._monthMin&&this._dayMax>=this._dayMin||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31},_checkDateRange:function(year,month,day){return this._isValidDate(year,month+1,day)||(year=this._today.getFullYear(),month=this._today.getMonth(),day=this._today.getDate()),year>this._yearMax?(year=this._yearMax,month=this._monthMax-1,day=this._dayMax):this._yearMin>year&&(year=this._yearMin,month=this._monthMin-1,day=this._dayMin),year==this._yearMax&&month+1>this._monthMax?(month=this._monthMax-1,day=this._dayMax):year==this._yearMin&&this._monthMin>month+1&&(month=this._monthMin-1,day=this._dayMin),year==this._yearMax&&month+1==this._monthMax&&day>this._dayMax?day=this._dayMax:year==this._yearMin&&month+1==this._monthMin&&this._dayMin>day?day=this._dayMin:day>this._daysInMonth(year,month+1)&&(day=this._daysInMonth(year,month+1)),[year,month,day]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year==this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year==this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var dataParsed;this._options.displayInSelect?(dataParsed=[],this._isValidDate(dataParsed[0]=this._options.yearField[this._options.yearField.selectedIndex].value,dataParsed[1]=this._options.monthField[this._options.monthField.selectedIndex].value,dataParsed[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(dataParsed=this._checkDateRange(dataParsed[0],dataParsed[1]-1,dataParsed[2]),this._year=dataParsed[0],this._month=dataParsed[1],this._day=dataParsed[2]):(dataParsed=this._checkDateRange(dataParsed[0],dataParsed[1]-1,1),this._isValidDate(dataParsed[0],dataParsed[1]+1,dataParsed[2])&&(this._year=dataParsed[0],this._month=dataParsed[1],this._day=this._daysInMonth(dataParsed[0],dataParsed[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(dataParsed=this._getDataArrayParsed(this._dataField.value),dataParsed=this._checkDateRange(dataParsed[0],dataParsed[1]-1,dataParsed[2]),this._year=dataParsed[0],this._month=dataParsed[1],this._day=dataParsed[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()
},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var year=+this._year+10*arguments[0];if(year-=year%10,year>this._yearMax||this._yearMin>year+9)return;this._year=+this._year+10*arguments[0]}for(var str="<li>",ano_base=this._year-this._year%10,i=0;11>=i;i++)0===i%4&&(str+="<ul>"),str+=i&&11!==i?this._yearMax>=ano_base+i-1&&ano_base+i-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+(ano_base+i-1)+(ano_base+i-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(ano_base+i-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(ano_base+i-1)+"</a></li>":i&&this._yearMax>=ano_base+i-1&&ano_base+i-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":this._yearMax>=ano_base+i-1&&ano_base+i-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(i+1)%4&&(str+="</ul>");str+="</li>",this._yearSelector.innerHTML=str},_getDataArrayParsed:function(dateStr){var arrData=[],data=SAPO.Utility.Date.set(this._options.format,dateStr);return data&&(arrData=[data.getFullYear(),data.getMonth()+1,data.getDate()]),arrData},_isValidDate:function(year,month,day){var yearRegExp=/^\d{4}$/,validOneOrTwo=/^\d{1,2}$/;return yearRegExp.test(year)&&validOneOrTwo.test(month)&&validOneOrTwo.test(day)&&month>=1&&12>=month&&day>=1&&this._daysInMonth(year,month)>=day},_isDate:function(format,dateStr){try{if(format===undefined)return!1;var data=SAPO.Utility.Date.set(format,dateStr);if(data&&this._isValidDate(data.getFullYear(),data.getMonth()+1,data.getDate()))return!0}catch(ex){}return!1},_writeDateInFormat:function(){return SAPO.Utility.Date.get(this._options.format,this._data)},setDate:function(dateString){if("string"==typeof dateString&&/\d{4}-\d{1,2}-\d{1,2}/.test(dateString)){var auxDate=dateString.split("-");this._year=auxDate[0],this._month=auxDate[1]-1,this._day=auxDate[2]}this._setDate()},_setDate:function(objClicked){objClicked!==undefined&&objClicked.className&&0===objClicked.className.indexOf("sapo_cal_")&&(this._day=objClicked.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(inc){this._updateMonth(inc),this._showMonth()},_daysInMonth:function(_y,_m){var nDays=31;switch(_m){case 2:nDays=0===_y%400||0===_y%4&&0!==_y%100?29:28;break;case 4:case 6:case 9:case 11:nDays=30}return nDays},_updateMonth:function(incValue){incValue===undefined&&(incValue="0");var mes=this._month+1,ano=this._year;switch(incValue){case-1:if(1===mes){if(ano===this._yearMin)return;mes=12,ano--}else mes--;this._year=ano,this._month=mes-1;break;case 1:if(12===mes){if(ano===this._yearMax)return;mes=1,ano++}else mes++;this._year=ano,this._month=mes-1;break;default:}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var i,j,mes=this._month+1,ano=this._year,maxDay=this._daysInMonth(ano,mes),wDayFirst=new Date(ano,mes-1,1).getDay(),startWeekDay=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._yearMin>ano||ano==this._yearMin&&this._monthMin>=mes?this._monthPrev.childNodes[0].className="action_inactive":(ano>this._yearMax||ano==this._yearMax&&mes>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),startWeekDay&&Number(startWeekDay)&&(startWeekDay>wDayFirst?wDayFirst=7+startWeekDay-wDayFirst:wDayFirst+=startWeekDay);var html="";for(html+='<ul class="sapo_cal_header">',i=0;7>i;i++)html+="<li>"+this._options.wDay[i+(startWeekDay+i>6?startWeekDay-7:startWeekDay)].substring(0,1)+"</li>";html+="</ul>";var counter=0;if(html+="<ul>",wDayFirst)for(j=startWeekDay;wDayFirst-startWeekDay>j;j++)counter||(html+="<ul>"),html+='<li class="sapo_cal_empty">&nbsp;</li>',counter++;for(i=1;maxDay>=i;i++){7===counter&&(counter=0,html+="<ul>");var idx="sapo_cal_"+(2===(i+"").length?i:"0"+i);idx+=ano==this._yearMin&&mes==this._monthMin&&this._dayMin>i||ano==this._yearMax&&mes==this._monthMax&&i>this._dayMax||ano==this._yearMin&&this._monthMin>mes||ano==this._yearMax&&mes>this._monthMax||this._yearMin>ano||ano>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(ano,mes-1,i))?" sapo_cal_off":this._data.getFullYear()==ano&&this._data.getMonth()==mes-1&&i==this._day?" sapo_cal_on":"",html+='<li><a href="#" class="'+idx+'">'+i+"</a></li>",counter++,7===counter&&(html+="</ul>")}if(7!==counter){for(i=counter;7>i;i++)html+='<li class="sapo_cal_empty">&nbsp;</li>';html+="</ul>"}html+="</ul>",this._monthContainer.innerHTML=html},_setActiveMonth:function(parent){parent===undefined&&(parent=this._monthSelector);var length=parent.childNodes.length;if(parent.className&&parent.className.match(/sapo_calmonth_/)){var year=this._year,month=parent.className.substr(14,2);year==this._data.getFullYear()&&month==this._data.getMonth()+1?(SAPO.Dom.Css.addClassName(parent,"sapo_cal_on"),SAPO.Dom.Css.removeClassName(parent,"sapo_cal_off")):(SAPO.Dom.Css.removeClassName(parent,"sapo_cal_on"),year==this._yearMin&&this._monthMin>month||year==this._yearMax&&month>this._monthMax||this._yearMin>year||year>this._yearMax?SAPO.Dom.Css.addClassName(parent,"sapo_cal_off"):SAPO.Dom.Css.removeClassName(parent,"sapo_cal_off"))}else if(0!==length)for(var i=0;length>i;i++)this._setActiveMonth(parent.childNodes[i])}}}(),function(){"use strict";SAPO.namespace("Ink"),SAPO.Ink.FormValidator={version:"0.1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(elm,options){if(this._free(),options=SAPO.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},options||{}),"string"==typeof elm&&(elm=document.getElementById(elm)),null===elm)return!1;this.element=elm,(this.element.id===undefined||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=options.customFlag,this.confirmGroup=options.confirmGroup;var fail=this._validateElements();return fail.length>0?(options.onError?options.onError(fail):this._showError(elm,fail),!1):(options.onError||this._clearError(elm),this._clearCache(),options.onSuccess&&options.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){if(this.elements[this.element.id]===undefined){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];for(var formElms=this.element.elements,curElm=!1,i=0,totalElm=formElms.length;totalElm>i;i++)if(curElm=formElms[i],null!==curElm.getAttribute("type")&&"radio"===curElm.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||curElm.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&curElm.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var flag in this._flagMap)if(SAPO.Dom.Css.hasClassName(curElm,flag)){this.elements[this.element.id].push(curElm);break}}else{for(var flag2 in this._flagMap)if(SAPO.Dom.Css.hasClassName(curElm,flag2)&&"ink-fv-confirm"!==flag2){this.elements[this.element.id].push(curElm);break}SAPO.Dom.Css.hasClassName(curElm,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(curElm),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var oGroups;this._getElements(),this.hasConfirm[this.element.id]!==undefined&&this.hasConfirm[this.element.id]===!0&&(oGroups=this._makeConfirmGroups());for(var inArray,errors=[],curElm=!1,customErrors=!1,i=0,totalElm=this.elements[this.element.id].length;totalElm>i;i++)if(inArray=!1,curElm=this.elements[this.element.id][i],!curElm.disabled)for(var flag in this._flagMap)SAPO.Dom.Css.hasClassName(curElm,flag)&&("ink-fv-custom"!==flag&&"ink-fv-confirm"!==flag?this._isValid(curElm,flag)||(inArray?errors[errors.length-1].errors.push(flag):(errors.push({elm:curElm,errors:[flag]}),inArray=!0)):"ink-fv-confirm"!==flag&&(customErrors=this._isCustomValid(curElm),customErrors.length>0&&errors.push({elm:curElm,errors:[flag],custom:customErrors})));return errors=this._validateConfirmGroups(oGroups,errors)},_validateConfirmGroups:function(oGroups,errors){var curGroup=!1;for(var i in oGroups)curGroup=oGroups[i],2===curGroup.length&&curGroup[0].value!==curGroup[1].value&&errors.push({elm:curGroup[1],errors:["ink-fv-confirm"]});return errors},_makeConfirmGroups:function(){var oGroups;if(this.confirmGroup&&this.confirmGroup.length>0){oGroups={};for(var curElm=!1,curGroup=!1,i=0,total=this.confirmElms[this.element.id].length;total>i;i++){curElm=this.confirmElms[this.element.id][i];for(var j=0,totalG=this.confirmGroup.length;totalG>j;j++)curGroup=this.confirmGroup[j],SAPO.Dom.Css.hasClassName(curElm,curGroup)&&(oGroups[curGroup]===undefined?oGroups[curGroup]=[curElm]:oGroups[curGroup].push(curElm))}return oGroups}return 2===this.confirmElms[this.element.id].length&&(oGroups={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),oGroups},_isCustomValid:function(elm){for(var customErrors=[],curFlag=!1,i=0,tCustom=this.custom.length;tCustom>i;i++)curFlag=this.custom[i],SAPO.Dom.Css.hasClassName(elm,curFlag.flag)&&(curFlag.callback(elm,curFlag.msg)||customErrors.push({flag:curFlag.flag,msg:curFlag.msg}));return customErrors},_isValid:function(elm,fieldType){switch(fieldType){case"ink-fv-required":if("select"===elm.nodeName.toLowerCase())return elm.selectedIndex>0?!0:!1;if("checkbox"!==elm.getAttribute("type")&&"radio"!==elm.getAttribute("type")){if(""!==this._trim(elm.value))return!0}else if("checkbox"===elm.getAttribute("type")){if(elm.checked===!0)return!0}else if("radio"===elm.getAttribute("type")){var aFormRadios=elm.form[elm.name];aFormRadios.length===undefined&&(aFormRadios=[aFormRadios]);for(var isChecked=!1,i=0,totalRadio=aFormRadios.length;totalRadio>i;i++)aFormRadios[i].checked===!0&&(isChecked=!0);return isChecked}break;case"ink-fv-email":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.mail(elm.value))return!0;break;case"ink-fv-url":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.url(elm.value))return!0;break;case"ink-fv-number":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(!isNaN(Number(elm.value)))return!0;break;case"ink-fv-phone_pt":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isPTPhone(elm.value))return!0;break;case"ink-fv-phone_cv":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isCVPhone(elm.value))return!0;break;case"ink-fv-phone_ao":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isAOPhone(elm.value))return!0;break;case"ink-fv-phone_mz":if(""===this._trim(elm.value))return SAPO.Dom.Css.hasClassName(elm,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isMZPhone(elm.value))return!0;break;case"ink-fv-custom":}return!1},_showError:function(formElm,aFail){this._clearError(formElm);for(var curElm=!1,i=0,tFail=aFail.length;tFail>i;i++)if(curElm=aFail[i].elm,"radio"!==curElm.getAttribute("type")){var newLabel=document.createElement("p");newLabel.className=this._errorClassName,newLabel.innerHTML="ink-fv-custom"!==aFail[i].errors[0]?this._flagMap[aFail[i].errors[0]].msg:aFail[i].custom[0].msg,"checkbox"!==curElm.getAttribute("type")&&(curElm.nextSibling.parentNode.insertBefore(newLabel,curElm.nextSibling),SAPO.Dom.Css.hasClassName(curElm.parentNode,"control")&&(SAPO.Dom.Css.addClassName(curElm.parentNode,"validation"),"ink-fv-required"===aFail[i].errors[0]?SAPO.Dom.Css.addClassName(curElm.parentNode,"error"):SAPO.Dom.Css.addClassName(curElm.parentNode,"warning")))}else SAPO.Dom.Css.hasClassName(curElm.parentNode.parentNode,"control-group")&&(SAPO.Dom.Css.addClassName(curElm.parentNode.parentNode,"validation"),SAPO.Dom.Css.addClassName(curElm.parentNode.parentNode,"error"))},_clearError:function(formElm){for(var aErrorLabel=formElm.getElementsByTagName("p"),curElm=!1,i=aErrorLabel.length-1;i>=0;i--)curElm=aErrorLabel[i],SAPO.Dom.Css.hasClassName(curElm,this._errorClassName)&&(SAPO.Dom.Css.hasClassName(curElm.parentNode,"control")&&(SAPO.Dom.Css.removeClassName(curElm.parentNode,"validation"),SAPO.Dom.Css.removeClassName(curElm.parentNode,"error"),SAPO.Dom.Css.removeClassName(curElm.parentNode,"warning")),curElm.parentNode.removeChild(curElm));var aErrorLabel2=formElm.getElementsByTagName("ul");for(i=aErrorLabel2.length-1;i>=0;i--)curElm=aErrorLabel2[i],SAPO.Dom.Css.hasClassName(curElm,"control-group")&&(SAPO.Dom.Css.removeClassName(curElm,"validation"),SAPO.Dom.Css.removeClassName(curElm,"error"))},_trim:function(str){return"string"==typeof str?str.replace(/^\s+|\s+$|\n+$/g,""):undefined}}}(),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Event=SAPO.Dom.Event,Selector=SAPO.Dom.Selector,maximizeBox=function(maxSz,imageSz,forceMaximize){var w=imageSz[0],h=imageSz[1];if(forceMaximize||w>maxSz[0]||h>maxSz[1]){var arImg=w/h,arMax=maxSz[0]/maxSz[1],s=arImg>arMax?maxSz[0]/w:maxSz[1]/h;return[parseInt(w*s+.5,10),parseInt(h*s+.5,10)]}return imageSz},getDimsAsync=function(o,cb){cb=cb.bindObj(o);var dims=[o.img.offsetWidth,o.img.offsetHeight];dims[0]&&dims[1]&&cb(dims),o.img.onload=function(){cb([this.img.offsetWidth,this.img.offsetHeight])}.bindObjEvent(o)},Gallery=function(selector,options){if(this._options=SAPO.extendObj({fullImageMaxWidth:600,fullImageMaxHeight:400,thumbnailMaxWidth:106,layout:0,circular:!1,fixImageSizes:!1},options||{}),this._handlers={navClick:this._onNavClick.bindObjEvent(this),paginationClick:this._onPaginationClick.bindObjEvent(this),thumbsClick:this._onThumbsClick.bindObjEvent(this),focusBlur:this._onFocusBlur.bindObjEvent(this),keyDown:this._onKeyDown.bindObjEvent(this)},this._element=Aux.elOrSelector(selector,"1st argument"),this._isFocused=!1,this._model=[],this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._index=0,this._thumbIndex=0,0===this._options.layout)this._showThumbs=!1,this._showDescription=!1,this._paginationHasPrevNext=!1;else{if(1!==this._options.layout&&2!==this._options.layout&&3!==this._options.layout)throw new TypeError("supported layouts are 0-3!");this._showThumbs=!0,this._showDescription=!0,this._paginationHasPrevNext=!0}null!==this._element.getAttribute("data-fix-image-sizes")&&(this._options.fixImageSizes=!0),this._init()};Gallery.prototype={_init:function(){"DOM"===this._createdFrom&&this._extractModelFromDOM();var el=this._generateMarkup(),parentEl=this._element.parentNode;this._notFirstInit||(Aux.storeIdAndClasses(this._element,this),this._notFirstInit=!0),parentEl.insertBefore(el,this._element),parentEl.removeChild(this._element),this._element=el,Aux.restoreIdAndClasses(this._element,this),Event.observe(this._paginationEl,"click",this._handlers.paginationClick),Event.observe(this._navEl,"click",this._handlers.navClick),this._showThumbs&&Event.observe(this._thumbsUlEl,"click",this._handlers.thumbsClick),Event.observe(this._element,"mouseover",this._handlers.focusBlur),Event.observe(this._element,"mouseout",this._handlers.focusBlur),Event.observe(document,"keydown",this._handlers.keyDown),Aux.registerInstance(this,this._element,"gallery")},_extractModelFromDOM:function(){var dims,m=[],liEls=Selector.select("> li",this._element);liEls.forEach(function(liEl){try{var d={image_full:"",image_thumb:"",title_text:"",title_link:"",description:"",content_overlay:document.createDocumentFragment()},enclosureAEl=Selector.select("> a[rel=enclosure]",liEl)[0],thumbImgEl=Selector.select("> img",enclosureAEl)[0],bookmarkAEl=Selector.select("> a[class=bookmark]",liEl)[0],titleSpanEl=Selector.select("span[class=entry-title]",liEl)[0],entryContentSpanEl=Selector.select("> span[class=entry-content]",liEl)[0],contentOverlayEl=Selector.select("> .content-overlay",liEl)[0];dims=enclosureAEl.getAttribute("data-dims"),null!==dims&&(dims=dims.split(","),dims[0]=parseInt(dims[0],10),dims[1]=parseInt(dims[1],10)),!dims||isNaN(dims[0])||isNaN(dims[1])||(d.dims=dims),d.image_full=enclosureAEl.getAttribute("href"),d.image_thumb=thumbImgEl.getAttribute("src"),bookmarkAEl&&(d.title_link=bookmarkAEl.getAttribute("href")),d.title_text=titleSpanEl.innerHTML,entryContentSpanEl&&(d.description=entryContentSpanEl.innerHTML),contentOverlayEl&&d.content_overlay.appendChild(contentOverlayEl),m.push(d)}catch(ex){throw console.error("problematic element:"),console.error(liEl),console.error(ex),Error("Problem parsing gallery data from DOM!")}}),this._model=m},_generateMarkup:function(){var el=document.createElement("div");el.className="ink-gallery";var stageEl=document.createElement("div");stageEl.className="stage";var navEl=document.createElement("nav");navEl.innerHTML=['<ul class="unstyled">','<li><a href="#" class="next"></a></li>','<li><a href="#" class="previous"></a></li>',"</ul>"].join(""),this._navEl=navEl;var sliderEl=document.createElement("div");sliderEl.className="slider";var ulEl=document.createElement("ul");this._sliderUlEl=ulEl;var that=this,W=this._options.fullImageMaxWidth,H=this._options.fullImageMaxHeight;this._model.forEach(function(d,i){var liEl=document.createElement("li"),imgEl=document.createElement("img");if(imgEl.setAttribute("name","image "+(i+1)),imgEl.setAttribute("src",d.image_full),imgEl.setAttribute("alt",d.title_text),liEl.appendChild(imgEl),d.content_overlay)if(1===d.content_overlay.nodeType||11===d.content_overlay.nodeType)d.content_overlay=liEl.appendChild(d.content_overlay);else if("string"==typeof d.content_overlay){var contentOverlayEl=document.createElement("div");contentOverlayEl.className="content-overlay",contentOverlayEl.innerHTML=d.content_overlay,d.content_overlay=liEl.appendChild(contentOverlayEl)}if(ulEl.appendChild(liEl),that._options.fixImageSizes){var dimsCb=function(dims){var imgEl=this.img,data=this.data;data.dims||(data.dims=dims);var dims2=maximizeBox([W,H],dims),w=dims2[0],h=dims2[1],dw=Math.floor((W-w)/2),dh=Math.floor((H-h)/2);if(w!==W||h!==H){imgEl.setAttribute("width",w),imgEl.setAttribute("height",h);var s=imgEl.style;dw>0&&(s.paddingLeft=dw+"px"),dh>0&&(s.paddingBottom=dh+"px")}};d.dims?dimsCb.call({img:imgEl,data:d},d.dims):getDimsAsync({img:imgEl,data:d},dimsCb)}}),sliderEl.appendChild(ulEl),this._sliderEl=sliderEl;var articleTextDivEl;if(this._showDescription){var d=this._model[this._index];articleTextDivEl=document.createElement("div"),articleTextDivEl.className=["article_text","example"+(3===this._options.layout?2:this._options.layout)].join(" "),articleTextDivEl.innerHTML=d.title_link?['<h1><a href="',d.title_link,'">',d.title_text,"</a></h1>",d.description].join(""):["<h1>",d.title_text,"</h1>",d.description].join(""),this._articleTextDivEl=articleTextDivEl}var thumbsDivEl;this._showThumbs&&(thumbsDivEl=document.createElement("div"),thumbsDivEl.className="thumbs",ulEl=document.createElement("ul"),ulEl.className="unstyled",this._model.forEach(function(d,i){var liEl=document.createElement("li"),aEl=document.createElement("a");aEl.setAttribute("href","#");var imgEl=document.createElement("img");imgEl.setAttribute("name","thumb "+(i+1)),imgEl.setAttribute("src",d.image_thumb),imgEl.setAttribute("alt",i+1);var spanEl=document.createElement("span");spanEl.innerHTML=d.title_text,aEl.appendChild(imgEl),aEl.appendChild(spanEl),liEl.appendChild(aEl),ulEl.appendChild(liEl)}),thumbsDivEl.appendChild(ulEl),this._thumbsDivEl=thumbsDivEl,this._thumbsUlEl=ulEl);var paginationEl=document.createElement("div");paginationEl.className="pagination";var aEl;return this._paginationHasPrevNext&&(aEl=document.createElement("a"),aEl.setAttribute("href","#"),aEl.className="previous",paginationEl.appendChild(aEl)),this._model.forEach(function(d,i){var aEl=document.createElement("a");aEl.setAttribute("href","#"),aEl.setAttribute("data-index",i),i===that._index&&(aEl.className="active"),paginationEl.appendChild(aEl)}),this._paginationHasPrevNext&&(aEl=document.createElement("a"),aEl.setAttribute("href","#"),aEl.className="next",paginationEl.appendChild(aEl)),this._paginationEl=paginationEl,0===this._options.layout?(stageEl.appendChild(navEl),stageEl.appendChild(sliderEl),stageEl.appendChild(paginationEl),el.appendChild(stageEl)):(1===this._options.layout||2===this._options.layout||3===this._options.layout)&&(stageEl.appendChild(navEl),stageEl.appendChild(sliderEl),stageEl.appendChild(articleTextDivEl),el.appendChild(stageEl),3===this._options.layout?(this._thumbsUlEl.className="thumbs unstyled",Css.addClassName(el,"rightNav"),el.appendChild(this._thumbsUlEl)):(thumbsDivEl.appendChild(paginationEl),el.appendChild(thumbsDivEl))),this._swipeDir="x",this._swipeThumbsDir=0===this._options.layout?"":3===this._options.layout?"y":"x",SAPO.Utility.Swipe._supported&&new SAPO.Utility.Swipe(el,{callback:function(sw,o){var th=this._isMeOrParent(o.target,this._thumbsUlEl),sl=th?!1:this._isMeOrParent(o.target,el);!th&&!sl||th&&!this._swipeThumbsDir||sl&&o.axis!==this._swipeDir||th&&o.axis!==this._swipeThumbsDir||(0>o.dr[0]?th?this.thumbNext():this.next():th?this.thumbPrevious():this.previous())}.bindObj(this),maxDuration:.4,minDist:50}),el},_isMeOrParent:function(el,parentEl){if(el){do{if(el===parentEl)return!0;el=el.parentNode}while(el);return!1}},_onNavClick:function(ev){var delta,tgtEl=Event.element(ev);if(Css.hasClassName(tgtEl,"previous"))delta=-1;else{if(!Css.hasClassName(tgtEl,"next"))return;delta=1}Event.stop(ev),this.goTo(delta,!0)},_onPaginationClick:function(ev){var tgtEl=Event.element(ev),i=tgtEl.getAttribute("data-index"),isRelative=!1;if(Css.hasClassName(tgtEl,"previous"))i=-1,isRelative=!0;else if(Css.hasClassName(tgtEl,"next"))i=1,isRelative=!0;else{if(null===i)return;i=parseInt(i,10)}Event.stop(ev),isRelative?this.thumbGoTo(i,!0):this.goTo(i)},_onThumbsClick:function(ev){var tgtEl=Event.element(ev);if("img"===tgtEl.nodeName.toLowerCase());else{if("span"!==tgtEl.nodeName.toLowerCase())return;tgtEl=Selector.select("> img",tgtEl.parentNode)[0]}Event.stop(ev);var i=parseInt(tgtEl.getAttribute("alt"),10)-1;this.goTo(i)},_onFocusBlur:function(ev){this._isFocused="mouseover"===ev.type},_onKeyDown:function(ev){if(this._isFocused){var kc=ev.keyCode;if(37===kc)this.previous();else{if(39!==kc)return;this.next()}Event.stop(ev)}},_validateValue:function(i,isRelative,isThumb){if(!Aux.isInteger(i))throw new TypeError("1st parameter must be an integer number!");if(isRelative!==undefined&&isRelative!==!1&&isRelative!==!0)throw new TypeError("2nd parameter must either be boolean or ommitted!");var val=isThumb?this._thumbIndex:this._index;if(isRelative&&(i+=val),this._options.circular)0>i?i=this._model.length-1:i>=this._model.length&&(i=0);else if(0>i||i>=this._model.length||i===val)return!1;return i},getIndex:function(){return this._index},getLength:function(){return this._model.length},goTo:function(i,isRelative){if(i=this._validateValue(i,isRelative,!1),i!==!1){this._index=i;var paginationAEls=Selector.select("> a",this._paginationEl),that=this;if(paginationAEls.forEach(function(aEl,i){Css.setClassName(aEl,"active",i-(that._paginationHasPrevNext?1:0)===that._index)}),this._sliderUlEl.style.marginLeft=["-",this._options.fullImageMaxWidth*this._index,"px"].join(""),this._showDescription){var d=this._model[this._index];this._articleTextDivEl.innerHTML=d.title_link?['<h1><a href="',d.title_link,'">',d.title_text,"</a></h1>",d.description].join(""):["<h1>",d.title_text,"</h1>",d.description].join("")}}},thumbGoTo:function(i,isRelative){if(i=this._validateValue(i,isRelative,!0),i!==!1){this._thumbIndex=i;var prop="margin"+("x"===this._swipeThumbsDir?"Left":"Top");this._thumbsUlEl.style[prop]=["-",this._options.thumbnailMaxWidth*this._thumbIndex,"px"].join("")}},previous:function(){this.goTo(-1,!0)},next:function(){this.goTo(1,!0)},thumbPrevious:function(){this.thumbGoTo(-1,!0)},thumbNext:function(){this.thumbGoTo(1,!0)},destroy:Aux.destroyComponent},SAPO.Ink.Gallery=Gallery}(),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Element=SAPO.Dom.Element,Event=SAPO.Dom.Event,Modal=function(selector,options){if("string"!=typeof selector&&"object"!=typeof selector&&options.markup===undefined)throw"Invalid Modal selector";if("string"==typeof selector){if(""!==selector){if(this._element=SAPO.Dom.Selector.select(selector),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else this._element=selector;this._options=SAPO.extendObj({width:undefined,height:undefined,markup:this._element?this._element.innerHTML:undefined,onShow:undefined,onDismiss:undefined,closeOnClick:!1,skipDismiss:!1,resizable:!0,disableScroll:!1},options||{}),this._handlers={click:this._onClick.bindObjEvent(this),keyDown:this._onKeyDown.bindObjEvent(this),resize:this._onResize.bindObjEvent(this)},this._wasDismissed=!1,this._init()};Modal.prototype={_init:function(){this._modalShadow=document.createElement("div"),this._modalDiv=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDivStyle=this._modalDiv.style,this._resizeTimeout=null,SAPO.Dom.Css.addClassName(this._modalShadow,"ink-shade"),SAPO.Dom.Css.addClassName(this._modalDiv,"ink-modal"),SAPO.Dom.Css.addClassName(this._modalDiv,"ink-space"),this._modalShadowStyle.position="fixed",this._modalShadowStyle.top=this._modalShadowStyle.bottom=this._modalShadowStyle.left=this._modalShadowStyle.right="0px",this._modalDivStyle.position="absolute";var elem="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._options.addClass!==undefined&&SAPO.Dom.Css.addClassName(this._modalDiv,this._options.addClass),this._contentContainer=document.createElement("div"),this._contentContainer.className="ink-modal-content",this._contentContainer.innerHTML=[this._options.skipClose?"":'<a href="#" class="ink-close">Ã—</a>',this._options.markup].join(""),this._modalDiv.appendChild(this._contentContainer),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow),this._modalDivStyle.maxWidth=this._modalDivStyle.width=this._options.width!==undefined?parseInt(this._options.width,10)+"px":SAPO.Dom.Element.elementWidth(this._modalDiv)+"px",parseInt(elem.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=.9*parseInt(elem.clientWidth,10)+"px"),this._modalDivStyle.maxHeight=this._modalDivStyle.height=this._options.height!==undefined?parseInt(this._options.height,10)+"px":SAPO.Dom.Element.elementHeight(this._modalDiv)+"px",parseInt(elem.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=.9*parseInt(elem.clientHeight,10)+"px"),this.originalStatus={viewportHeight:parseInt(elem.clientHeight,10),viewportWidth:parseInt(elem.clientWidth,10),width:parseInt(this._modalDivStyle.width,10),height:parseInt(this._modalDivStyle.height,10)},this._options.resizable&&(this._onResize.apply(this,[]),Event.observe(window,"resize",this._handlers.resize)),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._reposition.apply(this,[]),this.setContentMarkup.apply(this,[this._options.markup]),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),Event.observe(this._shadeElement,"click",this._handlers.click),Event.observe(document,"keydown",this._handlers.keyDown),Aux.registerInstance(this,this._shadeElement,"modal")},_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(SAPO.Dom.Element.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(SAPO.Dom.Element.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){var elem="CSS1Compat"===document.compatMode?document.documentElement:document.body,currentViewportHeight=parseInt(elem.clientHeight,10),currentViewportWidth=parseInt(elem.clientWidth,10);this._modalDivStyle.width=currentViewportWidth>this.originalStatus.viewportWidth?currentViewportWidth*this.originalStatus.width/this.originalStatus.viewportWidth+"px":.9*currentViewportWidth+"px",this._modalDivStyle.height=currentViewportHeight>this.originalStatus.viewportHeight?currentViewportHeight*this.originalStatus.height/this.originalStatus.viewportHeight+"px":.9*currentViewportHeight+"px",this._resizeContainer.apply(this,[]),this._reposition(),this._resizeTimeout=null}.bindObj(this),500))},_onClick:function(ev){var tgtEl=Event.element(ev);(Css.hasClassName(tgtEl,"ink-close")||this._options.closeOnClick&&!Element.descendantOf(this._shadeElement,tgtEl)||tgtEl===this._shadeElement)&&(Event.stop(ev),this.dismiss())},_onKeyDown:function(ev){27!==ev.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentContainer.style.overflow=this._contentContainer.style.overflowX=this._contentContainer.style.overflowY="visible",this._contentContainer.style.height="auto";var contentHeight=SAPO.Dom.Element.elementHeight(this._contentContainer);if(this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible",contentHeight>SAPO.Dom.Element.elementHeight(this._contentElement)&&(this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden",this._contentContainer.style.height=SAPO.Dom.Element.elementHeight(this._contentElement)+"px",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible",this._contentContainer.style.overflow=this._contentContainer.style.overflowY="auto",this._contentContainer.style.overflowX="hidden",!this._options.skipClose)){var aClose=SAPO.Dom.Selector.select(".ink-close",this._contentElement);aClose[0].style.top="-12px",aClose[0].style.right="-14px"}},_disableScroll:function(){this._oldScrollPos=SAPO.Dom.Element.scroll(),this._onScrollBinded=function(event){var tgtEl=SAPO.Dom.Event.element(event);Element.descendantOf(this._modalShadow,tgtEl)||(SAPO.Dom.Event.stop(event),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))
}.bindObjEvent(this),SAPO.Dom.Event.observe(window,"scroll",this._onScrollBinded),SAPO.Dom.Event.observe(this._modalShadow,"touchmove",this._onScrollBinded)},dismiss:function(){this._options.onDismiss&&this._options.onDismiss(this),this._options.disableScroll&&SAPO.Dom.Event.stopObserving(window,"scroll",this._onScrollBinded),this._options.resizable&&SAPO.Dom.Event.stopObserving(window,"resize",this._handlers.resize);var el=this._shadeElement;this._wasDismissed=!0,el.parentNode.removeChild(el),Aux.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(contentMarkup){this._modalDiv.innerHTML="",this._modalDiv.appendChild(this._contentContainer),this._contentContainer.innerHTML=[this._options.skipClose?"":'<a href="#" class="ink-close">Ã—</a>',contentMarkup].join(""),this._resizeContainer.apply(this,[])}},Modal.destroy=Modal.dismiss,SAPO.Ink.Modal=Modal}(),function(window,undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Event=(SAPO.Dom.Element,SAPO.Dom.Event),Selector=SAPO.Dom.Selector,SortableList=function(selector,options){if(this._options=SAPO.extendObj({dragLabel:"drag here"},options||{}),this._handlers={down:this._onDown.bindObjEvent(this),move:this._onMove.bindObjEvent(this),up:this._onUp.bindObjEvent(this)},this._element=Aux.elOrSelector(selector,"1st argument"),this._model=[],this._index=undefined,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}this._init()};SortableList.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var el=this._generateMarkup(),parentEl=this._element.parentNode;this._notFirstInit||(Aux.storeIdAndClasses(this._element,this),this._notFirstInit=!0),parentEl.insertBefore(el,this._element),parentEl.removeChild(this._element),this._element=el,Aux.restoreIdAndClasses(this._element,this);var isTouch="ontouchstart"in document.documentElement;this._down=isTouch?"touchstart":"mousedown",this._move=isTouch?"touchmove":"mousemove",this._up=isTouch?"touchend":"mouseup";var db=document.body;Event.observe(db,this._move,this._handlers.move),Event.observe(db,this._up,this._handlers.up),this._observe(),Aux.registerInstance(this,this._element,"sortableList")},_observe:function(){Event.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var that=this,liEls=Selector.select("> li",this._element);liEls.forEach(function(liEl){var t=liEl.innerHTML;that._model.push(t)})},_generateMarkup:function(){var el=document.createElement("ul");el.className="unstyled ink-sortable-list";var that=this;return this._model.forEach(function(label,idx){var liEl=document.createElement("li");idx===that._index&&(liEl.className="drag"),liEl.innerHTML=['<span class="ink-label ink-info"><i class="icon-reorder"></i>',that._options.dragLabel,"</span>",label].join(""),el.appendChild(liEl)}),el},_getY:function(ev){return 0===ev.type.indexOf("touch")?ev.changedTouches[0].pageY:"number"==typeof ev.pageY?ev.pageY:ev.clientY},_refresh:function(skipObs){var el=this._generateMarkup();this._element.parentNode.replaceChild(el,this._element),this._element=el,Aux.restoreIdAndClasses(this._element,this),skipObs||this._observe()},_onDown:function(ev){var tgtEl=Event.element(ev);if("i"===tgtEl.nodeName.toLowerCase()&&(tgtEl=tgtEl.parentNode),"span"===tgtEl.nodeName.toLowerCase()&&Css.hasClassName(tgtEl,"ink-label")){Event.stop(ev);var liEl=tgtEl.parentNode;return this._index=Aux.childIndex(liEl),this._height=liEl.offsetHeight,this._startY=this._getY(ev),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(ev){if(this._isMoving){Event.stop(ev);var y=this._getY(ev),dy=y-this._startY,sign=dy>0?1:-1,di=sign*Math.floor(Math.abs(dy)/this._height);if(0!==di&&(di/=Math.abs(di),!(-1===di&&0===this._index||1===di&&this._index===this._model.length-1))){var a=di>0?this._index:this._index+di,b=0>di?this._index:this._index+di;this._model.splice(a,2,this._model[b],this._model[a]),this._index+=di,this._startY=y,this._refresh(!1)}}},_onUp:function(ev){this._isMoving&&(Event.stop(ev),this._index=undefined,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:Aux.destroyComponent},SAPO.Ink.SortableList=SortableList}(window),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Event=SAPO.Dom.Event,Selector=SAPO.Dom.Selector,TreeView=function(selector,options){if(this._options=SAPO.extendObj({selectable:!1,startsCollapsed:!1,onClick:undefined},options||{}),this._handlers={click:this._onClick.bindObjEvent(this)},!Aux.isDOMElement(selector)){if(selector=Selector.select(selector),0===selector.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");selector=selector[0]}if(this._element=selector,this._model=[],this._selectedIndex=[-1],this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}this._init()};TreeView.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var el=this._generateMarkup(),parentEl=this._element.parentNode;this._notFirstInit||(Aux.storeIdAndClasses(this._element,this),this._notFirstInit=!0),parentEl.insertBefore(el,this._element),parentEl.removeChild(this._element),this._element=el,Aux.restoreIdAndClasses(this._element,this),Event.observe(this._element,"click",this._handlers.click),Aux.registerInstance(this,this._element,"treeView"),this._options.startsCollapsed&&(delete this._options.startsCollapsed,this.collapseTree())},_extractModelFromDOM:function(){this._model=[""],this._extractLevel(this._element,this._model),this._model.length>1&&this._model[1]&&1===this._model[1].length&&(this._model=this._model[1][0])},_extractLevel:function(ulEl,model){for(var liEl,label,subModel,subUlEl,a,b,liEls=Selector.select("> li",ulEl),children=[],i=0,f=liEls.length;f>i;++i)liEl=liEls[i],label=liEl.innerHTML,a=label.indexOf("<ul>"),b=label.lastIndexOf("</ul>"),-1!==a&&-1!==b&&(label=label.substring(0,a)+label.substring(b+5)),subModel=[label],subUlEl=Selector.select("> ul",liEl)[0],subUlEl&&this._extractLevel(subUlEl,subModel),children.push(subModel);f>0&&(model[1]=children)},_generateMarkup:function(){var el=document.createElement("ul");return el.className="ink-tree-view",this._generateLevel(el,this._model,[0]),el},_generateLevel:function(ulEl,model,index){var liEl=document.createElement("li");liEl.setAttribute("data-index",index.join(" "));var buttonEl=document.createElement("button"),hasChildren=model.length>1&&model[1]&&model[1].length>0,isOpened=!model[2];buttonEl.className=isOpened?"icon-caret-down":"icon-caret-right";var aEl;if(model[0]&&(hasChildren?(liEl.appendChild(buttonEl),aEl=document.createElement("a"),aEl.setAttribute("href","#"),""+index==""+this._selectedIndex&&(aEl.className="ink-info"),aEl.innerHTML=model[0],liEl.appendChild(aEl)):liEl.innerHTML=model[0]),model.length>1){for(var subIndex,subUlEl=document.createElement("ul"),subModel=model[1],i=0,f=subModel.length;f>i;++i)subIndex=index.slice(),subIndex.push(i),this._generateLevel(subUlEl,subModel[i],subIndex);liEl.appendChild(subUlEl),subUlEl.style.display=isOpened?"":"none"}ulEl.appendChild(liEl)},_nodeFromIndex:function(index){index=index.slice();var n=this._model;index.shift();for(var i;"number"==typeof(i=index.shift());)n=n[1][i];return n},_toggleNode:function(node){if(node[0]&&!(2>node.length)){var isHidden=!!node[2];isHidden?(node.pop(),node[1]||node.pop()):node[2]=1}},_onClick:function(ev){for(var tgtEl=Event.element(ev),stopEvent=!("a"===tgtEl.nodeName.toLowerCase()&&"#"!==tgtEl.getAttribute("href"));"li"!==tgtEl.nodeName.toLowerCase();)tgtEl=tgtEl.parentNode;stopEvent&&Event.stop(ev);var index=tgtEl.getAttribute("data-index").split(" ");index=index.map(function(i){return parseInt(i,10)}),this._options.selectable&&(this._selectedIndex=index);var n=this._nodeFromIndex(index);return this._toggleNode(n),this._init(),this._options.onClick&&this._options.onClick({index:index.slice(),value:this.getNodeValue(index)},this),!1},_setTreeCollapse:function(collapse){this._setNodeCollapse(this._model,collapse)},_setNodeCollapse:function(node,collapse){if(!(2>node.length)&&(node[0]&&(collapse?node[2]=1:node[2]&&(node.pop(),node[1]||node.pop())),node[1]))for(var i=0,f=node[1].length;f>i;++i)this._setNodeCollapse(node[1][i],collapse)},getModel:function(){return Aux.clone(this._model)},getNodeValue:function(index){var node=this._nodeFromIndex(index);return node[0]},expandTree:function(){this._setTreeCollapse(!1),this._init()},collapseTree:function(){this._setTreeCollapse(!0),this._init()},toggleNode:function(index){var node=this._nodeFromIndex(index);this._toggleNode(node)},destroy:Aux.destroyComponent},SAPO.Ink.TreeView=TreeView}(),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Event=SAPO.Dom.Event,genAEl=function(inner){var aEl=document.createElement("a");return aEl.setAttribute("href","#"),aEl.innerHTML=inner,aEl},Pagination=function(selector,options){if(this._options=SAPO.extendObj({size:undefined,previousLabel:"Previous",nextLabel:"Next",onChange:undefined,setHash:!1,hashParameter:"page"},options||{}),this._handlers={click:this._onClick.bindObjEvent(this)},this._current=0,this._itemLiEls=[],this._element=Aux.elOrSelector(selector,"1st argument"),!Aux.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(0>this._options.size)throw new RangeError("size option must be equal or more than 0!");if(this._options.onChange!==undefined&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");this._init()};Pagination.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),Aux.registerInstance(this,this._element,"pagination")},_observe:function(){Event.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var i,f,liEl,liEls=this._itemLiEls,isSimpleToggle=this._options.size===liEls.length;if(isSimpleToggle)for(i=0,f=this._options.size;f>i;++i)Css.setClassName(liEls[i],"active",i===this._current);else{for(i=liEls.length-1;i>=0;--i)this._ulEl.removeChild(liEls[i]);for(liEls=[],i=0,f=this._options.size;f>i;++i)liEl=document.createElement("li"),liEl.appendChild(genAEl(i+1)),Css.setClassName(liEl,"active",i===this._current),this._ulEl.insertBefore(liEl,this._nextEl),liEls.push(liEl);this._itemLiEls=liEls}Css.setClassName(this._prevEl,"disabled",!this.hasPrevious()),Css.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(el){Css.addClassName(el,"ink-navigation");var liEl,ulEl=document.createElement("ul");Css.addClassName(ulEl,"pagination"),liEl=document.createElement("li"),liEl.appendChild(genAEl(this._options.previousLabel)),this._prevEl=liEl,Css.addClassName(liEl,"previous"),ulEl.appendChild(liEl),liEl=document.createElement("li"),liEl.appendChild(genAEl(this._options.nextLabel)),this._nextEl=liEl,Css.addClassName(liEl,"next"),ulEl.appendChild(liEl),el.appendChild(ulEl),this._ulEl=ulEl},_onClick:function(ev){Event.stop(ev);var tgtEl=Event.element(ev);if("a"===tgtEl.nodeName.toLowerCase()){var liEl=tgtEl.parentNode;if("li"===liEl.nodeName.toLowerCase()&&!Css.hasClassName(liEl,"active")&&!Css.hasClassName(liEl,"disabled")){var isPrev=Css.hasClassName(liEl,"previous"),isNext=Css.hasClassName(liEl,"next");if(isPrev||isNext)this.setCurrent(isPrev?-1:1,!0);else{var nr=parseInt(tgtEl.innerHTML,10)-1;this.setCurrent(nr)}}}},setSize:function(sz){if(!Aux.isInteger(sz))throw new TypeError("1st argument must be an integer number!");this._options.size=sz,this._updateItems(),this._current=0},setCurrent:function(nr,isRelative){if(!Aux.isInteger(nr))throw new TypeError("1st argument must be an integer number!");if(isRelative&&(nr+=this._current),0>nr?nr=0:nr>this._options.size-1&&(nr=this._options.size-1),this._current=nr,this._updateItems(),this._options.setHash){var o={};o[this._options.hashParameter]=nr,Aux.setHash(o)}this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},destroy:Aux.destroyComponent},SAPO.Ink.Pagination=Pagination}(),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Element=SAPO.Dom.Element,Event=SAPO.Dom.Event,Selector=SAPO.Dom.Selector,Arr=SAPO.Utility.Array,Table=function(selector,options){if(this._options=SAPO.extendObj({model:undefined,endpoint:undefined,fields:undefined,fieldNames:{},formatters:{},sortableFields:[],pageSize:undefined,pagination:undefined,onCellClick:undefined,onHeaderClick:undefined},options||{}),this._handlers={headerclick:this._onHeaderClick.bindObjEvent(this),cellclick:this._onCellClick.bindObjEvent(this),updatecount:this._onUpdateCount.bindObj(this)},this._element=Aux.elOrSelector(selector,"1st argument"),this._options.model&&this._options.endpoint)throw new TypeError("This component requires only _one_ of the following options: model, endpoint or be given a table element.");if(!this._options.model&&!this._options.endpoint){if("table"!==this._element.nodeName.toLowerCase())throw new TypeError("This component requires one of the following options: model, endpoint or the selector pointing to a table element with datatable format.");this._extractModelFromDOM()}if(this._options.model){if(!(this._options.model instanceof Array))throw new TypeError("model option must be passed as an array of objects!");this._model=this._options.model}else if(this._options.endpoint&&"string"!=typeof this._options.endpoint)throw new TypeError("endpoint option should be a server URI!");if(this._options.formatters&&"object"!=typeof this._options.formatters)throw new TypeError("formatters option expected an object of field -> function(fieldValue, item, tdEl)!");if(!(this._options.fields instanceof Array))throw new TypeError("fields option expects an array of strings!");if(this._options.onCellClick&&"function"!=typeof this._options.onCellClick)throw new TypeError("onCellClick options expects a function!");if(this._options.onHeaderClick&&"function"!=typeof this._options.onHeaderClick)throw new TypeError("onHeaderClick options expects a function!");if(this._orderBy=undefined,this._orderDir=1,this._options.pageSize){if(!Aux.isInteger(this._options.pageSize))throw new TypeError("pageSize option must be an integer number!");var pagEl;this._options.pagination?pagEl=Aux.elOrSelector(this._options.pagination,"pagination option"):(pagEl=document.createElement("nav"),Element.insertAfter(pagEl,this._element)),this._pagEl=pagEl,this._options.model?this._onUpdateCount(null,this._options.model.length):Aux.ajaxJSON(this._options.endpoint,{op:"count"},this._handlers.updatecount)}else this._init(),this._handlers.updatecount()};Table.prototype={_init:function(){this._generateMarkup(this._element),this._observe(),Aux.registerInstance(this,this._element,"table")},_extractModelFromDOM:function(){var thEls=Selector.select("> thead > tr > th",this._element),trEls=Selector.select("> tbody > tr",this._element);this._options.fields=[],this._options.fieldNames={},this._options.model=[];var name,label,o,tdEls,that=this;thEls.forEach(function(thEl){try{label=thEl.innerHTML,name=thEl.getAttribute("id"),name?0===name.indexOf("th_")&&(name=name.substring(3)):name=label.toLowerCase().replace(/ /g,"_"),that._options.fields.push(name),that._options.fieldNames[name]=label}catch(ex){throw console.error("problematic element:"),console.error(thEl),Error("Problem parsing table data from DOM!")}}),trEls.forEach(function(trEl){tdEls=Selector.select("> td",trEl),o={},tdEls.forEach(function(tdEl,idx){try{name=tdEl.getAttribute("headers"),name?0===name.indexOf("th_")&&(name=name.substring(3)):name=that._options.fields[idx],label=tdEl.innerHTML,o[name]=label}catch(ex){throw console.error("problematic element:"),console.error(tdEl),Error("Problem parsing table data from DOM!")}}),that._options.model.push(o)})},_observe:function(){Event.observe(this._theadEl,"click",this._handlers.headerclick),Event.observe(this._tbodyEl,"click",this._handlers.cellclick)},_whichRow:function(el){for(;"tr"!==el.nodeName.toLowerCase();)el=el.parentNode;return this._pagination?Aux.childIndex(el):undefined},_whichColumn:function(el){return Aux.childIndex(el)},_remoteQuery:function(cb){Aux.ajaxJSON(this._options.endpoint,{op:"count"},function(err,data1){if(err)return cb(err);var count=data1.count;if(this._pagination&&count!==this._modelLength){var sz=Math.ceil(count/this._options.pageSize);if(this._pagination.getCurrent()>sz-1)return console.log("setCurrent",sz-1),this._pagination.setCurrent(sz-1);this._onUpdateCount(null,count)}var params={op:"list",orderDir:this._orderDir};this._options.pageSize&&(params.pageSz=this._options.pageSize,params.pageNr=this._pagination.getCurrent()),this._orderBy&&(params.orderBy=this._orderBy),Aux.ajaxJSON(this._options.endpoint,params,function(err,data2){return err?cb(err):(cb(null,data2.items),undefined)}.bindObj(this))}.bindObj(this))},_localQuery:function(cb){var sz,items=this._model.slice(),count=items.length;if(this._pagination&&count!==this._modelLength){if(sz=Math.ceil(count/this._options.pageSize),this._pagination.getCurrent()>sz-1)return console.log("setCurrent",sz-1),this._pagination.setCurrent(sz-1);this._onUpdateCount(null,count)}var field=this._orderBy;if(field){var sorterFn,val=items[0][field],getterFn=function(item){return item[field]};sorterFn="number"==typeof val?this._orderDir>0?function(a,b){return getterFn(a)-getterFn(b)}:function(b,a){return getterFn(a)-getterFn(b)}:this._orderDir>0?function(a,b){var A=getterFn(a),B=getterFn(b);return B>A?-1:A>B?1:0}:function(b,a){var A=getterFn(a),B=getterFn(b);return B>A?-1:A>B?1:0},items.sort(sorterFn)}sz=this._options.pageSize;var start;sz!==undefined&&(start=sz*this._pagination.getCurrent(),items=items.slice(start,start+sz)),cb(null,items)},_query:function(cb){this[this._model?"_localQuery":"_remoteQuery"](function(err,items){if(err)throw err;this._visibleItems=items,cb(null,items)}.bindObj(this))},_updateHeaders:function(theadEl){theadEl||(theadEl=this._theadEl),Aux.cleanChildren(theadEl);var i,f,field,label,tdEl,trEl=document.createElement("tr");for(i=0,f=this._options.fields.length;f>i;++i)field=this._options.fields[i],tdEl=document.createElement("th"),label=this._options.fieldNames[field]||field,this._orderBy===field&&(label=[label,' <i class="icon-caret-',this._orderDir>0?"down":"up",'"></i>'].join("")),tdEl.innerHTML=label,trEl.appendChild(tdEl);theadEl.appendChild(trEl)},_generateMarkup:function(el){Css.addClassName(el,"ink-table");var theadEl=document.createElement("thead");this._updateHeaders(theadEl);var tbodyEl=document.createElement("tbody");Aux.cleanChildren(el),el.appendChild(theadEl),el.appendChild(tbodyEl),this._theadEl=theadEl,this._tbodyEl=tbodyEl,this.refresh()},_onPaginationChange:function(){this.refresh()},_onHeaderClick:function(ev){var orderDir,el=Event.element(ev),colNr=this._whichColumn(el),field=this._options.fields[colNr];("*"===this._options.sortableFields||Arr.inArray(field,this._options.sortableFields))&&(this._orderBy===field?this._orderDir*=-1:(this._orderBy=field,this._orderDir=1),orderDir=this._orderDir,this._updateHeaders(),this._pagination?this._pagination.setCurrent(0):this.refresh()),this._options.onHeaderClick&&this._options.onHeaderClick(this,{col:colNr,field:field,orderDir:orderDir})},_onCellClick:function(ev){var el=Event.element(ev),rowNr=this._whichRow(el),colNr=this._whichColumn(el),field=this._options.fields[colNr],item=this._visibleItems[rowNr];this._options.onCellClick&&this._options.onCellClick(this,{item:item,row:rowNr,col:colNr,field:field})},_onUpdateCount:function(err,modelLength){if(!this._options.pageSize)return this.refresh();if(err)throw err;"object"==typeof modelLength&&(modelLength=modelLength.count),this._modelLength=modelLength;var sz=Math.ceil(modelLength/this._options.pageSize);this._pagination?(this._pagination.setSize(sz),this.refresh()):(this._pagination=new SAPO.Ink.Pagination(this._pagEl,{size:sz,onChange:this._onPaginationChange.bindObj(this)}),this._init())},getModel:function(){return this._model.slice()},setModel:function(mdl){if(!this._options.model)throw Error("Component has't been instanced in model mode.");this._model=mdl,this.refresh()},getVisibleItems:function(){return this._visibleItems.slice()},refresh:function(){this._query(function(err,items){var i,I,j,J,trEl,tdEl,item,field,value,formatter,tbodyEl=document.createElement("tbody");for(J=this._options.fields.length,i=0,I=items.length;I>i;++i){for(item=items[i],trEl=document.createElement("tr"),j=0;J>j;++j)field=this._options.fields[j],value=item[field],formatter=this._options.formatters[field],tdEl=document.createElement("td"),formatter?formatter(value,item,tdEl):tdEl.innerHTML=value||"",trEl.appendChild(tdEl);tbodyEl.appendChild(trEl)}this._element.replaceChild(tbodyEl,this._tbodyEl),this._tbodyEl=tbodyEl,Event.observe(this._tbodyEl,"click",this._handlers.cellclick)}.bindObj(this))},destroy:Aux.destroyComponent},SAPO.Ink.Table=Table}(),function(undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Event=SAPO.Dom.Event,Selector=SAPO.Dom.Selector,Tabs=function(selector,options){if(this._options=SAPO.extendObj({active:undefined,disabled:[],onBeforeChange:undefined,onChange:undefined},options||{}),this._handlers={tabClicked:this._onTabClicked.bindObjEvent(this),disabledTabClicked:this._onDisabledTabClicked.bindObjEvent(this),resize:this._onResize.bindObjEvent(this)},!SAPO.Ink.Aux.isDOMElement(selector)){if(selector=Selector.select(selector),0===selector.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=selector[0]}this._init()};Tabs.prototype={_init:function(){this._menu=Selector.select(".ink-tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=Selector.select(".ink-tabs-container",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink),this._handlers.resize(),Aux.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var i=0;this._contentTabs.length>i;i++)Css.hide(this._contentTabs[i])},_observe:function(){this._menuTabs.forEach(function(elem){var link=Selector.select("a",elem)[0];SAPO.Utility.Array.inArray(link.getAttribute("href"),this._options.disabled)?this.disable(link):this.enable(link)}.bindObj(this)),Event.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var hash=window.location.hash;if(this._activeContentTab=Selector.select(hash,this._element)[0]||Selector.select(this._hashify(this._options.active),this._element)[0]||Selector.select(".ink-tabs-container",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),Css.hasClassName(this._activeMenuLink,"ink-disabled"))for(var i=0;this._menuTabs.length>i;i++){var link=Selector.select("a",this._menuTabs[i])[0];if(!Css.hasClassName(link,"ink-disabled")){this._activeMenuLink=link;break}}this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(link,runCallbacks){runCallbacks&&this._options.onBeforeChange!==undefined&&this._options.onBeforeChange(this);var selector=link.getAttribute("href");Css.removeClassName(this._activeMenuTab,"active"),Css.removeClassName(this._activeContentTab,"active"),this._activeContentTab&&Css.hide(this._activeContentTab),this._activeMenuLink=link,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=Selector.select(selector,this._element)[0],Css.addClassName(this._activeMenuTab,"active"),Css.addClassName(this._activeContentTab,"active"),Css.show(this._activeContentTab),runCallbacks&&this._options.onChange!==undefined&&this._options.onChange(this)},_onTabClicked:function(ev){Event.stop(ev);var target=Event.findElement(ev,"A");"a"===target.nodeName.toLowerCase()&&(window.location.hash=target.getAttribute("href"),target!==this._activeMenuLink&&this.changeTab(target))},_onDisabledTabClicked:function(ev){Event.stop(ev)},_onResize:function(){var currentLayout=SAPO.Ink.Aux.currentLayout();currentLayout!==this._lastLayout&&(currentLayout===SAPO.Ink.Aux.Layouts.SMALL||currentLayout===SAPO.Ink.Aux.Layouts.MEDIUM?(Css.removeClassName(this._menu,"menu"),Css.removeClassName(this._menu,"horizontal"),Css.addClassName(this._menu,"pills")):(Css.addClassName(this._menu,"menu"),Css.addClassName(this._menu,"horizontal"),Css.removeClassName(this._menu,"pills")),this._lastLayout=currentLayout)},_hashify:function(hash){return hash?0===hash.indexOf("#")?hash:"#"+hash:""},_findLinkByHref:function(href){href=this._hashify(href);var ret;return this._menuTabs.forEach(function(elem){var link=Selector.select("a",elem)[0];link.getAttribute("href")===href&&(ret=link)}),ret},_getChildElements:function(parent){for(var childNodes=[],children=parent.children,i=0;children.length>i;i++)1===children[i].nodeType&&childNodes.push(children[i]);return childNodes},changeTab:function(selector){var element=1===selector.nodeType?selector:this._findLinkByHref(this._hashify(selector));element&&!Css.hasClassName(element,"ink-disabled")&&this._changeTab(element,!0)},disable:function(selector){var element=1===selector.nodeType?selector:this._findLinkByHref(this._hashify(selector));element&&(Event.stopObserving(element,"click",this._handlers.tabClicked),Event.observe(element,"click",this._handlers.disabledTabClicked),Css.addClassName(element,"ink-disabled"))},enable:function(selector){var element=1===selector.nodeType?selector:this._findLinkByHref(this._hashify(selector));element&&(Event.stopObserving(element,"click",this._handlers.disabledTabClicked),Event.observe(element,"click",this._handlers.tabClicked),Css.removeClassName(element,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:Aux.destroyComponent},SAPO.Ink.Tabs=Tabs}(),function(){"use strict";SAPO.namespace("Ink");var Css=SAPO.Dom.Css,Arr=SAPO.Utility.Array,Event=SAPO.Dom.Event,Close=function(){Event.observe(document.body,"click",function(ev){var el=Event.element(ev);if(Css.hasClassName(el,"ink-close")||Css.hasClassName(el,"ink-dismiss")){var classes;do if(el.className&&(classes=el.className.split(" "),classes&&(Arr.inArray("ink-alert",classes)||Arr.inArray("ink-alert-block",classes))))break;while(el=el.parentNode);el&&(Event.stop(ev),el.parentNode.removeChild(el))}})};SAPO.Ink.Close=Close}(),function(window,undefined){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Css=SAPO.Dom.Css,Element=SAPO.Dom.Element,Event=SAPO.Dom.Event,Dockable=function(selector,options){if(this._element=Aux.elOrSelector(selector,"1st argument"),this._options=SAPO.extendObj({fixedHeight:0,throttlingDeltaT:.2},options||{}),null!==this._element.getAttribute("data-fixed-height")){var fh=parseInt(this._element.getAttribute("data-fixed-height"),10);this._options.fixedHeight=fh}this._isFixed=!1,this._timer=undefined,this._handlers={timer:this._onTimer.bindObj(this),change:this._onChange.bindObjEvent(this)},this._init()};Dockable.prototype={version:"0.1",_init:function(){Event.observe(window,"scroll",this._handlers.change),Event.observe(window,"resize",this._handlers.change),Aux.registerInstance(this,this._element,"dockable")},_fix:function(){this._isFixed||(Css.addClassName(this._element,"ink-docked"),this._oldTop=this._element.style.top,this._element.style.top=this._options.fixedHeight+"px",this._isFixed=!0)},_reset:function(){this._isFixed&&(Css.removeClassName(this._element,"ink-docked"),this._element.style.top=this._oldTop,delete this._oldTop,this._isFixed=!1)},_onTimer:function(){clearTimeout(this._timer),this._timer=undefined;var sh=Element.scroll()[1];if(this._isFixed)this._fixedAt-this._options.fixedHeight>sh&&this._reset();else{var py=Element.offset2(this._element)[1];sh>py-this._options.fixedHeight&&(this._fixedAt=py,this._fix())}},_onChange:function(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this._handlers.timer,1e3*this._options.throttlingDeltaT)}},SAPO.Ink.Dockable=Dockable}(window),function(window){"use strict";SAPO.namespace("Ink");var Aux=SAPO.Ink.Aux,Element=SAPO.Dom.Element,Event=SAPO.Dom.Event,Selector=SAPO.Dom.Selector,Collapsible=function(selector,options){this._options=SAPO.extendObj({},options||{}),this._handlers={resize:this._onResize.bindObjEvent(this),toggle:this._onToggle.bindObjEvent(this)},this._element=Aux.elOrSelector(selector,"1st argument"),"ul"!==this._element.nodeName.toLowerCase()&&(this._element=Selector.select("ul",this._element)[0]),this._init()};Collapsible.prototype={_init:function(){this._expandedMenu=Selector.select(">li",this._element),this._insertMenuElement(),this._observe(),Aux.registerInstance(this,this._element,"collapsible")},_insertMenuElement:function(){this._menuTitleElement=Selector.select("li:first",this._element)[0],this._toggle=Element.create("button",{className:"ink-for-s ink-for-m ink-button",innerHTML:'<i class="icon-reorder" style="height:auto"></i>'}),this._expandedMenu=Element.siblings(this._menuTitleElement),this._menuTitleElement.appendChild(this._toggle),this._onResize(),this._menuTitleElement.appendChild(this._toggle),this._element.insertBefore(this._menuTitleElement,this._element.firstChild)},_observe:function(){Event.observe(window,"resize",this._handlers.resize),Event.observe(this._toggle,"click",this._handlers.toggle)},_onResize:function(){var currentLayout=SAPO.Ink.Aux.currentLayout();currentLayout!==this._lastLayout&&(currentLayout===SAPO.Ink.Aux.Layouts.SMALL||currentLayout===SAPO.Ink.Aux.Layouts.MEDIUM?this._initVertical():this._initHorizontal(),this._lastLayout=currentLayout)},_onToggle:function(ev,show){ev&&Event.stop(ev);var display;display=show!==undefined?show?"block":"none":"none"===this._expandedMenu[0].style.display?"block":"none",this._expandedMenu.forEach(function(elem){elem.style.display=display})},_initHorizontal:function(){this._toggle.style.display="none",this._expandedMenu.forEach(function(elem){elem.style.display="inline-block"})},_initVertical:function(){this._toggle.style.display="block",this._expandedMenu.forEach(function(elem){elem.style.display="none"})},toggle:function(){this._onToggle()}},SAPO.Ink.Collapsible=Collapsible}(window);