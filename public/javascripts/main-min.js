window.SAPO="undefined"==typeof SAPO?{}:window.SAPO,SAPO.namespace=function(e){if(!e||!e.length)return null;for(var t=e.split("."),n=SAPO,i="SAPO"===t[0]?1:0;t.length>i;++i)n[t[i]]=n[t[i]]||{},n=n[t[i]];return n},SAPO.verify=function(e,t){if(e){for(var n=e.split("."),i=SAPO,s="SAPO"===n[0]?1:0,o=n.length;o>s;s++)if(i=i[n[s]],!i)throw Error("SAPO.verify: "+e+" not found");if(t){"function"==typeof i&&(i=i.prototype);var r=(i.version+"").match(/\d+/g)||[0],a=(t+"").match(/\d+/g)||[0];for(s=0,o=Math.min(r.length,a.length);o>s;s++)if(r[s]<a[s])throw Error("SAPO.verify: "+e+" has low version ("+i.version+" < "+t+")");if(r.length<a.length)throw Error("SAPO.verify: "+e+" has low version ("+i.version+" < "+t+")")}}},SAPO.Class=function(e,t,n){var i=function(){if(!this.__dont_init){if(this===window||!this)throw Error('Call "new '+e+'(...);"');if(i["abstract"])throw Error("Abstract class: don't instantiate");if(t){var s=t["abstract"];s&&(t["abstract"]=!1),t.apply(this,arguments),s&&(t["abstract"]=s)}n&&"function"==typeof n.init&&n.init.apply(this,arguments)}};return i.name=i.displayName=e,i["abstract"]=n["abstract"],t&&(t.prototype.__dont_init=1,i.prototype=new t,delete t.prototype.__dont_init),i.prototype.toString=function(){return"[object "+e+"]"},n&&SAPO.extendObj(i.prototype,n),i},SAPO.safeCall=function(e,t){function n(e){setTimeout(function(){throw e.message&&(e.message+="\n"+(e.stacktrace||e.stack||"")),e},1)}if(null===e&&(e=window),"string"==typeof t&&"function"==typeof e[t])try{return e[t].apply(e,[].slice.call(arguments,2))}catch(i){n(i)}else if("function"==typeof t)try{return t.apply(e,[].slice.call(arguments,2))}catch(i){n(i)}else if("function"==typeof e)try{return e.apply(window,[].slice.call(arguments,1))}catch(i){n(i)}},window.s$=function(e){if(arguments.length>1){for(var t=0,n=[],i=arguments.length;i>t;t++)n.push(s$(arguments[t]));return n}return"string"==typeof e&&(e=document.getElementById(e)),e},Function.prototype.bindObj=function(){if(2>arguments.length&&void 0===arguments[0])return this;for(var e=this,t=[],n=0,i=arguments.length;i>n;n++)t.push(arguments[n]);var s=t.shift(),o=function(){return e.apply(s,t.concat(function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t}(arguments)))};return o.toString=function(){return e+""},o.name=o.displayName=e.name,o},Function.prototype.bindObjEvent=function(){for(var e=this,t=[],n=0;arguments.length>n;n++)t.push(arguments[n]);var i=t.shift();return function(n){return e.apply(i,[n||window.event].concat(t))}},Object.extend=function(e,t){for(var n in t)e[n]=t[n];return e},SAPO.extendObj=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},SAPO.Browser===void 0&&(SAPO.Browser={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var e=0,t=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),this.windowWidth=e,this.windowHeight=t},setReferrer:function(){this.referrer=void 0!==document.referrer?document.referrer.length>0?window.escape(document.referrer):!1:!1},detectBrowser:function(){var e=navigator.userAgent;if(this.userAgent=e,e=e.toLowerCase(),RegExp("applewebkit/").test(e))RegExp("chrome/").test(e)?(this.CHROME=!0,this.model="chrome",this.version=e.replace(RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=e.replace(RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(RegExp("opera").test(e))this.OPERA=!0,this.model="opera",this.version=e.replace(RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(RegExp("konqueror").test(e))this.KONQUEROR=!0,this.model="konqueror",this.version=e.replace(RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(RegExp("msie\\ ").test(e))this.IE=!0,this.model="ie",this.version=e.replace(RegExp("(.*)\\smsie\\s([^;]+);(.*)"),"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(RegExp("gecko").test(e)){this.GECKO=!0;var t=RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(t.test(e))this.model=e.match(t)[1],this.version=e.replace(RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var n=RegExp("(.*)rv:([^)]+)(.*)");n.test(e)&&(this.version=e.replace(n,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var e="known browsers: (ie, gecko, opera, safari, konqueror) \n";e+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",e+="model -> "+this.model+"\n",e+="version -> "+this.version+"\n",e+="\n",e+="original UA -> "+this.userAgent,alert(e)}},SAPO.Browser.init()),SAPO.logReferer=function(e){var t=SAPO.extendObj({s:"js.sapo.pt",swakt:"59a97a5f-0924-3720-a62e-0c44d9ea4f16",pg:!1,swasection:!1,swasubsection:"",dc:"",ref:!1,etype:"libsapojs-view",swav:"1",swauv:"1",bcs:"1",bsr:"1",bul:"1",bje:"1",bfl:"1",debug:!1},arguments[1]||{});if(e!==void 0&&null!==e){t.pg||(t.pg=e),t.swasection||(t.swasection=e),t.ref||(t.ref=location.href);var n="http://wa.sl.pt/wa.gif?",i="https://ssl.sapo.pt/wa.sl.pt/wa.gif?",s=["pg="+encodeURIComponent(t.pg),"swasection="+encodeURIComponent(t.swasection),"swasubsection="+encodeURIComponent(t.swasubsection),"dc="+encodeURIComponent(t.dc),"s="+t.s,"ref="+encodeURIComponent(t.ref),"swakt="+t.swakt,"etype="+encodeURIComponent(t.etype),"swav="+encodeURIComponent(t.swav),"swauv="+encodeURIComponent(t.swauv),"bcs="+encodeURIComponent(t.bcs),"bsr="+encodeURIComponent(t.bsr),"bul="+encodeURIComponent(t.bul),"bje="+encodeURIComponent(t.bje),"bfl="+encodeURIComponent(t.bfl),""],o="https:"===location.protocol?i:n,r=new Image;r.src=o+s.join("&")}},SAPO._require=function(e,t){if("string"==typeof e){var n=document.createElement("script");n.type="text/javascript";var i=document.getElementsByTagName("HEAD");i.length>0&&i[0].appendChild(n),document.addEventListener?n.onload=function(){t!==void 0&&t()}:n.onreadystatechange=function(){"loaded"===this.readyState&&t!==void 0&&t()},n.src=e}},SAPO.require=function(e,t){var n=[],i=[],s=function(e){return"string"==typeof e&&/^SAPO\./.test(e)?!0:!1},o=function(e){return"object"==typeof e&&e.constructor===Object&&"string"==typeof e.uri?!0:!1},r=function(e){return"object"==typeof e&&e.constructor===Array?!0:!1},a=function(e){var t=e.split("."),n=t.join("/");return"http://js.sapo.pt/"+n+"/"},l=function(e){return e.uri},h=function(e,t){if(e!==void 0){for(var n=e.split("."),i=window,s=0,o=n.length;o>s;s++){if(void 0===i[n[s]])return!1;i=i[n[s]]}return t!==void 0&&null!==t?i.version!==void 0?i.version===t?!0:!1:!0:!0}},c=function(){i.length>1?(SAPO._require(i[0],c),i.splice(0,1)):1===i.length?(t!==void 0?SAPO._require(i[0],t):SAPO._require(i[0]),i.splice(0,1)):0===i.length&&t!==void 0&&t()};if(e!==void 0){var d=!1;if("string"==typeof e)s(e)?h(e)||i.push(a(e)):i.push(e);else for(var u=0,m=e.length;m>u;u++)d=e[u],s(d)?h(d)||(n.push(d),i.push(a(d))):r(d)?d.length>0&&s(d[0])&&(h(d[0])||(2===d.length?i.push(a(d[0])+d[1]+"/"):i.push(a(d[0])))):"string"==typeof d?i.push(d):o(d)&&("string"==typeof d.check?"string"==typeof d.version?h(d.check,d.version)||i.push(l(d)):h(d.check)||i.push(l(d)):i.push(l(d)));if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[2]===!0){for(var p=0,f=i.length;f>p;p++)SAPO._require(i[p]);return t!==void 0&&t(),void 0}c()}else c()}},function(e,t){"use strict";if(SAPO.namespace("Dom"),!SAPO.Dom.Css){var n=navigator.userAgent.toLowerCase(),i=-1!==n.indexOf("android")&&-1===n.indexOf("chrome")&&-1!==n.indexOf("safari"),s="object"==typeof Node?function(e){return e instanceof Node}:function(e){return e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};SAPO.Dom.Css={addRemoveClassName:function(e,n,i){return i?SAPO.Dom.Css.addClassName(e,n):(SAPO.Dom.Css.removeClassName(e,n),t)},addClassName:function(e,n){e=s$(e),e&&n&&(e.classList!==t?e.classList.add(n):this.hasClassName(e,n)||(e.className+=(e.className?" ":"")+n))},removeClassName:function(e,n){if(e=s$(e),e&&n)if(e.classList!==t)e.classList.remove(n);else{if(e.className===t)return!1;var i=e.className,s=RegExp("(^|\\s+)"+n+"(\\s+|$)");i=i.replace(s," "),i=i.replace(/^\s+/,"").replace(/\s+$/,""),e.className=i}},setClassName:function(e,t,n){n?SAPO.Dom.Css.addClassName(e,t):SAPO.Dom.Css.removeClassName(e,t)},hasClassName:function(e,n){if(e=s$(e),e&&n){if(e.classList!==t)return e.classList.contains(n);if(e.className===t)return!1;var i=e.className;if(i.length===t)return!1;if(i.length>0){if(i===n)return!0;var s=RegExp("(^|\\s)"+n+"(\\s|$)");if(s.test(i))return!0}}return!1},blinkClass:function(e,t,n,i){e=s$(e),SAPO.Dom.Css.setClassName(e,t,!i),setTimeout(function(){SAPO.Dom.Css.setClassName(e,t,i)},100|Number(n))},toggleClassName:function(e,n,i){return e&&n&&e.classList!==t?(e=s$(e),null!==e&&e.classList.toggle(n),!0):(i!==t?i===!0?this.addClassName(e,n):i===!1&&this.removeClassName(e,n):this.hasClassName(e,n)?this.removeClassName(e,n):this.addClassName(e,n),t)},setOpacity:function(e,n){if(e=s$(e),null!==e){var i=1;isNaN(Number(n))||(i=0>=n?0:1>=n?n:100>=n?n/100:1),e.style.opacity!==t?e.style.opacity=i:e.style.filter="alpha(opacity:"+(0|100*i)+")"}},_camelCase:function(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e},getStyle:function(t,n){if(t=s$(t),null!==t){n="float"===n?"cssFloat":SAPO.Dom.Css._camelCase(n);var i=t.style[n];if(!e.getComputedStyle||i&&"auto"!==i)!i&&t.currentStyle&&(i=t.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=t["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var s=getComputedStyle(t,null);i=s?s[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(e,n){if(e=s$(e),null!==e)if("string"==typeof n)e.style.cssText+="; "+n,-1!==n.indexOf("opacity")&&this.setOpacity(e,n.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var i in n)n.hasOwnProperty(i)&&("opacity"===i?this.setOpacity(e,n[i]):"float"===i||"cssFloat"===i?e.style.styleFloat===t?e.style.cssFloat=n[i]:e.style.styleFloat=n[i]:e.style[i]=n[i])},show:function(e,t){e=s$(e),null!==e&&(e.style.display=t?t:"")},hide:function(e){e=s$(e),null!==e&&(e.style.display="none")},showHide:function(e,t){e=s$(e),e&&(e.style.display=t?"":"none")},toggle:function(e,n){e=s$(e),null!==e&&(n!==t?n===!0?this.show(e):this.hide(e):"none"===e.style.display?this.show(e):this.hide(e))},_getRefTag:function(e){if(e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},appendStyleTag:function(e,n,i){i=SAPO.extendObj({type:"text/css",force:!1},i||{});var s,o,r=document.getElementsByTagName("style"),a=!1,l=!0;for(s=0,o=r.length;o>s;s++)a=r[s].innerHTML,a.indexOf(e)>=0&&(l=!1);if(l){var h=document.createElement("style"),c=document.getElementsByTagName("head")[0],d=!1,u="";h.type=i.type,u+=e+" {",u+=n,u+="} ",h.styleSheet!==t?h.styleSheet.cssText=u:h.appendChild(document.createTextNode(u)),i.force?c.appendChild(h):(d=this._getRefTag(c),d&&c.insertBefore(h,d))}},appendStylesheet:function(e,t){t=SAPO.extendObj({media:"screen",type:"text/css",force:!1},t||{});var n,i=document.createElement("link"),s=document.getElementsByTagName("head")[0];i.media=t.media,i.type=t.type,i.href=e,i.rel="Stylesheet",t.force?s.appendChild(i):(n=this._getRefTag(s),n&&s.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(e,t){if(!e)return t(e);if(SAPO.Dom.Css._loadedCSSFiles[e])return t(e);var n=SAPO.Dom.Css._loadingCSSFiles[e];if(n)return n.push(t);SAPO.Dom.Css._loadingCSSFiles[e]=[t];var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e;var r=document.getElementsByTagName("head")[0];r.appendChild(o);var a=function(e){var t=this;SAPO.Dom.Css._loadedCSSFiles[t]=!0;for(var n=SAPO.Dom.Css._loadingCSSFiles[t],i=0,o=n.length;o>i;++i)n[i](t);delete SAPO.Dom.Css._loadingCSSFiles[t],e&&s(e)&&e.parentNode.removeChild(e)};if(i){var l=document.createElement("iframe");l.style.display="none",l.onerror=a,l.onload=a.bindObj(e,l),document.body.appendChild(l)}else{var h=document.createElement("img");h.onerror=a.bindObj(e),h.src=e}},decToHex:function(e){var t=function(e){return 1===e.length&&(e="0"+e),e=e.toUpperCase()};if("object"==typeof e){var n=t(parseInt(e.r,10).toString(16)),i=t(parseInt(e.g,10).toString(16)),s=t(parseInt(e.b,10).toString(16));return n+i+s}e+="";var o=e.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==o?t(parseInt(o[1],10).toString(16))+t(parseInt(o[2],10).toString(16))+t(parseInt(o[3],10).toString(16)):t(parseInt(e,10).toString(16))},hexToDec:function(e){return 0===e.indexOf("#")&&(e=e.substr(1)),6===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}:3===e.length?{r:parseInt(e.charAt(0)+e.charAt(0),16),g:parseInt(e.charAt(1)+e.charAt(1),16),b:parseInt(e.charAt(2)+e.charAt(2),16)}:2>=e.length?parseInt(e,16):t},getPropertyFromStylesheet:function(e,t){var n=SAPO.Dom.Css.getRuleFromStylesheet(e);return n?n.style[t]:null},getPropertyFromStylesheet2:function(e,n){var i=SAPO.Dom.Css.getRulesFromStylesheet(e);return i.forEach(function(e){var i=e.style[n];return null!==i&&i!==t?i:t}),null},getRuleFromStylesheet:function(e){var t,n,i,s,o,r=document.styleSheets;if(!r)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(t=document.styleSheets[a],n=t.rules?t.rules:t.cssRules,!n)return null;for(i=0,s=n.length;s>i;++i)if(o=n[i],o.selectorText&&o.selectorText===e)return o}return null},getRulesFromStylesheet:function(e){var t,n,i,s,o,r=[],a=document.styleSheets;if(!a)return r;for(var l=0,h=document.styleSheets.length;h>l;++l){if(t=document.styleSheets[l],n=t.rules?t.rules:t.cssRules,!n)return null;for(i=0,s=n.length;s>i;++i)o=n[i],o.selectorText&&o.selectorText===e&&r.push(o)}return r},getPropertiesFromRule:function(e){var t,n,i,s=this.getRuleFromStylesheet(e),o={};s=s.style.cssText;var r,a,l,h,c=s.split(";");for(n=0,i=c.length;i>n;++n)" "===c[n].charAt(0)&&(c[n]=c[n].substring(1)),r=c[n].split(":"),t=this._camelCase(r[0].toLowerCase()),a=r[1],a&&(a=a.substring(1),"padding"===t||"margin"===t||"borderWidth"===t?("borderWidth"===t?(l="border",h="Width"):(l=t,h=""),-1!==a.indexOf(" ")?(a=a.split(" "),o[l+"Top"+h]=a[0],o[l+"Bottom"+h]=a[0],o[l+"Left"+h]=a[1],o[l+"Right"+h]=a[1]):(o[l+"Top"+h]=a,o[l+"Bottom"+h]=a,o[l+"Left"+h]=a,o[l+"Right"+h]=a)):"borderRadius"===t?-1!==a.indexOf(" ")?(a=a.split(" "),o.borderTopLeftRadius=a[0],o.borderBottomRightRadius=a[0],o.borderTopRightRadius=a[1],o.borderBottomLeftRadius=a[1]):(o.borderTopLeftRadius=a,o.borderTopRightRadius=a,o.borderBottomLeftRadius=a,o.borderBottomRightRadius=a):o[t]=a);return o},changeFontSize:function(e,n,i,s,o){var r;if("string"!=typeof e?r="1st argument must be a CSS selector rule.":"number"!=typeof n?r="2nd argument must be a number.":i!==t&&"+"!==i&&"*"!==i?r='3rd argument must be one of "+", "*".':s!==t&&("number"!=typeof s||0>=s)?r="4th argument must be a positive number.":o!==t&&("number"!=typeof o||o>o)&&(r="5th argument must be a positive number greater than minValue."),r)throw new TypeError(r);var a,l,h=SAPO.Dom.Selector.select(e);s===t&&(s=1),i="*"===i?function(e,t){return e*t}:function(e,t){return e+t};for(var c=0,d=h.length;d>c;++c)l=h[c],a=parseFloat(SAPO.Dom.Css.getStyle(l,"fontSize")),a=i(a,n),s>a||"number"==typeof o&&a>o||(l.style.fontSize=a+"px")}}}}(window),SAPO.namespace("Dom"),SAPO.Dom.Element={get:function(e){return e!==void 0?"string"==typeof e?document.getElementById(e):e:null},create:function(e,t){var n=document.createElement(e);return SAPO.extendObj(n,t),n},remove:function(e){var t;e&&(t=e.parentNode)&&t.removeChild(e)},scrollTo:function(e){if(e=this.get(e)){if(e.scrollIntoView)return e.scrollIntoView();var t={},n=0,i=0;do n+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;while(e);t={x:i,y:n},window.scrollTo(t.x,t.y)}},offsetTop:function(e){e=this.get(e);for(var t=e.offsetTop;e.offsetParent&&"body"!==e.offsetParent.tagName.toLowerCase();)e=e.offsetParent,t+=e.offsetTop;return t},offsetLeft:function(e){e=this.get(e);for(var t=e.offsetLeft;e.offsetParent&&"body"!==e.offsetParent.tagName.toLowerCase();)e=e.offsetParent,t+=e.offsetLeft;return t},positionedOffset:function(e){var t=0,n=0;e=this.get(e);do if(t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent){if("body"===e.tagName.toLowerCase())break;var i=e.style.position;if(!i&&e.currentStyle&&(i=e.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var s=getComputedStyle(e,null);i=s?s.position:null}if("relative"===i||"absolute"===i)break}while(e);return[n,t]},offset:function(e){return[this.offsetLeft(e),this.offsetTop(e)]},scroll:function(e){return e=e?s$(e):document.body,[window.pageXOffset?window.pageXOffset:e.scrollLeft,window.pageYOffset?window.pageYOffset:e.scrollTop]},_getPropPx:function(e,t){var n,i,s=e.getPropertyValue?e.getPropertyValue(t):e[t];return s?(i=s.indexOf("px"),n=-1===i?0:parseInt(s,10)):n=0,n},offset2:function(e){e=s$(e);var t,n,i,s,o=["border-left-width","border-top-width"],r=[0,0],a=SAPO.Dom.Element._getPropPx;do s=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle,t=[0|e.offsetLeft,0|e.offsetTop],n=[a(s,o[0]),a(s,o[1])],SAPO.Browser.OPERA?(r[0]+=t[0],r[1]+=t[1]):(r[0]+=t[0]+n[0],r[1]+=t[1]+n[1]),i=e.offsetParent;while(e=i);return n=[a(s,o[0]),a(s,o[1])],SAPO.Browser.OPERA||(SAPO.Browser.GECKO?(r[0]+=n[0],r[1]+=n[1]):(r[0]-=n[0],r[1]-=n[1])),r},hasAttribute:function(e,t){return e.hasAttribute?e.hasAttribute(t):!!e.getAttribute(t)},insertAfter:function(e,t){(t=this.get(t))&&t.parentNode.insertBefore(e,t.nextSibling)},insertTop:function(e,t){(t=this.get(t))&&t.insertBefore(e,t.firstChild)},textContent:function(e){e=s$(e);var t;switch(e&&e.nodeType){case 9:return this.textContent(e.documentElement||e.body&&e.body.parentNode||e.body);case 1:if(t=e.innerText,t!==void 0)return t;case 11:if(t=e.textContent,t!==void 0)return t;if(e.firstChild===e.lastChild)return this.textContent(e.firstChild);t=[];for({var n,i=0,s=e.childNodes;s.length};n=s[i];i++)t.push(this.textContent(n));return t.join("");case 3:case 4:return e.nodeValue}return""},setTextContent:function(e,t){switch(e=s$(e),e&&e.nodeType){case 1:if("innerText"in e){e.innerText=t;break}case 11:if("textContent"in e){e.textContent=t;break}case 9:for(;e.firstChild;)e.removeChild(e.firstChild);if(""!==t){var n=e.ownerDocument||e;e.appendChild(n.createTextNode(t))}break;case 3:case 4:e.nodeValue=t}},isLink:function(e){var t=e&&1===e.nodeType&&(/^a|area$/i.test(e.tagName)||e.hasAttributeNS&&e.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!t},isAncestorOf:function(e,t){if(!t||!e)return!1;if(t.compareDocumentPosition)return 0!==(16&e.compareDocumentPosition(t));for(;t=t.parentNode;)if(t===e)return!0;return!1},descendantOf:function(e,t){return e!==t&&this.isAncestorOf(e,t)},firstElementChild:function(e){if(!e)return null;if("firstElementChild"in e)return e.firstElementChild;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t},lastElementChild:function(e){if(!e)return null;if("lastElementChild"in e)return e.lastElementChild;for(var t=e.lastChild;t&&1!==t.nodeType;)t=t.previousSibling;return t},nextElementSibling:function(e){var t=null;if(!e)return t;if("nextElementSibling"in e)return e.nextElementSibling;for(t=e.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t},previousElementSibling:function(e){var t=null;if(!e)return t;if("previousElementSibling"in e)return e.previousElementSibling;for(t=e.previousSibling;t&&1!==t.nodeType;)t=t.previousSibling;return t},elementWidth:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetWidth},elementHeight:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetHeight},elementLeft:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetLeft},elementTop:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.offsetTop},elementDimensions:function(e){return"string"==typeof e&&(e=document.getElementById(e)),[e.offsetWidth,e.offsetHeight]},clonePosition:function(e,t){return e.style.top=this.offsetTop(t)+"px",e.style.left=this.offsetLeft(t)+"px",e},ellipsizeText:function(e){if(e=s$(e))for(;e&&e.scrollHeight>e.offsetHeight+8;)e.textContent=e.textContent.replace(/(\s+\S+)\s*$/,replace||"…")},findUpwardsByClass:function(e,t){for(var n=RegExp("(^|\\s)"+t+"(\\s|$)");;){if(e.className!==void 0&&n.test(e.className))return e;if(e=e.parentNode,!e||1!==e.nodeType)return!1}},findUpwardsByTag:function(e,t){for(;;){if(e&&e.nodeName.toUpperCase()===t.toUpperCase())return e;if(e=e.parentNode,!e||1!==e.nodeType)return!1}},findUpwardsById:function(e,t){for(;;){if(e.id!==void 0&&e.id===t)return e;if(e=e.parentNode,!e||1!==e.nodeType)return!1}},getChildrenText:function(e,t){var n,i,s,o=e.childNodes,r=o.length,a="";if(!e)return a;for(i=0;r>i;++i)n=o[i],n&&3===n.nodeType&&(s=this._trimString(n.data+""),s.length>0?(a+=s,t&&e.removeChild(n)):e.removeChild(n));return a},_trimString:function(e){return String.prototype.trim?e.trim():e.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(e){for(var t=s$(e),n=[],i=0;t.options.length>i;++i)n.push(t.options[i].value);return n},_normalizeData:function(e){for(var t,n=[],i=0,s=e.length;s>i;++i)t=e[i],t instanceof Array?1===t.length&&t.push(t[0]):t=[t,t],n.push(t);return n},fillSelect:function(e,t,n,i){var s=s$(e);if(s){s.innerHTML="";var o,r;n||(r=document.createElement("option"),r.setAttribute("value",""),s.appendChild(r)),t=SAPO.Dom.Element._normalizeData(t);for(var a=0,l=t.length;l>a;++a)o=t[a],r=document.createElement("option"),r.setAttribute("value",o[0]),o.length>2&&r.setAttribute("extra",o[2]),r.appendChild(document.createTextNode(o[1])),o[0]===i&&r.setAttribute("selected","selected"),s.appendChild(r)}},fillSelect2:function(e,t){e=s$(e),e.innerHTML="";var n={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!t)throw"param opts is a requirement!";if(!t.data)throw"opts.data is a requirement!";t=SAPO.extendObj(n,t);var i,s,o=document.createElement("optgroup");o.setAttribute("label",t.optionsGroupLabel),t.data=SAPO.Dom.Element._normalizeData(t.data),t.skipCreate||t.data.unshift(["$create$",t.createLabel]),t.skipEmpty||t.data.unshift(["",t.emptyLabel]);for(var r=0,a=t.data.length;a>r;++r)s=t.data[r],i=document.createElement("option"),i.setAttribute("value",s[0]),i.appendChild(document.createTextNode(s[1])),s[0]===t.defaultValue&&i.setAttribute("selected","selected"),""===s[0]||"$create$"===s[0]?e.appendChild(i):o.appendChild(i);var l=function(e){var t=e[e.length-1][0];return""===t||"$create$"===t};l(t.data)&&(i=document.createElement("option"),i.setAttribute("value","$dummy$"),i.setAttribute("disabled","disabled"),i.appendChild(document.createTextNode(t.emptyOptionsGroupLabel)),o.appendChild(i)),e.appendChild(o);var h=function(t,n){var i=e.options[e.options.length-1];i.getAttribute("disabled")&&i.parentNode.removeChild(i),i=document.createElement("option"),i.setAttribute("value",t),i.appendChild(document.createTextNode(n)),o.appendChild(i),e.options[e.options.length-1].setAttribute("selected",!0)};t.skipCreate||(e.onchange=function(){"$create$"===e.value&&"function"==typeof t.onCreate&&t.onCreate(e,h)})},fillRadios:function(e,t,n,i,s,o){var r=s$(e);for(r=r.nextSibling;r&&1!==r.nodeType;)r=r.nextSibling;var a=document.createElement("span");r?r.parentNode.insertBefore(a,r):s$(e).appendChild(a),n=SAPO.Dom.Element._normalizeData(n),"]"!==t.substring(t.length-1)&&(t+="[]");var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",t),h.setAttribute("value",""),a.appendChild(h),o&&a.appendChild(document.createElement(o)));for(var c=0;n.length>c;++c)l=n[c],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",t),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),o&&a.appendChild(document.createElement(o)),l[0]===s&&(h.checked=!0);return a},fillChecks:function(e,t,n,i,s){var o=s$(e);for(o=o.nextSibling;o&&1!==o.nodeType;)o=o.nextSibling;var r=document.createElement("span");o?o.parentNode.insertBefore(r,o):s$(e).appendChild(r),n=SAPO.Dom.Element._normalizeData(n),"]"!==t.substring(t.length-1)&&(t+="[]");for(var a,l,h=0;n.length>h;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",t),l.setAttribute("value",a[0]),r.appendChild(l),r.appendChild(document.createTextNode(a[1])),s&&r.appendChild(document.createElement(s)),a[0]===i&&(l.checked=!0);return r},parentIndexOf:function(e,t){for(var n,i=0,s=0,o=e.childNodes.length;o>s;++s)if(n=e.childNodes[s],1===n.nodeType){if(n===t)return i;++i}return-1},nextSiblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,i=SAPO.Dom.Element.parentIndexOf(e.parentNode,e),s=++i,o=n.length;o>s;s++)t.push(n[s]);return t}return[]},previousSiblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,i=SAPO.Dom.Element.parentIndexOf(e.parentNode,e),s=0,o=i;o>s;s++)t.push(n[s]);return t}return[]},siblings:function(e){if("string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e&&null!==e&&e.nodeType&&1===e.nodeType){for(var t=[],n=e.parentNode.children,i=0,s=n.length;s>i;i++)e!==n[i]&&t.push(n[i]);return t}return[]},childElementCount:function(e){return e=s$(e),"childElementCount"in e?e.childElementCount:e?this.siblings(e).length+1:0},appendHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;for(var i=n.children,s=0;i.length>s;s++)e.appendChild(i[s])},prependHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;for(var i=e.firstChild,s=n.children,o=s.length-1;o>=0;o--)e.insertBefore(s[o],i),i=e.firstChild},htmlToFragment:function(e){return this.htmlToFragment="function"==typeof document.createRange&&"function"==typeof Range.prototype.createContextualFragment?function(e){var t;return"string"!=typeof e?document.createDocumentFragment():(t=document.createRange(),t.selectNode(document.body),t.createContextualFragment(e))}:function(e){var t,n,i=document.createDocumentFragment();if("string"!=typeof e)return i;for(t=document.createElement("div"),t.innerHTML=e;n=t.firstChild;)i.appendChild(n);return i},this.htmlToFragment.call(this,e)},data:function(e){if("object"!=typeof e&&"string"!=typeof e)throw"[SAPO.Dom.Element.data] :: Invalid selector defined";if("object"==typeof e)this._element=e;else{if(this._element=SAPO.Dom.Selector.select(e),0>=this._element.length)throw"[SAPO.Dom.Element.data] :: Can't find any element with the specified selector";this._element=this._element[0]}var t,n,i,s={},o=this._element.dataset||this._element.attributes||{};for(t in o)if(!("hasOwnProperty"in o&&!o.hasOwnProperty(t)||o[t]===void 0||"object"==typeof o[t]&&(t=o[t].name||t,(o[t].name||o[t].nodeValue)&&0!==t.indexOf("data-")||!(o[t].nodeValue||o[t].value||o[t])))){if(n=t.replace("data-",""),-1!==n.indexOf("-")){for(n=n.split("-"),i=1;n.length>i;i+=1)n[i]=n[i].substr(0,1).toUpperCase()+n[i].substr(1);n=n.join("")}s[n]=o[t].nodeValue||o[t].value||o[t],("true"===s[n]||"false"===s[n])&&(s[n]="true"===s[n])}return s},moveCursorTo:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else{var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}},SAPO.namespace("Dom"),SAPO.Dom.Event={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,element:function(e){var t=e.target||"mouseout"==e.type&&e.fromElement||"mouseleave"==e.type&&e.fromElement||"mouseover"==e.type&&e.toElement||"mouseenter"==e.type&&e.toElement||e.srcElement||null;return!t||3!=t.nodeType&&4!=t.nodeType?t:t.parentNode},relatedTarget:function(e){var t=e.relatedTarget||"mouseout"==e.type&&e.toElement||"mouseleave"==e.type&&e.toElement||"mouseover"==e.type&&e.fromElement||"mouseenter"==e.type&&e.fromElement||null;return!t||3!=t.nodeType&&4!=t.nodeType?t:t.parentNode},findElement:function(e,t,n){for(var i=this.element(e);;){if(i.nodeName.toLowerCase()===t.toLowerCase())return i;if(i=i.parentNode,!i)return n?!1:document;if(!i.parentNode)return n?!1:document}},fire:function(e,t,n){e=s$(e);var i,s;if(s=document.createEvent?{DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0,focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0,wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0,DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:{onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0,onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0,ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0,onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0,onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0},null!==e){e==document&&document.createEvent&&!e.dispatchEvent&&(e=document.documentElement),document.createEvent?(i=document.createEvent("HTMLEvents"),s[t]===void 0?i.initEvent("dataavailable",!0,!0):i.initEvent(t,!0,!0)):(i=document.createEventObject(),i.eventType=s["on"+t]===void 0?"ondataavailable":"on"+t),i.eventName=t,i.memo=n||{};try{if(document.createEvent)e.dispatchEvent(i);else{if(!e.fireEvent)return;e.fireEvent(i.eventType,i)}}catch(o){}return i}},observe:function(e,t,n){if(e=s$(e),null!==e){if(-1!=t.indexOf(":")||"hashchange"==t&&e.attachEvent&&!window.onhashchange){var i=n;n=function(e,t,n){(e.eventName===t||SAPO.Browser.IE&&"dom:loaded"==t)&&(window.addEventListener&&(window.event=e),n())}.bindObjEvent(this,t,i),t="dataavailable"}e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)
}},stopObserving:function(e,t,n){e=s$(e),null!==e&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n))},stop:function(e){null!==e.cancelBubble&&(e.cancelBubble=!0),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),null!==e.cancel&&(e.cancel=!0)},stopDefault:function(e){e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),null!==e.cancel&&(e.cancel=!0)},pointer:function(e){return{x:e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(e){return this.pointer(e).x},pointerY:function(e){return this.pointer(e).y},isLeftClick:function(e){if(window.addEventListener){if(0===e.button)return!0;if("touch"==e.type.substring(0,5)&&null==e.button)return!0}else if(1===e.button)return!0;return!1},isRightClick:function(e){return 2===e.button?!0:!1},isMiddleClick:function(e){if(window.addEventListener){if(1===e.button)return!0}else if(4===e.button)return!0;return!1},getCharFromKeyboardEvent:function(e,t){var n=e.keyCode,i=String.fromCharCode(n),s=e.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof t&&(s=t),s?i:i.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}},SAPO.namespace("Dom"),SAPO.Dom.Loaded={version:"1.1",_cbQueue:[],run:function(e,t){t||(t=e,e=window),this._win=e,this._doc=e.document,this._root=this._doc.documentElement,this._done=!1,this._top=!0,this._handlers={checkState:this._checkState.bindObjEvent(this),poll:this._poll.bindObj(this)};var n=this._doc.addEventListener;this._add=n?"addEventListener":"attachEvent",this._rem=n?"removeEventListener":"detachEvent",this._pre=n?"":"on",this._det=n?"DOMContentLoaded":"onreadystatechange",this._wet=this._pre+"load";var i=this._handlers.checkState;if("complete"===this._doc.readyState)t.call(this._win,"lazy");else if(this._cbQueue.push(t),this._doc[this._add](this._det,i),this._win[this._add](this._wet,i),!n&&this._root.doScroll){try{this._top=!this._win.frameElement}catch(s){}this._top&&this._poll()}},_checkState:function(e){if(e&&("readystatechange"!==e.type||"complete"===this._doc.readyState)){var t="load"===e.type?this._win:this._doc;t[this._rem](this._pre+e.type,this._handlers.checkState,!1),this._ready()}},_poll:function(){try{this._root.doScroll("left")}catch(e){return setTimeout(this._handlers.poll,50)}this._ready()},_ready:function(){if(!this._done){this._done=!0;for(var e=0;this._cbQueue.length>e;++e)this._cbQueue[e].call(this._win)}}},SAPO.namespace("Dom"),function(e,t){function n(e,t,n,i){n=n||[],t=t||P;var s,o,r,a,l=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(r=C(t),!r&&!i&&(s=tt.exec(e)))if(a=s[1]){if(9===l){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&S(t,o)&&o.id===a)return n.push(o),n}else{if(s[2])return j.apply(n,F.call(t.getElementsByTagName(e),0)),n;if((a=s[3])&&dt&&t.getElementsByClassName)return j.apply(n,F.call(t.getElementsByClassName(a),0)),n}return f(e.replace(K,"$1"),t,n,i,r)}function i(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function s(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function o(e){return H(function(t){return t=+t,H(function(n,i){for(var s,o=e([],n.length,t),r=o.length;r--;)n[s=o[r]]&&(n[s]=!(i[s]=n[s]))})})}function r(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}function a(e,t){var i,s,o,r,a,l,h,c=z[N][e];if(c)return t?0:c.slice(0);for(a=e,l=[],h=y.preFilter;a;){(!i||(s=Q.exec(a)))&&(s&&(a=a.slice(s[0].length)),l.push(o=[])),i=!1,(s=Z.exec(a))&&(o.push(i=new D(s.shift())),a=a.slice(i.length),i.type=s[0].replace(K," "));for(r in y.filter)!(s=rt[r].exec(a))||h[r]&&!(s=h[r](s,P,!0))||(o.push(i=new D(s.shift())),a=a.slice(i.length),i.type=r,i.matches=s);if(!i)break}return t?a.length:a?n.error(e):z(e,l).slice(0)}function l(e,t,n){var i=t.dir,s=n&&"parentNode"===t.dir,o=I++;return t.first?function(t,n,o){for(;t=t[i];)if(s||1===t.nodeType)return e(t,n,o)}:function(t,n,r){if(r){for(;t=t[i];)if((s||1===t.nodeType)&&e(t,n,r))return t}else for(var a,l=T+" "+o+" ",h=l+g;t=t[i];)if(s||1===t.nodeType){if((a=t[N])===h)return t.sizset;if("string"==typeof a&&0===a.indexOf(l)){if(t.sizset)return t}else{if(t[N]=h,e(t,n,r))return t.sizset=!0,t;t.sizset=!1}}}}function h(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function c(e,t,n,i,s){for(var o,r=[],a=0,l=e.length,h=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,s))&&(r.push(o),h&&t.push(a));return r}function d(e,t,n,i,s,o){return i&&!i[N]&&(i=d(i)),s&&!s[N]&&(s=d(s,o)),H(function(o,r,a,l){if(!o||!s){var h,d,u,m=[],f=[],_=r.length,g=o||p(t||"*",a.nodeType?[a]:a,[],o),v=!e||!o&&t?g:c(g,m,e,a,l),y=n?s||(o?e:_||i)?[]:r:v;if(n&&n(v,y,a,l),i)for(u=c(y,f),i(u,[],a,l),h=u.length;h--;)(d=u[h])&&(y[f[h]]=!(v[f[h]]=d));if(o)for(h=e&&y.length;h--;)(d=y[h])&&(o[m[h]]=!(r[m[h]]=d));else y=c(y===r?y.splice(_,y.length):y),s?s(null,r,y,l):j.apply(r,y)}})}function u(e){for(var t,n,i,s=e.length,o=y.relative[e[0].type],r=o||y.relative[" "],a=o?1:0,c=l(function(e){return e===t},r,!0),m=l(function(e){return R.call(t,e)>-1},r,!0),p=[function(e,n,i){return!o&&(i||n!==w)||((t=n).nodeType?c(e,n,i):m(e,n,i))}];s>a;a++)if(n=y.relative[e[a].type])p=[l(h(p),n)];else{if(n=y.filter[e[a].type].apply(null,e[a].matches),n[N]){for(i=++a;s>i&&!y.relative[e[i].type];i++);return d(a>1&&h(p),a>1&&e.slice(0,a-1).join("").replace(K,"$1"),n,i>a&&u(e.slice(a,i)),s>i&&u(e=e.slice(i)),s>i&&e.join(""))}p.push(n)}return h(p)}function m(e,t){var i=t.length>0,s=e.length>0,o=function(r,a,l,h,d){var u,m,p,f=[],_=0,v="0",b=r&&[],C=null!=d,S=w,O=r||s&&y.find.TAG("*",d&&a.parentNode||a),x=T+=null==S?1:Math.E;for(C&&(w=a!==P&&a,g=o.el);null!=(u=O[v]);v++){if(s&&u){for(m=0;p=e[m];m++)if(p(u,a,l)){h.push(u);break}C&&(T=x,g=++o.el)}i&&((u=!p&&u)&&_--,r&&b.push(u))}if(_+=v,i&&v!==_){for(m=0;p=t[m];m++)p(b,f,a,l);if(r){if(_>0)for(;v--;)b[v]||f[v]||(f[v]=L.call(h));f=c(f)}j.apply(h,f),C&&!r&&f.length>0&&_+t.length>1&&n.uniqueSort(h)}return C&&(T=x,w=S),b};return o.el=0,i?H(o):o}function p(e,t,i,s){for(var o=0,r=t.length;r>o;o++)n(e,t[o],i,s);return i}function f(e,t,n,i,s){var o,r,l,h,c,d=a(e);if(d.length,!i&&1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(l=r[0]).type&&9===t.nodeType&&!s&&y.relative[r[1].type]){if(t=y.find.ID(l.matches[0].replace(ot,""),t,s)[0],!t)return n;e=e.slice(r.shift().length)}for(o=rt.POS.test(e)?-1:r.length-1;o>=0&&(l=r[o],!y.relative[h=l.type]);o--)if((c=y.find[h])&&(i=c(l.matches[0].replace(ot,""),nt.test(r[0].type)&&t.parentNode||t,s))){if(r.splice(o,1),e=i.length&&r.join(""),!e)return j.apply(n,F.call(i,0)),n;break}}return O(e,d)(i,t,s,n,nt.test(e)),n}function _(){}var g,v,y,b,C,S,O,x,E,w,A=!0,k="undefined",N=("sizcache"+Math.random()).replace(".",""),D=String,P=e.document,M=P.documentElement,T=0,I=0,L=[].pop,j=[].push,F=[].slice,R=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},H=function(e,t){return e[N]=null==t||t,e},U=function(){var e={},t=[];return H(function(n,i){return t.push(n)>y.cacheLength&&delete e[t.shift()],e[n]=i},e)},B=U(),z=U(),$=U(),q="[\\x20\\t\\r\\n\\f]",Y="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=Y.replace("w","w#"),W="([*^$|!~]?=)",X="\\["+q+"*("+Y+")"+q+"*(?:"+W+q+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+q+"*\\]",G=":("+Y+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",J=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)",K=RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g"),Q=RegExp("^"+q+"*,"+q+"*"),Z=RegExp("^"+q+"*([\\x20\\t\\r\\n\\f>+~])"+q+"*"),et=RegExp(G),tt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,nt=/[\x20\t\r\n\f]*[+~]/,it=/h\d/i,st=/input|select|textarea|button/i,ot=/\\(?!\\)/g,rt={ID:RegExp("^#("+Y+")"),CLASS:RegExp("^\\.("+Y+")"),NAME:RegExp("^\\[name=['\"]?("+Y+")['\"]?\\]"),TAG:RegExp("^("+Y.replace("w","w*")+")"),ATTR:RegExp("^"+X),PSEUDO:RegExp("^"+G),POS:RegExp(J,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),needsContext:RegExp("^"+q+"*[>+~]|"+J,"i")},at=function(e){var t=P.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},lt=at(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),ht=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==k&&"#"===e.firstChild.getAttribute("href")}),ct=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),dt=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ut=at(function(e){e.id=N+0,e.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",M.insertBefore(e,M.firstChild);var t=P.getElementsByName&&P.getElementsByName(N).length===2+P.getElementsByName(N+0).length;return v=!P.getElementById(N),M.removeChild(e),t});try{F.call(M.childNodes,0)[0].nodeType}catch(mt){F=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},b=n.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i];i++)n+=b(t);return n},C=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=n.contains=M.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:M.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,i=C(e);return i||(t=t.toLowerCase()),(n=y.attrHandle[t])?n(e):i||ct?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},y=n.selectors={cacheLength:50,createPseudo:H,match:rt,attrHandle:ht?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:v?function(e,t,n){if(typeof t.getElementById!==k&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==k&&!i){var s=n.getElementById(e);return s?s.id===e||typeof s.getAttributeNode!==k&&s.getAttributeNode("id").value===e?[s]:t:[]}},TAG:lt?function(e,n){return typeof n.getElementsByTagName!==k?n.getElementsByTagName(e):t}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var i,s=[],o=0;i=n[o];o++)1===i.nodeType&&s.push(i);return s}return n},NAME:ut&&function(e,n){return typeof n.getElementsByName!==k?n.getElementsByName(name):t},CLASS:dt&&function(e,n,i){return typeof n.getElementsByClassName===k||i?t:n.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ot,""),e[3]=(e[4]||e[5]||"").replace(ot,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return rt.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(et.test(t)&&(n=a(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:v?function(e){return e=e.replace(ot,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(ot,""),function(t){var n=typeof t.getAttributeNode!==k&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(ot,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=B[N][e];return t||(t=B(e,RegExp("(^|"+q+")"+e+"("+q+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==k&&e.getAttribute("class")||"")}},ATTR:function(e,t,i){return function(s){var o=n.attr(s,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.substr(o.length-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i){return"nth"===e?function(e){var t,s,o=e.parentNode;if(1===n&&0===i)return!0;if(o)for(s=0,t=o.firstChild;t&&(1!==t.nodeType||(s++,e!==t));t=t.nextSibling);return s-=i,s===n||0===s%n&&s/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,s=y.pseudos[e]||y.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return s[N]?s(t):s.length>1?(i=[e,e,"",t],y.setFilters.hasOwnProperty(e.toLowerCase())?H(function(e,n){for(var i,o=s(e,t),r=o.length;r--;)i=R.call(e,o[r]),e[i]=!(n[i]=o[r])}):function(e){return s(e,0,i)}):s}},pseudos:{not:H(function(e){var t=[],n=[],i=O(e.replace(K,"$1"));return i[N]?H(function(e,t,n,s){for(var o,r=i(e,null,s,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,s,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:H(function(e){return function(t){return n(e,t).length>0}}),contains:H(function(e){return function(t){return(t.textContent||t.innerText||b(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!y.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return it.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:s("submit"),reset:s("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return st.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:o(function(){return[0]}),last:o(function(e,t){return[t-1]}),eq:o(function(e,t,n){return[0>n?n+t:n]}),even:o(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:o(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:o(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:o(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}},x=M.compareDocumentPosition?function(e,t){return e===t?(E=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return E=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,s=[],o=[],a=e.parentNode,l=t.parentNode,h=a;if(a===l)return r(e,t);if(!a)return-1;if(!l)return 1;for(;h;)s.unshift(h),h=h.parentNode;for(h=l;h;)o.unshift(h),h=h.parentNode;n=s.length,i=o.length;for(var c=0;n>c&&i>c;c++)if(s[c]!==o[c])return r(s[c],o[c]);return c===n?r(e,o[c],-1):r(s[c],t,1)},[0,0].sort(x),A=!E,n.uniqueSort=function(e){var t,n=1;if(E=A,e.sort(x),E)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},O=n.compile=function(e,t){var n,i=[],s=[],o=$[N][e];if(!o){for(t||(t=a(e)),n=t.length;n--;)o=u(t[n]),o[N]?i.push(o):s.push(o);o=$(e,m(s,i))}return o},P.querySelectorAll&&function(){var e,t=f,i=/'|\\/g,s=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],r=[":active",":focus"],l=M.matchesSelector||M.mozMatchesSelector||M.webkitMatchesSelector||M.oMatchesSelector||M.msMatchesSelector;at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||o.push("\\["+q+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||o.push(":checked")}),at(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&o.push("[*^$]="+q+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=RegExp(o.join("|")),f=function(e,n,s,r,l){if(!(r||l||o&&o.test(e))){var h,c,d=!0,u=N,m=n,p=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(h=a(e),(d=n.getAttribute("id"))?u=d.replace(i,"\\$&"):n.setAttribute("id",u),u="[id='"+u+"'] ",c=h.length;c--;)h[c]=u+h[c].join("");m=nt.test(e)&&n.parentNode||n,p=h.join(",")}if(p)try{return j.apply(s,F.call(m.querySelectorAll(p),0)),s}catch(f){}finally{d||n.removeAttribute("id")}}return t(e,n,s,r,l)},l&&(at(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),r.push("!=",G)}catch(n){}}),r=RegExp(r.join("|")),n.matchesSelector=function(t,i){if(i=i.replace(s,"='$1']"),!(C(t)||r.test(i)||o&&o.test(i)))try{var a=l.call(t,i);if(a||e||t.document&&11!==t.document.nodeType)return a}catch(h){}return n(i,null,null,[t]).length>0})}(),y.pseudos.nth=y.pseudos.eq,y.filters=_.prototype=y.pseudos,y.setFilters=new _,SAPO.Dom.Selector={},SAPO.Dom.Selector.select=n,SAPO.Dom.Selector.matches=n.matches,SAPO.Dom.Selector.find=function(){throw"SAPO.Dom.Selector.find() no longer exists. Use SAPO.Dom.Selector.select() instead or use version 0.1"}}(window),SAPO.namespace("Utility"),Array.prototype.forEach||(Array.prototype.forEach=function forEach(e,t){var n,i,s,o,r;if(null===this||void 0===this)throw new TypeError("this is null or not defined");if(n=Object(this),i=n.length>>>0,"[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(s=t),o=0;i>o;)Object.prototype.hasOwnProperty.call(n,o)&&(r=n[o],e.call(s,r,o,n)),++o}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,i,s;(null===this||void 0===this)&&new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),i=Array(r),s=0;r>s;){var a,l;s in o&&(a=o[s],l=e.call(n,a,s,o),i[s]=l),++s}return i}),SAPO.Utility.Array={inArray:function(e,t){if("object"==typeof t)for(var n=0,i=t.length;i>n;++n)if(t[n]===e)return!0;return!1},sortMulti:function(e,t){if(e===void 0||e.constructor!==Array)return!1;if("string"!=typeof t)return e.sort();if(e.length>0){if(e[0][t]===void 0)return!1;e.sort(function(e,n){var i=e[t],s=n[t];return s>i?-1:i>s?1:0})}return e},keyValue:function(e,t,n){if(e!==void 0&&"object"==typeof t&&this.inArray(e,t)){for(var i=[],s=0,o=t.length;o>s;++s)if(t[s]===e){if(n!==void 0&&n===!0)return s;i.push(s)}return i}return!1},shuffle:function(e){if(e!==void 0&&e.constructor!==Array)return!1;for(var t=e.length,n=!1,i=!1;t--;)i=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[i],e[i]=n;return e},each:function(e,t){var n=e.slice(0),i=n.length,s=Math.floor(i/8),o=i%8,r=0;if(o>0)do t(n[r++],r-1,e);while(--o>0);if(0===s)return e;do t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e),t(n[r++],r-1,e);while(--s>0);return e},intersect:function(e,t){if(!e||!t||e instanceof Array==!1||t instanceof Array==!1)return[];for(var n=[],i=0,s=e.length;s>i;++i)for(var o=0,r=t.length;r>o;++o)e[i]===t[o]&&n.push(e[i]);return n},convert:function(e){return Array.prototype.slice.call(e||[],0)},insert:function(e,t,n){e.splice(t,0,n)}},SAPO.namespace("Utility"),SAPO.Utility.Date={_months:function(e){var t=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e]},_iMonth:function(e){return Number(e)?+e-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"março":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[e.toLowerCase()]},_wDays:function(e){var t=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];return t[e]},_iWeek:function(e){return Number(e)?+e||7:{segunda:1,seg:1,"terça":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"sábado":6,"sáb":6,domingo:7,dom:7}[e.toLowerCase()]},_daysInMonth:function(e,t){var n;return n=1===e||3===e||5===e||7===e||8===e||10===e||12===e?31:4===e||6===e||9===e||11===e?30:0===t%400||0===t%4&&0!==t%100?29:28},get:function(e,t){(e===void 0||""===e)&&(e="Y-m-d");var n,i=e.split(""),s=Array(i.length),o="\\";n=t===void 0?new Date:"number"==typeof t?new Date(1e3*t):new Date(t);for(var r,a,l,h=0;i.length>h;h++)switch(i[h]){case o:s[h]=i[h+1],h++;break;case"d":var c=n.getDate();s[h]=(c+"").length>1?c:"0"+c;break;case"D":s[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":s[h]=n.getDate();break;case"l":s[h]=this._wDays(n.getDay());break;case"N":s[h]=n.getDay()||7;break;case"S":var d=n.getDate(),u=["st","nd","rd"],m="";s[h]=d>=11&&13>=d?"th":(m=u[(d+"").substr(-1)-1])?m:"th";break;case"w":s[h]=n.getDay();break;case"z":r=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),s[h]=Math.floor((a-r)/864e5);break;case"W":var p=new Date(n.getFullYear(),0,1);r=p.getDay()||7;var f=Math.floor((n-p)/864e5+1);s[h]=Math.ceil((f-(8-r))/7)+1;break;case"F":s[h]=this._months(n.getMonth());break;case"m":var _=n.getMonth()+1+"";s[h]=_.length>1?_:"0"+_;break;case"M":s[h]=this._months(n.getMonth()).substring(0,3);break;case"n":s[h]=n.getMonth()+1;break;case"t":s[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();s[h]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":s[h]=n.getFullYear();break;case"y":s[h]=(n.getFullYear()+"").substring(2);break;case"a":s[h]=12>n.getHours()?"am":"pm";break;case"A":s[h]=12>n.getHours?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),s[h]=12>=l?l:l-12;break;case"G":s[h]=n.getHours()+"";break;case"h":l=n.getHours()+"",l=12>=l?l:l-12,s[h]=l.length>1?l:"0"+l;break;case"H":l=n.getHours()+"",s[h]=l.length>1?l:"0"+l;break;case"i":var v=n.getMinutes()+"";s[h]=v.length>1?v:"0"+v;break;case"s":var y=n.getSeconds()+"";s[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":r=new Date(n.getFullYear(),0,1),s[h]=n.getTimezoneOffset()!==r.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),C=b%60;l=-1*((b-C)/60)+"","-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),s[h]=l+C+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":s[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var S=this._wDays(n.getDay()).substr(0,3),O=this._months(n.getMonth()).substr(0,3);s[h]=S+", "+n.getDate()+" "+O+this.get(" Y H:i:s O",n);break;case"U":s[h]=Math.floor(n.getTime()/1e3);break;default:s[h]=i[h]}return s.join("")},set:function(e,t){if(void 0!==t){(e===void 0||""===e)&&(e="Y-m-d");for(var n=e.split(""),i=Array(n.length),s="\\",o={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},r=0,a=0;n.length>a;a++)switch(n[a]){case s:i[a]=n[a+1],a++;break;case"d":i[a]="(\\d{2})",o.day={original:a,match:r++};break;case"j":i[a]="(\\d{1,2})",o.day={original:a,match:r++};break;case"D":i[a]="([\\wá]{3})",o.dayW={original:a,match:r++};break;case"l":i[a]="([\\wá]{5,7})",o.dayW={original:a,match:r++};break;case"N":i[a]="(\\d)",o.dayW={original:a,match:r++};break;case"w":i[a]="(\\d)",o.dayW={original:a,match:r++};break;case"S":i[a]="\\w{2}";break;case"z":i[a]="(\\d{1,3})",o.dayY={original:a,match:r++};break;case"W":i[a]="(\\d{1,2})",o.week={original:a,match:r++};break;case"F":i[a]="([\\wç]{4,9})",o.month={original:a,match:r++};break;case"M":i[a]="(\\w{3})",o.month={original:a,match:r++};break;case"m":i[a]="(\\d{2})",o.month={original:a,match:r++};break;case"n":i[a]="(\\d{1,2})",o.month={original:a,match:r++};break;case"t":i[a]="\\d{2}";break;case"L":i[a]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":i[a]="(\\d{4})",o.year={original:a,match:r++};break;case"y":i[a]="(\\d{2})",(o.year===void 0||"Y"!==n[o.year.original])&&(o.year={original:a,match:r++});break;case"a":i[a]="(am|pm)",o.ampm={original:a,match:r++};break;case"A":i[a]="(AM|PM)",o.ampm={original:a,match:r++};break;case"B":throw'"B" not implemented!';case"g":i[a]="(\\d{1,2})",o.hourD={original:a,match:r++};break;case"G":i[a]="(\\d{1,2})",o.hour={original:a,match:r++};break;case"h":i[a]="(\\d{2})",o.hourD={original:a,match:r++};break;case"H":i[a]="(\\d{2})",o.hour={original:a,match:r++};break;case"i":i[a]="(\\d{2})",o.min={original:a,match:r++};break;case"s":i[a]="(\\d{2})",o.sec={original:a,match:r++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":i[a]="\\d";break;case"O":i[a]="([-+]\\d{4})",o.diffH={original:a,match:r++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":i[a]="(\\-?\\d{1,5})",o.diffM={original:a,match:r++};break;case"c":throw'"c" not implemented!';case"r":i[a]="([\\wá]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",o.date={original:a,match:r++};break;case"U":i[a]="(\\d{1,13})",o.date={original:a,match:r++};break;default:i[a]=n[a]}var l=RegExp(i.join(""));try{var h=t.match(l);if(!h)return}catch(c){return}var d=o.date!==void 0,u=o.year!==void 0,m=o.dayY!==void 0,p=o.day!==void 0,f=o.month!==void 0,_=f&&p,g=!f&&p,v=o.dayW!==void 0,y=o.week!==void 0,b=y&&v,C=!y&&v,S=m||_||!u&&g||b||!u&&C,O=!(u||m||p||f||v||y),x=o.hourD!==void 0&&o.ampm!==void 0,E=o.hour!==void 0,w=x||E,A=o.min!==void 0,k=o.sec!==void 0,N=o.msec!==void 0,D=!O||w,P=D||A,M=o.diffM!==void 0,T=o.diffH!==void 0;if(d){if("U"===n[o.date.original])return new Date(1e3*+h[o.date.match+1]);var I=h[o.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/),L=+I[4]+ +I[7].slice(0,3),j=+I[5]+60*((I[7].slice(0,1)+I[7].slice(3))/100);return new Date(I[3],this._iMonth(I[2]),I[1],L,j,I[6])}var F,R,H,U,L,j,B,z,$,q=new Date;if(S||O){if(S){if(u){var Y=q.getFullYear()-50+"";F=h[o.year.match+1],"y"==n[o.year.original]&&(F=+Y.slice(0,2)+(F>=Y.slice(2)?0:1)+F)}else F=q.getFullYear();if(m)R=0,H=h[o.dayY.match+1];else if(p)R=f?this._iMonth(h[o.month.match+1]):q.getMonth(),H=h[o.day.match+1];else{R=0;var V;V=y?h[o.week.match+1]:this.get("W",q),H=7*(V-2)+(8-(new Date(F,0,1).getDay()||7))+this._iWeek(h[o.week.match+1])}if(0==R&&H>31){var W=new Date(F,R,H);R=W.getMonth(),H=W.getDate()}}else F=q.getFullYear(),R=q.getMonth(),H=q.getDate();return U=F+"-"+(R+1)+"-"+H+" ",L=x?+h[o.hourD.match+1]+("pm"==h[o.ampm.match+1]?12:0):E?h[o.hour.match+1]:O?q.getHours():"00",j=A?h[o.min.match+1]:D?"00":q.getMinutes(),B=k?h[o.sec.match+1]:P?"00":q.getSeconds(),z=N?h[o.msec.match+1]:"000",$=T?h[o.diffH.match+1]:M?(100*(-1*h[o.diffM.match+1]/60)+"").replace(/^(\d)/,"+$1").replace(/(^[-+])(\d{3}$)/,"$10$2"):"+0000",new Date(U+L+":"+j+":"+B+"."+z+$)}}}},function(e,t){"use strict";SAPO.namespace("Utility");var n=SAPO.Dom.Event,i=function(e,n){this._options=SAPO.extendObj({minDist:t,maxDist:t,minDuration:t,maxDuration:t,forceAxis:t,storeGesture:!1,stopEvents:!0},n||{}),this._handlers={down:this._onDown.bindObjEvent(this),move:this._onMove.bindObjEvent(this),up:this._onUp.bindObjEvent(this)},this._element=s$(e),this._init()};i._supported="ontouchstart"in document.documentElement,i.prototype={version:"0.1",_init:function(){var e=document.body;n.observe(e,"touchstart",this._handlers.down),this._options.storeGesture&&n.observe(e,"touchmove",this._handlers.move),n.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(e,t){if(e){do{if(e===t)return!0;e=e.parentNode}while(e);return!1}},_onDown:function(e){1===event.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&n.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=(new Date).valueOf(),this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(e){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&n.stop(e),e=e.changedTouches[0];var t=(new Date).valueOf(),i=.001*(t-this._t0);this._gesture.push([e.pageX,e.pageY]),this._time.push(i)}},_onUp:function(e){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents===!0&&n.stop(e),e=e.changedTouches[0],this._isOn=!1;var t=(new Date).valueOf(),i=[e.pageX,e.pageY],s=.001*(t-this._t0),o=[i[0]-this._p0[0],i[1]-this._p0[1]],r=Math.sqrt(o[0]*o[0]+o[1]*o[1]),a=Math.abs(o[0])>Math.abs(o[1])?"x":"y",l=this._options;if(!(l.minDist&&l.minDist>r||l.maxDist&&r>l.maxDist||l.minDuration&&l.minDuration>s||l.maxDuration&&s>l.maxDuration||l.forceAxis&&a!==l.forceAxis)){var h={elementId:this._element.id,duration:s,dr:o,dist:r,axis:a,target:this._target};this._options.storeGesture&&(h.gesture=this._gesture,h.time=this._time),this._options.callback(this,h)}}}},SAPO.Utility.Swipe=i}(window),SAPO.namespace("Utility"),SAPO.Utility.Url={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){var e=!1;return e=location.href},genQueryString:function(e,t){var n,i,s,o=-1!==e.indexOf("?"),r=[e];for(i in t)t.hasOwnProperty(i)&&(o?n="&":(n="?",o=!0),s=t[i],"number"==typeof s||s||(s=""),r=r.concat([n,encodeURIComponent(i),"=",encodeURIComponent(s)]));return r.join("")},getQueryString:function(e){var t;t=e&&e!==void 0?e:this.getUrl();var n={};if(t.match(/\?(.+)/i)){var i=t.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var s=i.split(/[;&]/),o=0;s.length>o;o++){var r=s[o].split("=");n[decodeURIComponent(r[0])]=r[1]!==void 0&&r[1]?decodeURIComponent(r[1]):!1}}return n},getAnchor:function(e){var t;t=e&&e!==void 0?e:this.getUrl();var n=!1;return t.match(/#(.+)/)&&(n=t.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(e){var t;t=e&&e!==void 0?e:this.getUrl();var n={};if(t.match(/#(.+)/i)){var i=t.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var s=i.split(/[;&]/),o=0;s.length>o;o++){var r=s[o].split("=");n[decodeURIComponent(r[0])]=r[1]!==void 0&&r[1]?decodeURIComponent(r[1]):!1}}return n},parseUrl:function(e){var t={};if(e&&e!==void 0&&"string"==typeof e){if(e.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;e.match(n)&&(t.scheme=e.replace(n,"$1"),t.host=e.replace(n,"$2"),t.path="/"+e.replace(n,"$3"),t.query=e.replace(n,"$4")||!1,t.fragment=e.replace(n,"$5")||!1)}else{var i=RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),s=RegExp("^([^\\?]+)\\?([^#]+)#?","i"),o=RegExp("^([^\\?]+)\\??","i");e.match(i)?(t.scheme=!1,t.host=!1,t.path=e.replace(i,"$1"),t.query=e.replace(i,"$2"),t.fragment=e.replace(i,"$3")):e.match(s)?(t.scheme=!1,t.host=!1,t.path=e.replace(s,"$1"),t.query=e.replace(s,"$2"),t.fragment=!1):e.match(o)&&(t.scheme=!1,t.host=!1,t.path=e.replace(o,"$1"),t.query=!1,t.fragment=!1)}if(t.host){var r=RegExp("^(.*)\\:(\\d+)$","i");
if(t.host.match(r)){var a=t.host;t.host=a.replace(r,"$1"),t.port=a.replace(r,"$2")}else t.port=!1;if(t.host.match(/@/i)){var l=t.host;t.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(t.user=h.split(":")[0],t.pass=h.split(":")[1]):(t.user=h,t.pass=!1)}}}return t},currentScriptElement:function(e){var t=document.getElementsByTagName("script");if(e===void 0)return t.length>0?t[t.length-1]:!1;for(var n=!1,i=RegExp(""+e,"i"),s=0,o=t.length;o>s;s++)if(n=t[s],i.test(n.src))return n;return!1},base64Encode:function(e){if(!SAPO.Utility.String||SAPO.Utility.String===void 0)throw"SAPO.Utility.Url.base64Encode depends of SAPO.Utility.String, which has not been referred.";for(var t,n,i,s,o,r,a,l="",h=0,c=SAPO.Utility.String.utf8Encode(e);c.length>h;)t=c.charCodeAt(h++),n=c.charCodeAt(h++),i=c.charCodeAt(h++),s=t>>2,o=(3&t)<<4|n>>4,r=(15&n)<<2|i>>6,a=63&i,isNaN(n)?r=a=64:isNaN(i)&&(a=64),l=l+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(a);return l},base64Decode:function(e){if(!SAPO.Utility.String||SAPO.Utility.String===void 0)throw"SAPO.Utility.Url.base64Decode depends of SAPO.Utility.String, which has not been referred.";for(var t,n,i,s,o,r,a,l="",h=0,c=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c.length>h;)s=this._keyStr.indexOf(c.charAt(h++)),o=this._keyStr.indexOf(c.charAt(h++)),r=this._keyStr.indexOf(c.charAt(h++)),a=this._keyStr.indexOf(c.charAt(h++)),t=s<<2|o>>4,n=(15&o)<<4|r>>2,i=(3&r)<<6|a,l+=String.fromCharCode(t),64!==r&&(l+=String.fromCharCode(n)),64!==a&&(l+=String.fromCharCode(i));return l=SAPO.Utility.String.utf8Decode(l)}},SAPO.namespace("Utility"),SAPO.Utility.Validator={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de sôr",243:"santarém",244:"leiria",245:"portalegre",249:"torres novas",251:"valença",252:"vila nova de famalicão",253:"braga",254:"peso da régua",255:"penafiel",256:"são joão da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da raínha",263:"vila franca de xira",265:"setúbal",266:"évora",268:"estremoz",269:"santiago do cacém",271:"guarda",272:"castelo branco",273:"bragança",274:"proença-a-nova",275:"covilhã",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portimão",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do heroísmo, graciosa, são jorge, terceira",296:"ponta delgada, são miguel, santa maria",91:"rede móvel 91 (Vodafone / Yorn)",93:"rede móvel 93 (Optimus)",96:"rede móvel 96 (TMN)",92:"rede móvel 92 (TODOS)",707:"número único",760:"número único",800:"número grátis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"móvel 91",95:"móvel 95",97:"móvel 97",98:"móvel 98",99:"móvel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"móvel 91",92:"móvel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"móvel 82",84:"móvel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"móvel 7"},_isLeapYear:function(e){var t=/^\d{4}$/;return t.test(e)?e%4?!1:e%100?!0:e%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(e,t){var n=0;return n=1===e||3===e||5===e||7===e||8===e||10===e||12===e?31:4===e||6===e||9===e||11===e?30:0===t%400||0===t%4&&0!==t%100?29:28},_isValidDate:function(e,t,n){var i=/^\d{4}$/,s=/^\d{1,2}$/;return i.test(e)&&s.test(t)&&s.test(n)&&t>=1&&12>=t&&n>=1&&this._daysInMonth(t,e)>=n?!0:!1},mail:function(e){var t=RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return t.test(e)?!0:!1},url:function(e,t){if(t===void 0||t===!1){var n=RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(e)===!1&&(e="http://"+e)}var i=RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(e)===!1?!1:!0},isPTPhone:function(e){e=""+e;var t=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&t.push(n);var i=t.join("|"),s=/^(00351|\+351)/;s.test(e)&&(e=e.replace(s,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var r=/[\d]{9}/i;if(9===e.length&&r.test(e)){var a=RegExp("^("+i+")");if(a.test(e))return!0}return!1},isPortuguesePhone:function(e){return this.isPTPhone(e)},isCVPhone:function(e){e=""+e;var t=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&t.push(n);var i=t.join("|"),s=/^(00238|\+238)/;s.test(e)&&(e=e.replace(s,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var r=/[\d]{7}/i;if(7===e.length&&r.test(e)){var a=RegExp("^("+i+")");if(a.test(e))return!0}return!1},isAOPhone:function(e){e=""+e;var t=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&t.push(n);var i=t.join("|"),s=/^(00244|\+244)/;s.test(e)&&(e=e.replace(s,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var r=/[\d]{9}/i;if(9===e.length&&r.test(e)){var a=RegExp("^("+i+")");if(a.test(e))return!0}return!1},isMZPhone:function(e){e=""+e;var t=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&t.push(n);var i=t.join("|"),s=/^(00258|\+258)/;s.test(e)&&(e=e.replace(s,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var r=/[\d]{8,9}/i;if((9===e.length||8===e.length)&&r.test(e)){var a=RegExp("^("+i+")");if(a.test(e)){if(0===e.indexOf("2")&&8===e.length)return!0;if(0===e.indexOf("8")&&9===e.length)return!0}}return!1},isTLPhone:function(e){e=""+e;var t=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&t.push(n);var i=t.join("|"),s=/^(00670|\+670)/;s.test(e)&&(e=e.replace(s,""));var o=/(\s|\-|\.)+/g;e=e.replace(o,"");var r=/[\d]{7}/i;if(7===e.length&&r.test(e)){var a=RegExp("^("+i+")");if(a.test(e))return!0}return!1},isPhone:function(){var e;if(0===arguments.length)return!1;var t=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](t);throw"Invalid Country Code!"}var n;for(e=0;arguments[1].length>e;e++){if("function"!=typeof(n=this["is"+arguments[1][e].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(t))return!0}}else for(e=0;this._countryCodes.length>e;e++)if(this["is"+this._countryCodes[e]+"Phone"](t))return!0;return!1},codPostal:function(e,t,n){var i=/^(\s*\-\s*|\s+)$/,s=/^\s+|\s+$/g,o=/^[1-9]\d{3}$/,r=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(n=!!n,e=e.replace(s,""),t!==void 0){if(t=t.replace(s,""),o.test(e)&&r.test(t))return n===!0?[!0,!0]:!0}else{if(o.test(e))return n===!0?[!0,!1]:!0;var l=e.match(a);if(null!==l&&o.test(l[1])&&i.test(l[2])&&r.test(l[3]))return n===!0?[!0,!1]:!0}return n===!0?[!1,!1]:!1},isDate:function(e,t){if(this._dateParsers[e]===void 0)return!1;var n=this._dateParsers[e].year,i=this._dateParsers[e].month,s=this._dateParsers[e].day,o=this._dateParsers[e].parser,r=this._dateParsers[e].sep,a=t.match(o);if(null!==a&&a[2]===a[4]&&a[2]===r){var l=2===a[n].length?"20"+(""+a[n]):a[n];if(this._isValidDate(l,""+a[i],""+a[s]))return!0}return!1},isColor:function(e){var t,n=!1,i=/^[a-zA-Z]+$/,s=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,o=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,r=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(i.test(e)||s.test(e))return!0;var h;if(null!==(t=o.exec(e))||null!==(t=r.exec(e)))for(h=t.length;h--;){if((2===h||4===h||6===h)&&t[h]!==void 0&&""!==t[h]){if(!(t[h-1]!==void 0&&t[h-1]>=0&&100>=t[h-1]))return!1;n=!0}if(1===h||3===h||5===h&&(t[h+1]===void 0||""===t[h+1])){if(!(t[h]!==void 0&&t[h]>=0&&255>=t[h]))return!1;n=!0}}if(null!==(t=a.exec(e))||null!==(t=l.exec(e)))for(h=t.length;h--;){if(3===h||5===h){if(!(t[h-1]!==void 0&&t[h]!==void 0&&""!==t[h]&&t[h-1]>=0&&100>=t[h-1]))return!1;n=!0}if(1===h){if(!(t[h]!==void 0&&t[h]>=0&&360>=t[h]))return!1;n=!0}}return n}},SAPO.namespace("Communication"),SAPO.Communication.Ajax=function(e,t){this.init(e,t)},SAPO.Communication.Ajax.version=2.1,SAPO.Communication.Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;SAPO.Communication.Ajax.prototype={version:SAPO.Communication.Ajax.version,init:function(e,t){if(!e)throw Error("WRONG_ARGUMENTS_ERR");var n=SAPO.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},SAPO.Communication.Ajax.globalOptions);if(t&&"object"==typeof t){if(n=SAPO.extendObj(n,t),"object"==typeof t.parameters)n.parameters=SAPO.extendObj(SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.parameters),t.parameters);else if(null!=t.parameters){var i=this.paramsObjToStr(SAPO.Communication.Ajax.globalOptions.parameters);i&&(n.parameters=t.parameters+"&"+i)}n.requestHeaders=SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.requestHeaders),n.requestHeaders=SAPO.extendObj(n.requestHeaders,t.requestHeaders)}this.options=n,this.safeCall("onInit");var s=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");s.href=e,this.url=e,this.isHTTP=s.protocol.match(/^https?:$/i)&&!0,this.requestHasBody=0>n.method.search(/^get|head$/i),this.isCrossDomain=this.isHTTP&&"widget:"!=location.protocol&&"object"!=typeof window.widget?location.protocol!=s.protocol||location.host!=s.host.split(":")[0]:!1,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var e={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-SAPO-Version":"0.1"};if(this.options.cors&&(this.options.signRequest||delete e["X-Requested-With"],delete e["X-SAPO-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var t in this.options.requestHeaders)e[t]=this.options.requestHeaders[t];this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(e.Connection="close");for(var n in e)e.hasOwnProperty(n)&&this.transport.setRequestHeader(n,e[n])}catch(i){}},paramsObjToStr:function(e){var t,n,i,s,o=[];if("object"!=typeof e)return e;for(i in e)if(e.hasOwnProperty(i))if(s=e[i],"[object Array]"!==Object.prototype.toString.call(s)||isNaN(s.length))o=o.concat([encodeURIComponent(i),"=",encodeURIComponent(s),"&"]);else for(t=0,n=s.length;n>t;t++)o=o.concat([encodeURIComponent(i),"=",encodeURIComponent(s[t]),"&"]);return o.length>0&&o.pop(),o.join("")},setParams:function(){var e=null,t=this.options.parameters;e="object"==typeof t?this.paramsObjToStr(t):""+t,e&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+e:this.url.split("#")[0]+"?"+e)},getHeader:function(e){if(this.usingXDomainReq&&"Content-Type"===e)return this.transport.contentType;try{return this.transport.getResponseHeader(e)}catch(t){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(e){return null}},getResponse:function(){var e=this.transport,t={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:e,timeTaken:new Date-this.startTime,requestedUrl:this.url};t.readyState=e.readyState;try{t.responseText=e.responseText}catch(n){}try{t.responseXML=e.responseXML}catch(n){}try{t.status=e.status}catch(n){t.status=0}try{t.statusText=e.statusText}catch(n){t.statusText=""}return t},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(e){}this.finish()}},runStateChange:function(){var e=this.transport.readyState;if(3===e)this.isHTTP&&this.safeCall("onHeaders");else if(4===e||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return this.delayTimeout=setTimeout(this.runStateChange.bindObj(this),this.options.delay+this.startTime-(new Date).getTime()),void 0;var t,n=this.transport.responseText,i=this.getResponse(),s=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===s?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):s=n?200:404:304===s&&(s=200);var o=this.usingXDomainReq||s>=200&&300>s,r=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(r.indexOf("application/json")>=0||"force"===this.options.evalJS))try{t=this.evalJSON(n,this.sanitizeJSON),t&&(n=i.responseJSON=t)}catch(a){o&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==r.indexOf("xml")&&"DOMParser"in window){var l;switch(r){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":l=r;break;default:l="text/xml"}var h=(new DOMParser).parseFromString(this.transport.responseText,l);this.transport.responseXML=h,i.responseXML=h}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(s||this.usingXDomainReq)&&(o?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+s,i,n)),this.finish(i,n)}},finish:function(e,t){if(e&&this.safeCall("onComplete",e,t),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(e,t,n){function i(e){setTimeout(function(){throw e.message&&(e.message+="\n"+(e.stacktrace||e.stack||"")),e},1)}"function"==typeof this.options[e]?SAPO.safeCall(this,this.options[e],t,n):t&&window.Error&&t instanceof Error&&i(t)},setRequestHeader:function(e,t){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[e]=t},request:function(){if(this.transport){var e=null;this.requestHasBody?(null!=this.options.postBody&&""!==this.options.postBody?(e=this.options.postBody,this.setParams()):null!=this.options.parameters&&""!==this.options.parameters&&(e=this.options.parameters),"object"!=typeof e||e.nodeType?"object"!=typeof e&&null!=e&&(e=""+e):e=this.paramsObjToStr(e),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var t=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",t),t=this.options.xhrProxy+encodeURIComponent(t),i=!1);try{this.transport.open(n,t,this.options.asynchronous)}catch(s){return this.safeCall("onException",s),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())}.bindObj(this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=this.runStateChange.bindObj(this):this.usingXDomainReq&&(this.transport.onload=this.runStateChange.bindObj(this));try{if(i)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(e)}catch(s){return this.safeCall("onException",s),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(e,t){if("function"!=typeof Error)return{code:e,message:t};var n=Error(t);return n.code=e,n},isJSON:function(e){return"string"==typeof e&&e?(e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&JSON.parse!==void 0?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw Error("ERROR: Bad JSON string...")}return null}},SAPO.Communication.Ajax.load=function(e,t){return new SAPO.Communication.Ajax(e,{method:"GET",onSuccess:function(e){t(e.responseText,e)}})},SAPO.Communication.Ajax.ping=function(e,t){return new SAPO.Communication.Ajax(e,{method:"HEAD",onSuccess:function(e){"function"==typeof t&&t(e)}})},function(e){"use strict";SAPO.namespace("Ink");var t={},n=0,i=SAPO.Communication.Ajax,s=SAPO.Dom.Css,o=SAPO.Dom.Selector,r=SAPO.Utility.Url;SAPO.Ink.Aux={Layouts:{SMALL:"s",MEDIUM:"m",LARGE:"l"},isDOMElement:function(e){return"object"==typeof e&&"nodeType"in e&&1===e.nodeType},isInteger:function(e){return"number"==typeof e&&0===e%1},elOrSelector:function(e,t){if(!this.isDOMElement(e)){var n=o.select(e);if(0===n.length)throw new TypeError(t+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return n[0]}return e},clone:function(e){try{if("object"!=typeof e)throw Error("Given argument is not an object!");return JSON.parse(JSON.stringify(e))}catch(t){throw Error("Given object cannot have loops!")}},childIndex:function(e){for(var t=o.select("> *",e.parentNode),n=0,i=t.length;i>n;++n)if(t[n]===e)return n;throw"not found!"},ajaxJSON:function(e,t,n){new i(e,{evalJS:"force",method:"POST",parameters:t,onSuccess:function(e){try{if(e=e.responseJSON,"ok"!==e.status)throw"server error: "+e.message;n(null,e)}catch(t){n(t)}},onFailure:function(){n("communication failure")}})},currentLayout:function(){var e,t,n,i,r,a=o.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(n in this.Layouts)this.Layouts.hasOwnProperty(n)&&(i=this.Layouts[n],r=document.createElement("div"),r.className="ink-for-"+i,r.setAttribute("data-ink-layout",i),a.appendChild(r));document.body.appendChild(a)}for(e=0,t=a.childNodes.length;t>e;++e)if(r=a.childNodes[e],"hidden"!==s.getStyle(r,"visibility"))return r.getAttribute("data-ink-layout")},hashSet:function(e){if("object"!=typeof e)throw new TypeError("o should be an object!");var t=r.getAnchorString();t=SAPO.extendObj(t,e),window.location.hash=r.genQueryString("",t).substring(1)},cleanChildren:function(e){for(var t,n=e.lastChild;n;)t=n.previousSibling,e.removeChild(n),n=t},storeIdAndClasses:function(e,t){var n=e.id;n&&(t._id=n);var i=e.className;i&&(t._classes=i)},restoreIdAndClasses:function(e,t){t._id&&e.id!==t._id&&(e.id=t._id),t._classes&&-1===e.className.indexOf(t._classes)&&(e.className?e.className+=" "+t._classes:e.className=t._classes),t._instanceId&&!e.getAttribute("data-instance")&&e.setAttribute("data-instance",t._instanceId)},registerInstance:function(i,s,o){if(!i._instanceId){if("object"!=typeof i)throw new TypeError("1st argument must be a JavaScript object!");if(!i._options||!i._options.skipRegister){if(!this.isDOMElement(s))throw new TypeError("2nd argument must be a DOM element!");if(o!==e&&"string"!=typeof o)throw new TypeError("3rd argument must be a string!");var r=(o||"instance")+ ++n;t[r]=i,i._instanceId=r;var a=s.getAttribute("data-instance");a=null!==a?[a,r].join(" "):r,s.setAttribute("data-instance",a)}}},unregisterInstance:function(e){delete t[e]},getInstanceFromSelector:function(e){var t=o.select(e)[0];if(!t)throw Error("Element not found!");return this.getInstance(t)},getInstance:function(e){var n;if(this.isDOMElement(e)){if(n=e.getAttribute("data-instance"),null===n)throw Error("argument is not a DOM instance element!")}else n=e;n=n.split(" ");var i,s,o,r=n.length,a=[];for(o=0;r>o;++o){if(s=n[o],!s)throw Error("Element is not a JS instance!");if(i=t[s],!i)throw Error('Instance "'+s+'" not found!');a.push(i)}return 1===r?a[0]:a},getInstanceIds:function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},getInstances:function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},destroyComponent:function(){SAPO.Ink.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}},SAPO.Dom.Loaded.run(function(){SAPO.Ink.Close();var e=o.select(".ink-collapsible");e.forEach(function(e){new SAPO.Ink.Collapsible(e)});var t=o.select(".ink-dockable");t.forEach(function(e){new SAPO.Ink.Dockable(e)})})}(),function(e){SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Element,i=SAPO.Dom.Event;SAPO.Ink.DatePicker=function(n,i){if(this._options=SAPO.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,validDayFn:e,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Fechar",cleanText:"Limpar",prevLinkText:"«",nextLinkText:"»",ofText:"&nbsp;de&nbsp;",month:{1:"Janeiro",2:"Fevereiro",3:"Mar&ccedil;o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},wDay:{0:"Domingo",1:"Segunda",2:"Ter&ccedil;a",3:"Quarta",4:"Quinta",5:"Sexta",6:"S&aacute;bado"}},i||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,n&&(this._dataField=t.elOrSelector(n,"1st argument")),this._picker=null,this._options.pickerField&&(this._picker=t.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)){var s=this._options.startDate.split("-");this._year=s[0],this._month=s[1]-1,this._day=s[2]}this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._init(),this._render(),this._options.startDate&&this.setDate(),t.registerInstance(this,this._containerObject,"datePicker")},SAPO.Ink.DatePicker.prototype={version:"0.1",_init:function(){},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var s=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var o=document.createElement("a");o.className="clean",o.innerHTML=this._options.cleanText,this._superTopBar.appendChild(o)}if(this._options.showClose){var r=document.createElement("a");r.className="close",r.innerHTML=this._options.closeText,this._superTopBar.appendChild(r)}this._containerObject.appendChild(this._superTopBar)}var a=document.createElement("div");a.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",a.appendChild(this._monthPrev),a.appendChild(this._monthDescContainer),a.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(a),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";for(var l,h,c=1;12>=c;c++)0===(c-1)%4&&(l=document.createElement("ul")),h=document.createElement("li"),h.innerHTML='<a href="#" class="sapo_calmonth_'+(2===(c+"").length?c:"0"+c)+'">'+this._options.month[c].substring(0,3)+"</a>",l.appendChild(h),0===c%4&&this._monthSelector.appendChild(l);if(this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=t.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=n.elementTop(this._dataField),this._picker.style.left=n.elementLeft(this._dataField)+(n.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=t.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=t.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=t.elOrSelector(this._options.yearField,"yearField")}s.insertBefore(this._containerObject,s.childNodes[0]),this._picker?i.observe(this._picker,"click",function(e){i.stop(e),this._containerObject=n.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"}.bindObjEvent(this)):i.observe(this._dataField,"focus",function(){this._containerObject=n.clonePosition(this._containerObject,this._dataField),"bottom"==this._options.position?this._containerObject.style.top=n.elementHeight(this._dataField)+n.offsetTop(this._dataField)+"px":this._containerObject.style.left=n.elementWidth(this._dataField)+n.offsetLeft(this._dataField)+"px",s.appendChild(this._containerObject),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"}.bindObjEvent(this)),this._options.displayInSelect?(i.observe(this._options.dayField,"change",function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())}.bindObjEvent(this)),i.observe(this._options.monthField,"change",function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())}.bindObjEvent(this)),i.observe(this._options.yearField,"change",function(){this._updateDate(),this._showDefaultView()}.bindObjEvent(this))):(i.observe(this._dataField,"change",function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")}.bindObjEvent(this)),i.observe(this._dataField,"blur",function(){this._hoverPicker||(this._containerObject.style.display="none")}.bindObjEvent(this))),i.observe(document,"click",function(t){t.target===e&&(t.target=t.srcElement),n.descendantOf(this._containerObject,t.target)||t.target===this._dataField||(this._picker?t.target===this._picker||this._options.displayInSelect&&(t.target===this._options.dayField||t.target===this._options.monthField||t.target===this._options.yearField)||this._options.dayField&&(n.descendantOf(this._options.dayField,t.target)||n.descendantOf(this._options.monthField,t.target)||n.descendantOf(this._options.yearField,t.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")}.bindObjEvent(this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),i.observe(this._containerObject,"mouseover",function(e){i.stop(e),this._hoverPicker=!0}.bindObjEvent(this)),i.observe(this._containerObject,"mouseout",function(e){i.stop(e),this._hoverPicker=!1}.bindObjEvent(this)),i.observe(this._containerObject,"click",function(t){t.target===e&&(t.target=t.srcElement);var n=t.target.className,s=-1!==n.indexOf("sapo_cal_off");if(i.stop(t),0!==n.indexOf("sapo_cal_")||s)if(0!==n.indexOf("sapo_calmonth_")||s)if(0!==n.indexOf("sapo_calyear_")||s)0!==n.indexOf("change_month_")||s?0!==n.indexOf("change_year_")||s?"clean"===n?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===n&&(this._containerObject.style.display="none"):"change_year_next"===n?this._showYearSelector(1):"change_year_prev"===n&&this._showYearSelector(-1):"change_month_next"===n?this._updateCal(1):"change_month_prev"===n&&this._updateCal(-1);else{var o=n.substr(13,4);Number(o)&&(this._year=o,this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else{var r=n.substr(14,2);Number(r)&&(this._month=r-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year==this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year==this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(),this._monthContainer.style.display="block")}else{var a=n.substr(9,2);Number(a)?(this.setDate(this._year+"-"+(this._month+1)+"-"+a),this._containerObject.style.display="none"):"sapo_cal_link_month"===n?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===n&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")
}this._updateDescription()}.bindObjEvent(this))},_setMinMax:function(e){if(e){var t=e.split(":"),n=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(t[0])if("NOW"==t[0])this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate();else if(n.test(t[0])){var i=t[0].split("-");this._yearMin=Math.floor(i[0]),this._monthMin=Math.floor(i[1])||1,this._dayMin=Math.floor(i[2])||1,this._monthMin>1&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),this._monthMin>1&&this._monthMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1;if(t[1])if("NOW"==t[1])this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(n.test(t[1])){var i=t[1].split("-");this._yearMax=Math.floor(i[0]),this._monthMax=Math.floor(i[1])||12,this._dayMax=Math.floor(i[2])||this._daysInMonth(this._yearMax,this._monthMax),this._monthMax>1&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var s=this._daysInMonth(this._yearMax,this._monthMax);this._monthMax>1&&this._monthMax>s&&(this._dayMax=s)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31;this._yearMax>=this._yearMin&&this._monthMax>=this._monthMin&&this._dayMax>=this._dayMin||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31},_checkDateRange:function(e,t,n){return this._isValidDate(e,t+1,n)||(e=this._today.getFullYear(),t=this._today.getMonth(),n=this._today.getDate()),e>this._yearMax?(e=this._yearMax,t=this._monthMax-1,n=this._dayMax):this._yearMin>e&&(e=this._yearMin,t=this._monthMin-1,n=this._dayMin),e==this._yearMax&&t+1>this._monthMax?(t=this._monthMax-1,n=this._dayMax):e==this._yearMin&&this._monthMin>t+1&&(t=this._monthMin-1,n=this._dayMin),e==this._yearMax&&t+1==this._monthMax&&n>this._dayMax?n=this._dayMax:e==this._yearMin&&t+1==this._monthMin&&this._dayMin>n?n=this._dayMin:n>this._daysInMonth(e,t+1)&&(n=this._daysInMonth(e,t+1)),[e,t,n]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year==this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year==this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var e;this._options.displayInSelect?(e=[],this._isValidDate(e[0]=this._options.yearField[this._options.yearField.selectedIndex].value,e[1]=this._options.monthField[this._options.monthField.selectedIndex].value,e[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(e=this._checkDateRange(e[0],e[1]-1,1),this._isValidDate(e[0],e[1]+1,e[2])&&(this._year=e[0],this._month=e[1],this._day=this._daysInMonth(e[0],e[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(e=this._getDataArrayParsed(this._dataField.value),e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var e=+this._year+10*arguments[0];if(e-=e%10,e>this._yearMax||this._yearMin>e+9)return;this._year=+this._year+10*arguments[0]}for(var t="<li>",n=this._year-this._year%10,i=0;11>=i;i++)0===i%4&&(t+="<ul>"),t+=i&&11!==i?this._yearMax>=n+i-1&&n+i-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+(n+i-1)+(n+i-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(n+i-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(n+i-1)+"</a></li>":i&&this._yearMax>=n+i-1&&n+i-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":this._yearMax>=n+i-1&&n+i-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(i+1)%4&&(t+="</ul>");t+="</li>",this._yearSelector.innerHTML=t},_getDataArrayParsed:function(e){var t=[],n=SAPO.Utility.Date.set(this._options.format,e);return n&&(t=[n.getFullYear(),n.getMonth()+1,n.getDate()]),t},_isValidDate:function(e,t,n){var i=/^\d{4}$/,s=/^\d{1,2}$/;return i.test(e)&&s.test(t)&&s.test(n)&&t>=1&&12>=t&&n>=1&&this._daysInMonth(e,t)>=n},_isDate:function(t,n){try{if(t===e)return!1;var i=SAPO.Utility.Date.set(t,n);if(i&&this._isValidDate(i.getFullYear(),i.getMonth()+1,i.getDate()))return!0}catch(s){}return!1},_writeDateInFormat:function(){return SAPO.Utility.Date.get(this._options.format,this._data)},setDate:function(e){if("string"==typeof e&&/\d{4}-\d{1,2}-\d{1,2}/.test(e)){var t=e.split("-");this._year=t[0],this._month=t[1]-1,this._day=t[2]}this._setDate()},_setDate:function(t){t!==e&&t.className&&0===t.className.indexOf("sapo_cal_")&&(this._day=t.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(e){this._updateMonth(e),this._showMonth()},_daysInMonth:function(e,t){var n=31;switch(t){case 2:n=0===e%400||0===e%4&&0!==e%100?29:28;break;case 4:case 6:case 9:case 11:n=30}return n},_updateMonth:function(t){t===e&&(t="0");var n=this._month+1,i=this._year;switch(t){case-1:if(1===n){if(i===this._yearMin)return;n=12,i--}else n--;this._year=i,this._month=n-1;break;case 1:if(12===n){if(i===this._yearMax)return;n=1,i++}else n++;this._year=i,this._month=n-1;break;default:}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var e,t,n=this._month+1,i=this._year,s=this._daysInMonth(i,n),o=new Date(i,n-1,1).getDay(),r=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._yearMin>i||i==this._yearMin&&this._monthMin>=n?this._monthPrev.childNodes[0].className="action_inactive":(i>this._yearMax||i==this._yearMax&&n>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),r&&Number(r)&&(r>o?o=7+r-o:o+=r);var a="";for(a+='<ul class="sapo_cal_header">',e=0;7>e;e++)a+="<li>"+this._options.wDay[e+(r+e>6?r-7:r)].substring(0,1)+"</li>";a+="</ul>";var l=0;if(a+="<ul>",o)for(t=r;o-r>t;t++)l||(a+="<ul>"),a+='<li class="sapo_cal_empty">&nbsp;</li>',l++;for(e=1;s>=e;e++){7===l&&(l=0,a+="<ul>");var h="sapo_cal_"+(2===(e+"").length?e:"0"+e);h+=i==this._yearMin&&n==this._monthMin&&this._dayMin>e||i==this._yearMax&&n==this._monthMax&&e>this._dayMax||i==this._yearMin&&this._monthMin>n||i==this._yearMax&&n>this._monthMax||this._yearMin>i||i>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(i,n-1,e))?" sapo_cal_off":this._data.getFullYear()==i&&this._data.getMonth()==n-1&&e==this._day?" sapo_cal_on":"",a+='<li><a href="#" class="'+h+'">'+e+"</a></li>",l++,7===l&&(a+="</ul>")}if(7!==l){for(e=l;7>e;e++)a+='<li class="sapo_cal_empty">&nbsp;</li>';a+="</ul>"}a+="</ul>",this._monthContainer.innerHTML=a},_setActiveMonth:function(t){t===e&&(t=this._monthSelector);var n=t.childNodes.length;if(t.className&&t.className.match(/sapo_calmonth_/)){var i=this._year,s=t.className.substr(14,2);i==this._data.getFullYear()&&s==this._data.getMonth()+1?(SAPO.Dom.Css.addClassName(t,"sapo_cal_on"),SAPO.Dom.Css.removeClassName(t,"sapo_cal_off")):(SAPO.Dom.Css.removeClassName(t,"sapo_cal_on"),i==this._yearMin&&this._monthMin>s||i==this._yearMax&&s>this._monthMax||this._yearMin>i||i>this._yearMax?SAPO.Dom.Css.addClassName(t,"sapo_cal_off"):SAPO.Dom.Css.removeClassName(t,"sapo_cal_off"))}else if(0!==n)for(var o=0;n>o;o++)this._setActiveMonth(t.childNodes[o])}}}(),function(){"use strict";SAPO.namespace("Ink"),SAPO.Ink.FormValidator={version:"0.1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(e,t){if(this._free(),t=SAPO.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},t||{}),"string"==typeof e&&(e=document.getElementById(e)),null===e)return!1;this.element=e,(this.element.id===undefined||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=t.customFlag,this.confirmGroup=t.confirmGroup;var n=this._validateElements();return n.length>0?(t.onError?t.onError(n):this._showError(e,n),!1):(t.onError||this._clearError(e),this._clearCache(),t.onSuccess&&t.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){if(this.elements[this.element.id]===undefined){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];for(var e=this.element.elements,t=!1,n=0,i=e.length;i>n;n++)if(t=e[n],null!==t.getAttribute("type")&&"radio"===t.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||t.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&t.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var s in this._flagMap)if(SAPO.Dom.Css.hasClassName(t,s)){this.elements[this.element.id].push(t);break}}else{for(var o in this._flagMap)if(SAPO.Dom.Css.hasClassName(t,o)&&"ink-fv-confirm"!==o){this.elements[this.element.id].push(t);break}SAPO.Dom.Css.hasClassName(t,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(t),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var e;this._getElements(),this.hasConfirm[this.element.id]!==undefined&&this.hasConfirm[this.element.id]===!0&&(e=this._makeConfirmGroups());for(var t,n=[],i=!1,s=!1,o=0,r=this.elements[this.element.id].length;r>o;o++)if(t=!1,i=this.elements[this.element.id][o],!i.disabled)for(var a in this._flagMap)SAPO.Dom.Css.hasClassName(i,a)&&("ink-fv-custom"!==a&&"ink-fv-confirm"!==a?this._isValid(i,a)||(t?n[n.length-1].errors.push(a):(n.push({elm:i,errors:[a]}),t=!0)):"ink-fv-confirm"!==a&&(s=this._isCustomValid(i),s.length>0&&n.push({elm:i,errors:[a],custom:s})));return n=this._validateConfirmGroups(e,n)},_validateConfirmGroups:function(e,t){var n=!1;for(var i in e)n=e[i],2===n.length&&n[0].value!==n[1].value&&t.push({elm:n[1],errors:["ink-fv-confirm"]});return t},_makeConfirmGroups:function(){var e;if(this.confirmGroup&&this.confirmGroup.length>0){e={};for(var t=!1,n=!1,i=0,s=this.confirmElms[this.element.id].length;s>i;i++){t=this.confirmElms[this.element.id][i];for(var o=0,r=this.confirmGroup.length;r>o;o++)n=this.confirmGroup[o],SAPO.Dom.Css.hasClassName(t,n)&&(e[n]===undefined?e[n]=[t]:e[n].push(t))}return e}return 2===this.confirmElms[this.element.id].length&&(e={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),e},_isCustomValid:function(e){for(var t=[],n=!1,i=0,s=this.custom.length;s>i;i++)n=this.custom[i],SAPO.Dom.Css.hasClassName(e,n.flag)&&(n.callback(e,n.msg)||t.push({flag:n.flag,msg:n.msg}));return t},_isValid:function(e,t){switch(t){case"ink-fv-required":if("select"===e.nodeName.toLowerCase())return e.selectedIndex>0?!0:!1;if("checkbox"!==e.getAttribute("type")&&"radio"!==e.getAttribute("type")){if(""!==this._trim(e.value))return!0}else if("checkbox"===e.getAttribute("type")){if(e.checked===!0)return!0}else if("radio"===e.getAttribute("type")){var n=e.form[e.name];n.length===undefined&&(n=[n]);for(var i=!1,s=0,o=n.length;o>s;s++)n[s].checked===!0&&(i=!0);return i}break;case"ink-fv-email":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.mail(e.value))return!0;break;case"ink-fv-url":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.url(e.value))return!0;break;case"ink-fv-number":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(!isNaN(Number(e.value)))return!0;break;case"ink-fv-phone_pt":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isPTPhone(e.value))return!0;break;case"ink-fv-phone_cv":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isCVPhone(e.value))return!0;break;case"ink-fv-phone_ao":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isAOPhone(e.value))return!0;break;case"ink-fv-phone_mz":if(""===this._trim(e.value))return SAPO.Dom.Css.hasClassName(e,"ink-fv-required")?!1:!0;if(SAPO.Utility.Validator.isMZPhone(e.value))return!0;break;case"ink-fv-custom":}return!1},_showError:function(e,t){this._clearError(e);for(var n=!1,i=0,s=t.length;s>i;i++)if(n=t[i].elm,"radio"!==n.getAttribute("type")){var o=document.createElement("p");o.className=this._errorClassName,o.innerHTML="ink-fv-custom"!==t[i].errors[0]?this._flagMap[t[i].errors[0]].msg:t[i].custom[0].msg,"checkbox"!==n.getAttribute("type")&&(n.nextSibling.parentNode.insertBefore(o,n.nextSibling),SAPO.Dom.Css.hasClassName(n.parentNode,"control")&&(SAPO.Dom.Css.addClassName(n.parentNode,"validation"),"ink-fv-required"===t[i].errors[0]?SAPO.Dom.Css.addClassName(n.parentNode,"error"):SAPO.Dom.Css.addClassName(n.parentNode,"warning")))}else SAPO.Dom.Css.hasClassName(n.parentNode.parentNode,"control-group")&&(SAPO.Dom.Css.addClassName(n.parentNode.parentNode,"validation"),SAPO.Dom.Css.addClassName(n.parentNode.parentNode,"error"))},_clearError:function(e){for(var t=e.getElementsByTagName("p"),n=!1,i=t.length-1;i>=0;i--)n=t[i],SAPO.Dom.Css.hasClassName(n,this._errorClassName)&&(SAPO.Dom.Css.hasClassName(n.parentNode,"control")&&(SAPO.Dom.Css.removeClassName(n.parentNode,"validation"),SAPO.Dom.Css.removeClassName(n.parentNode,"error"),SAPO.Dom.Css.removeClassName(n.parentNode,"warning")),n.parentNode.removeChild(n));var s=e.getElementsByTagName("ul");for(i=s.length-1;i>=0;i--)n=s[i],SAPO.Dom.Css.hasClassName(n,"control-group")&&(SAPO.Dom.Css.removeClassName(n,"validation"),SAPO.Dom.Css.removeClassName(n,"error"))},_trim:function(e){return"string"==typeof e?e.replace(/^\s+|\s+$|\n+$/g,""):undefined}}}(),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Css,i=SAPO.Dom.Event,s=SAPO.Dom.Selector,o=function(e,t,n){var i=t[0],s=t[1];if(n||i>e[0]||s>e[1]){var o=i/s,r=e[0]/e[1],a=o>r?e[0]/i:e[1]/s;return[parseInt(i*a+.5,10),parseInt(s*a+.5,10)]}return t},r=function(e,t){t=t.bindObj(e);var n=[e.img.offsetWidth,e.img.offsetHeight];n[0]&&n[1]&&t(n),e.img.onload=function(){t([this.img.offsetWidth,this.img.offsetHeight])}.bindObjEvent(e)},a=function(e,n){if(this._options=SAPO.extendObj({fullImageMaxWidth:600,fullImageMaxHeight:400,thumbnailMaxWidth:106,layout:0,circular:!1,fixImageSizes:!1},n||{}),this._handlers={navClick:this._onNavClick.bindObjEvent(this),paginationClick:this._onPaginationClick.bindObjEvent(this),thumbsClick:this._onThumbsClick.bindObjEvent(this),focusBlur:this._onFocusBlur.bindObjEvent(this),keyDown:this._onKeyDown.bindObjEvent(this)},this._element=t.elOrSelector(e,"1st argument"),this._isFocused=!1,this._model=[],this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._index=0,this._thumbIndex=0,0===this._options.layout)this._showThumbs=!1,this._showDescription=!1,this._paginationHasPrevNext=!1;else{if(1!==this._options.layout&&2!==this._options.layout&&3!==this._options.layout)throw new TypeError("supported layouts are 0-3!");this._showThumbs=!0,this._showDescription=!0,this._paginationHasPrevNext=!0}null!==this._element.getAttribute("data-fix-image-sizes")&&(this._options.fixImageSizes=!0),this._init()};a.prototype={_init:function(){"DOM"===this._createdFrom&&this._extractModelFromDOM();var e=this._generateMarkup(),n=this._element.parentNode;this._notFirstInit||(t.storeIdAndClasses(this._element,this),this._notFirstInit=!0),n.insertBefore(e,this._element),n.removeChild(this._element),this._element=e,t.restoreIdAndClasses(this._element,this),i.observe(this._paginationEl,"click",this._handlers.paginationClick),i.observe(this._navEl,"click",this._handlers.navClick),this._showThumbs&&i.observe(this._thumbsUlEl,"click",this._handlers.thumbsClick),i.observe(this._element,"mouseover",this._handlers.focusBlur),i.observe(this._element,"mouseout",this._handlers.focusBlur),i.observe(document,"keydown",this._handlers.keyDown),t.registerInstance(this,this._element,"gallery")},_extractModelFromDOM:function(){var e,t=[],n=s.select("> li",this._element);n.forEach(function(n){try{var i={image_full:"",image_thumb:"",title_text:"",title_link:"",description:"",content_overlay:document.createDocumentFragment()},o=s.select("> a[rel=enclosure]",n)[0],r=s.select("> img",o)[0],a=s.select("> a[class=bookmark]",n)[0],l=s.select("span[class=entry-title]",n)[0],h=s.select("> span[class=entry-content]",n)[0],c=s.select("> .content-overlay",n)[0];e=o.getAttribute("data-dims"),null!==e&&(e=e.split(","),e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)),!e||isNaN(e[0])||isNaN(e[1])||(i.dims=e),i.image_full=o.getAttribute("href"),i.image_thumb=r.getAttribute("src"),a&&(i.title_link=a.getAttribute("href")),i.title_text=l.innerHTML,h&&(i.description=h.innerHTML),c&&i.content_overlay.appendChild(c),t.push(i)}catch(d){throw console.error("problematic element:"),console.error(n),console.error(d),Error("Problem parsing gallery data from DOM!")}}),this._model=t},_generateMarkup:function(){var e=document.createElement("div");e.className="ink-gallery";var t=document.createElement("div");t.className="stage";var i=document.createElement("nav");i.innerHTML=['<ul class="unstyled">','<li><a href="#" class="next"></a></li>','<li><a href="#" class="previous"></a></li>',"</ul>"].join(""),this._navEl=i;var s=document.createElement("div");s.className="slider";var a=document.createElement("ul");this._sliderUlEl=a;var l=this,h=this._options.fullImageMaxWidth,c=this._options.fullImageMaxHeight;this._model.forEach(function(e,t){var n=document.createElement("li"),i=document.createElement("img");if(i.setAttribute("name","image "+(t+1)),i.setAttribute("src",e.image_full),i.setAttribute("alt",e.title_text),n.appendChild(i),e.content_overlay)if(1===e.content_overlay.nodeType||11===e.content_overlay.nodeType)e.content_overlay=n.appendChild(e.content_overlay);else if("string"==typeof e.content_overlay){var s=document.createElement("div");s.className="content-overlay",s.innerHTML=e.content_overlay,e.content_overlay=n.appendChild(s)}if(a.appendChild(n),l._options.fixImageSizes){var d=function(e){var t=this.img,n=this.data;n.dims||(n.dims=e);var i=o([h,c],e),s=i[0],r=i[1],a=Math.floor((h-s)/2),l=Math.floor((c-r)/2);if(s!==h||r!==c){t.setAttribute("width",s),t.setAttribute("height",r);var d=t.style;a>0&&(d.paddingLeft=a+"px"),l>0&&(d.paddingBottom=l+"px")}};e.dims?d.call({img:i,data:e},e.dims):r({img:i,data:e},d)}}),s.appendChild(a),this._sliderEl=s;var d;if(this._showDescription){var u=this._model[this._index];d=document.createElement("div"),d.className=["article_text","example"+(3===this._options.layout?2:this._options.layout)].join(" "),d.innerHTML=u.title_link?['<h1><a href="',u.title_link,'">',u.title_text,"</a></h1>",u.description].join(""):["<h1>",u.title_text,"</h1>",u.description].join(""),this._articleTextDivEl=d}var m;this._showThumbs&&(m=document.createElement("div"),m.className="thumbs",a=document.createElement("ul"),a.className="unstyled",this._model.forEach(function(e,t){var n=document.createElement("li"),i=document.createElement("a");i.setAttribute("href","#");var s=document.createElement("img");s.setAttribute("name","thumb "+(t+1)),s.setAttribute("src",e.image_thumb),s.setAttribute("alt",t+1);var o=document.createElement("span");o.innerHTML=e.title_text,i.appendChild(s),i.appendChild(o),n.appendChild(i),a.appendChild(n)}),m.appendChild(a),this._thumbsDivEl=m,this._thumbsUlEl=a);var p=document.createElement("div");p.className="pagination";var f;return this._paginationHasPrevNext&&(f=document.createElement("a"),f.setAttribute("href","#"),f.className="previous",p.appendChild(f)),this._model.forEach(function(e,t){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-index",t),t===l._index&&(n.className="active"),p.appendChild(n)}),this._paginationHasPrevNext&&(f=document.createElement("a"),f.setAttribute("href","#"),f.className="next",p.appendChild(f)),this._paginationEl=p,0===this._options.layout?(t.appendChild(i),t.appendChild(s),t.appendChild(p),e.appendChild(t)):(1===this._options.layout||2===this._options.layout||3===this._options.layout)&&(t.appendChild(i),t.appendChild(s),t.appendChild(d),e.appendChild(t),3===this._options.layout?(this._thumbsUlEl.className="thumbs unstyled",n.addClassName(e,"rightNav"),e.appendChild(this._thumbsUlEl)):(m.appendChild(p),e.appendChild(m))),this._swipeDir="x",this._swipeThumbsDir=0===this._options.layout?"":3===this._options.layout?"y":"x",SAPO.Utility.Swipe._supported&&new SAPO.Utility.Swipe(e,{callback:function(t,n){var i=this._isMeOrParent(n.target,this._thumbsUlEl),s=i?!1:this._isMeOrParent(n.target,e);!i&&!s||i&&!this._swipeThumbsDir||s&&n.axis!==this._swipeDir||i&&n.axis!==this._swipeThumbsDir||(0>n.dr[0]?i?this.thumbNext():this.next():i?this.thumbPrevious():this.previous())}.bindObj(this),maxDuration:.4,minDist:50}),e},_isMeOrParent:function(e,t){if(e){do{if(e===t)return!0;e=e.parentNode}while(e);return!1}},_onNavClick:function(e){var t,s=i.element(e);if(n.hasClassName(s,"previous"))t=-1;else{if(!n.hasClassName(s,"next"))return;t=1}i.stop(e),this.goTo(t,!0)},_onPaginationClick:function(e){var t=i.element(e),s=t.getAttribute("data-index"),o=!1;if(n.hasClassName(t,"previous"))s=-1,o=!0;else if(n.hasClassName(t,"next"))s=1,o=!0;else{if(null===s)return;s=parseInt(s,10)}i.stop(e),o?this.thumbGoTo(s,!0):this.goTo(s)},_onThumbsClick:function(e){var t=i.element(e);if("img"===t.nodeName.toLowerCase());else{if("span"!==t.nodeName.toLowerCase())return;t=s.select("> img",t.parentNode)[0]}i.stop(e);var n=parseInt(t.getAttribute("alt"),10)-1;this.goTo(n)},_onFocusBlur:function(e){this._isFocused="mouseover"===e.type},_onKeyDown:function(e){if(this._isFocused){var t=e.keyCode;if(37===t)this.previous();else{if(39!==t)return;this.next()}i.stop(e)}},_validateValue:function(n,i,s){if(!t.isInteger(n))throw new TypeError("1st parameter must be an integer number!");if(i!==e&&i!==!1&&i!==!0)throw new TypeError("2nd parameter must either be boolean or ommitted!");var o=s?this._thumbIndex:this._index;if(i&&(n+=o),this._options.circular)0>n?n=this._model.length-1:n>=this._model.length&&(n=0);else if(0>n||n>=this._model.length||n===o)return!1;return n},getIndex:function(){return this._index},getLength:function(){return this._model.length},goTo:function(e,t){if(e=this._validateValue(e,t,!1),e!==!1){this._index=e;var i=s.select("> a",this._paginationEl),o=this;if(i.forEach(function(e,t){n.setClassName(e,"active",t-(o._paginationHasPrevNext?1:0)===o._index)}),this._sliderUlEl.style.marginLeft=["-",this._options.fullImageMaxWidth*this._index,"px"].join(""),this._showDescription){var r=this._model[this._index];this._articleTextDivEl.innerHTML=r.title_link?['<h1><a href="',r.title_link,'">',r.title_text,"</a></h1>",r.description].join(""):["<h1>",r.title_text,"</h1>",r.description].join("")}}},thumbGoTo:function(e,t){if(e=this._validateValue(e,t,!0),e!==!1){this._thumbIndex=e;var n="margin"+("x"===this._swipeThumbsDir?"Left":"Top");this._thumbsUlEl.style[n]=["-",this._options.thumbnailMaxWidth*this._thumbIndex,"px"].join("")}},previous:function(){this.goTo(-1,!0)},next:function(){this.goTo(1,!0)},thumbPrevious:function(){this.thumbGoTo(-1,!0)},thumbNext:function(){this.thumbGoTo(1,!0)},destroy:t.destroyComponent},SAPO.Ink.Gallery=a}(),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Css,i=SAPO.Dom.Element,s=SAPO.Dom.Event,o=function(t,n){if("string"!=typeof t&&"object"!=typeof t&&n.markup===e)throw"Invalid Modal selector";if("string"==typeof t){if(""!==t){if(this._element=SAPO.Dom.Selector.select(t),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else this._element=t;this._options=SAPO.extendObj({width:e,height:e,markup:this._element?this._element.innerHTML:e,onShow:e,onDismiss:e,closeOnClick:!1,skipDismiss:!1,resizable:!0,disableScroll:!1},n||{}),this._handlers={click:this._onClick.bindObjEvent(this),keyDown:this._onKeyDown.bindObjEvent(this),resize:this._onResize.bindObjEvent(this)},this._wasDismissed=!1,this._init()};o.prototype={_init:function(){this._modalShadow=document.createElement("div"),this._modalDiv=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDivStyle=this._modalDiv.style,this._resizeTimeout=null,SAPO.Dom.Css.addClassName(this._modalShadow,"ink-shade"),SAPO.Dom.Css.addClassName(this._modalDiv,"ink-modal"),SAPO.Dom.Css.addClassName(this._modalDiv,"ink-space"),this._modalShadowStyle.position="fixed",this._modalShadowStyle.top=this._modalShadowStyle.bottom=this._modalShadowStyle.left=this._modalShadowStyle.right="0px",this._modalDivStyle.position="absolute";var n="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._options.addClass!==e&&SAPO.Dom.Css.addClassName(this._modalDiv,this._options.addClass),this._contentContainer=document.createElement("div"),this._contentContainer.className="ink-modal-content",this._contentContainer.innerHTML=[this._options.skipClose?"":'<a href="#" class="ink-close">×</a>',this._options.markup].join(""),this._modalDiv.appendChild(this._contentContainer),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow),this._modalDivStyle.maxWidth=this._modalDivStyle.width=this._options.width!==e?parseInt(this._options.width,10)+"px":SAPO.Dom.Element.elementWidth(this._modalDiv)+"px",parseInt(n.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=.9*parseInt(n.clientWidth,10)+"px"),this._modalDivStyle.maxHeight=this._modalDivStyle.height=this._options.height!==e?parseInt(this._options.height,10)+"px":SAPO.Dom.Element.elementHeight(this._modalDiv)+"px",parseInt(n.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=.9*parseInt(n.clientHeight,10)+"px"),this.originalStatus={viewportHeight:parseInt(n.clientHeight,10),viewportWidth:parseInt(n.clientWidth,10),width:parseInt(this._modalDivStyle.width,10),height:parseInt(this._modalDivStyle.height,10)},this._options.resizable&&(this._onResize.apply(this,[]),s.observe(window,"resize",this._handlers.resize)),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._reposition.apply(this,[]),this.setContentMarkup.apply(this,[this._options.markup]),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),s.observe(this._shadeElement,"click",this._handlers.click),s.observe(document,"keydown",this._handlers.keyDown),t.registerInstance(this,this._shadeElement,"modal")},_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(SAPO.Dom.Element.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(SAPO.Dom.Element.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body,t=parseInt(e.clientHeight,10),n=parseInt(e.clientWidth,10);this._modalDivStyle.width=n>this.originalStatus.viewportWidth?n*this.originalStatus.width/this.originalStatus.viewportWidth+"px":.9*n+"px",this._modalDivStyle.height=t>this.originalStatus.viewportHeight?t*this.originalStatus.height/this.originalStatus.viewportHeight+"px":.9*t+"px",this._resizeContainer.apply(this,[]),this._reposition(),this._resizeTimeout=null}.bindObj(this),500))},_onClick:function(e){var t=s.element(e);(n.hasClassName(t,"ink-close")||this._options.closeOnClick&&!i.descendantOf(this._shadeElement,t)||t===this._shadeElement)&&(s.stop(e),this.dismiss())},_onKeyDown:function(e){27!==e.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentContainer.style.overflow=this._contentContainer.style.overflowX=this._contentContainer.style.overflowY="visible",this._contentContainer.style.height="auto";var e=SAPO.Dom.Element.elementHeight(this._contentContainer);if(this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible",e>SAPO.Dom.Element.elementHeight(this._contentElement)&&(this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden",this._contentContainer.style.height=SAPO.Dom.Element.elementHeight(this._contentElement)+"px",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible",this._contentContainer.style.overflow=this._contentContainer.style.overflowY="auto",this._contentContainer.style.overflowX="hidden",!this._options.skipClose)){var t=SAPO.Dom.Selector.select(".ink-close",this._contentElement);t[0].style.top="-12px",t[0].style.right="-14px"}},_disableScroll:function(){this._oldScrollPos=SAPO.Dom.Element.scroll(),this._onScrollBinded=function(e){var t=SAPO.Dom.Event.element(e);i.descendantOf(this._modalShadow,t)||(SAPO.Dom.Event.stop(e),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))}.bindObjEvent(this),SAPO.Dom.Event.observe(window,"scroll",this._onScrollBinded),SAPO.Dom.Event.observe(this._modalShadow,"touchmove",this._onScrollBinded)},dismiss:function(){this._options.onDismiss&&this._options.onDismiss(this),this._options.disableScroll&&SAPO.Dom.Event.stopObserving(window,"scroll",this._onScrollBinded),this._options.resizable&&SAPO.Dom.Event.stopObserving(window,"resize",this._handlers.resize);
var e=this._shadeElement;this._wasDismissed=!0,e.parentNode.removeChild(e),t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(e){this._modalDiv.innerHTML="",this._modalDiv.appendChild(this._contentContainer),this._contentContainer.innerHTML=[this._options.skipClose?"":'<a href="#" class="ink-close">×</a>',e].join(""),this._resizeContainer.apply(this,[])}},o.destroy=o.dismiss,SAPO.Ink.Modal=o}(),function(e,t){"use strict";SAPO.namespace("Ink");var n=SAPO.Ink.Aux,i=SAPO.Dom.Css,s=(SAPO.Dom.Element,SAPO.Dom.Event),o=SAPO.Dom.Selector,r=function(e,i){if(this._options=SAPO.extendObj({dragLabel:"drag here"},i||{}),this._handlers={down:this._onDown.bindObjEvent(this),move:this._onMove.bindObjEvent(this),up:this._onUp.bindObjEvent(this)},this._element=n.elOrSelector(e,"1st argument"),this._model=[],this._index=t,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}this._init()};r.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var e=this._generateMarkup(),t=this._element.parentNode;this._notFirstInit||(n.storeIdAndClasses(this._element,this),this._notFirstInit=!0),t.insertBefore(e,this._element),t.removeChild(this._element),this._element=e,n.restoreIdAndClasses(this._element,this);var i="ontouchstart"in document.documentElement;this._down=i?"touchstart":"mousedown",this._move=i?"touchmove":"mousemove",this._up=i?"touchend":"mouseup";var o=document.body;s.observe(o,this._move,this._handlers.move),s.observe(o,this._up,this._handlers.up),this._observe(),n.registerInstance(this,this._element,"sortableList")},_observe:function(){s.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var e=this,t=o.select("> li",this._element);t.forEach(function(t){var n=t.innerHTML;e._model.push(n)})},_generateMarkup:function(){var e=document.createElement("ul");e.className="unstyled ink-sortable-list";var t=this;return this._model.forEach(function(n,i){var s=document.createElement("li");i===t._index&&(s.className="drag"),s.innerHTML=['<span class="ink-label ink-info"><i class="icon-reorder"></i>',t._options.dragLabel,"</span>",n].join(""),e.appendChild(s)}),e},_getY:function(e){return 0===e.type.indexOf("touch")?e.changedTouches[0].pageY:"number"==typeof e.pageY?e.pageY:e.clientY},_refresh:function(e){var t=this._generateMarkup();this._element.parentNode.replaceChild(t,this._element),this._element=t,n.restoreIdAndClasses(this._element,this),e||this._observe()},_onDown:function(e){var t=s.element(e);if("i"===t.nodeName.toLowerCase()&&(t=t.parentNode),"span"===t.nodeName.toLowerCase()&&i.hasClassName(t,"ink-label")){s.stop(e);var o=t.parentNode;return this._index=n.childIndex(o),this._height=o.offsetHeight,this._startY=this._getY(e),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(e){if(this._isMoving){s.stop(e);var t=this._getY(e),n=t-this._startY,i=n>0?1:-1,o=i*Math.floor(Math.abs(n)/this._height);if(0!==o&&(o/=Math.abs(o),!(-1===o&&0===this._index||1===o&&this._index===this._model.length-1))){var r=o>0?this._index:this._index+o,a=0>o?this._index:this._index+o;this._model.splice(r,2,this._model[a],this._model[r]),this._index+=o,this._startY=t,this._refresh(!1)}}},_onUp:function(e){this._isMoving&&(s.stop(e),this._index=t,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:n.destroyComponent},SAPO.Ink.SortableList=r}(window),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Event,i=SAPO.Dom.Selector,s=function(n,s){if(this._options=SAPO.extendObj({selectable:!1,startsCollapsed:!1,onClick:e},s||{}),this._handlers={click:this._onClick.bindObjEvent(this)},!t.isDOMElement(n)){if(n=i.select(n),0===n.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");n=n[0]}if(this._element=n,this._model=[],this._selectedIndex=[-1],this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}this._init()};s.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var e=this._generateMarkup(),i=this._element.parentNode;this._notFirstInit||(t.storeIdAndClasses(this._element,this),this._notFirstInit=!0),i.insertBefore(e,this._element),i.removeChild(this._element),this._element=e,t.restoreIdAndClasses(this._element,this),n.observe(this._element,"click",this._handlers.click),t.registerInstance(this,this._element,"treeView"),this._options.startsCollapsed&&(delete this._options.startsCollapsed,this.collapseTree())},_extractModelFromDOM:function(){this._model=[""],this._extractLevel(this._element,this._model),this._model.length>1&&this._model[1]&&1===this._model[1].length&&(this._model=this._model[1][0])},_extractLevel:function(e,t){for(var n,s,o,r,a,l,h=i.select("> li",e),c=[],d=0,u=h.length;u>d;++d)n=h[d],s=n.innerHTML,a=s.indexOf("<ul>"),l=s.lastIndexOf("</ul>"),-1!==a&&-1!==l&&(s=s.substring(0,a)+s.substring(l+5)),o=[s],r=i.select("> ul",n)[0],r&&this._extractLevel(r,o),c.push(o);u>0&&(t[1]=c)},_generateMarkup:function(){var e=document.createElement("ul");return e.className="ink-tree-view",this._generateLevel(e,this._model,[0]),e},_generateLevel:function(e,t,n){var i=document.createElement("li");i.setAttribute("data-index",n.join(" "));var s=document.createElement("button"),o=t.length>1&&t[1]&&t[1].length>0,r=!t[2];s.className=r?"icon-caret-down":"icon-caret-right";var a;if(t[0]&&(o?(i.appendChild(s),a=document.createElement("a"),a.setAttribute("href","#"),""+n==""+this._selectedIndex&&(a.className="ink-info"),a.innerHTML=t[0],i.appendChild(a)):i.innerHTML=t[0]),t.length>1){for(var l,h=document.createElement("ul"),c=t[1],d=0,u=c.length;u>d;++d)l=n.slice(),l.push(d),this._generateLevel(h,c[d],l);i.appendChild(h),h.style.display=r?"":"none"}e.appendChild(i)},_nodeFromIndex:function(e){e=e.slice();var t=this._model;e.shift();for(var n;"number"==typeof(n=e.shift());)t=t[1][n];return t},_toggleNode:function(e){if(e[0]&&!(2>e.length)){var t=!!e[2];t?(e.pop(),e[1]||e.pop()):e[2]=1}},_onClick:function(e){for(var t=n.element(e),i=!("a"===t.nodeName.toLowerCase()&&"#"!==t.getAttribute("href"));"li"!==t.nodeName.toLowerCase();)t=t.parentNode;i&&n.stop(e);var s=t.getAttribute("data-index").split(" ");s=s.map(function(e){return parseInt(e,10)}),this._options.selectable&&(this._selectedIndex=s);var o=this._nodeFromIndex(s);return this._toggleNode(o),this._init(),this._options.onClick&&this._options.onClick({index:s.slice(),value:this.getNodeValue(s)},this),!1},_setTreeCollapse:function(e){this._setNodeCollapse(this._model,e)},_setNodeCollapse:function(e,t){if(!(2>e.length)&&(e[0]&&(t?e[2]=1:e[2]&&(e.pop(),e[1]||e.pop())),e[1]))for(var n=0,i=e[1].length;i>n;++n)this._setNodeCollapse(e[1][n],t)},getModel:function(){return t.clone(this._model)},getNodeValue:function(e){var t=this._nodeFromIndex(e);return t[0]},expandTree:function(){this._setTreeCollapse(!1),this._init()},collapseTree:function(){this._setTreeCollapse(!0),this._init()},toggleNode:function(e){var t=this._nodeFromIndex(e);this._toggleNode(t)},destroy:t.destroyComponent},SAPO.Ink.TreeView=s}(),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Css,i=SAPO.Dom.Event,s=function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.innerHTML=e,t},o=function(n,i){if(this._options=SAPO.extendObj({size:e,previousLabel:"Previous",nextLabel:"Next",onChange:e,setHash:!1,hashParameter:"page"},i||{}),this._handlers={click:this._onClick.bindObjEvent(this)},this._current=0,this._itemLiEls=[],this._element=t.elOrSelector(n,"1st argument"),!t.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(0>this._options.size)throw new RangeError("size option must be equal or more than 0!");if(this._options.onChange!==e&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");this._init()};o.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),t.registerInstance(this,this._element,"pagination")},_observe:function(){i.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var e,t,i,o=this._itemLiEls,r=this._options.size===o.length;if(r)for(e=0,t=this._options.size;t>e;++e)n.setClassName(o[e],"active",e===this._current);else{for(e=o.length-1;e>=0;--e)this._ulEl.removeChild(o[e]);for(o=[],e=0,t=this._options.size;t>e;++e)i=document.createElement("li"),i.appendChild(s(e+1)),n.setClassName(i,"active",e===this._current),this._ulEl.insertBefore(i,this._nextEl),o.push(i);this._itemLiEls=o}n.setClassName(this._prevEl,"disabled",!this.hasPrevious()),n.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(e){n.addClassName(e,"ink-navigation");var t,i=document.createElement("ul");n.addClassName(i,"pagination"),t=document.createElement("li"),t.appendChild(s(this._options.previousLabel)),this._prevEl=t,n.addClassName(t,"previous"),i.appendChild(t),t=document.createElement("li"),t.appendChild(s(this._options.nextLabel)),this._nextEl=t,n.addClassName(t,"next"),i.appendChild(t),e.appendChild(i),this._ulEl=i},_onClick:function(e){i.stop(e);var t=i.element(e);if("a"===t.nodeName.toLowerCase()){var s=t.parentNode;if("li"===s.nodeName.toLowerCase()&&!n.hasClassName(s,"active")&&!n.hasClassName(s,"disabled")){var o=n.hasClassName(s,"previous"),r=n.hasClassName(s,"next");if(o||r)this.setCurrent(o?-1:1,!0);else{var a=parseInt(t.innerHTML,10)-1;this.setCurrent(a)}}}},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._options.size=e,this._updateItems(),this._current=0},setCurrent:function(e,n){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");if(n&&(e+=this._current),0>e?e=0:e>this._options.size-1&&(e=this._options.size-1),this._current=e,this._updateItems(),this._options.setHash){var i={};i[this._options.hashParameter]=e,t.setHash(i)}this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},destroy:t.destroyComponent},SAPO.Ink.Pagination=o}(),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Css,i=SAPO.Dom.Element,s=SAPO.Dom.Event,o=SAPO.Dom.Selector,r=SAPO.Utility.Array,a=function(n,s){if(this._options=SAPO.extendObj({model:e,endpoint:e,fields:e,fieldNames:{},formatters:{},sortableFields:[],pageSize:e,pagination:e,onCellClick:e,onHeaderClick:e},s||{}),this._handlers={headerclick:this._onHeaderClick.bindObjEvent(this),cellclick:this._onCellClick.bindObjEvent(this),updatecount:this._onUpdateCount.bindObj(this)},this._element=t.elOrSelector(n,"1st argument"),this._options.model&&this._options.endpoint)throw new TypeError("This component requires only _one_ of the following options: model, endpoint or be given a table element.");if(!this._options.model&&!this._options.endpoint){if("table"!==this._element.nodeName.toLowerCase())throw new TypeError("This component requires one of the following options: model, endpoint or the selector pointing to a table element with datatable format.");this._extractModelFromDOM()}if(this._options.model){if(!(this._options.model instanceof Array))throw new TypeError("model option must be passed as an array of objects!");this._model=this._options.model}else if(this._options.endpoint&&"string"!=typeof this._options.endpoint)throw new TypeError("endpoint option should be a server URI!");if(this._options.formatters&&"object"!=typeof this._options.formatters)throw new TypeError("formatters option expected an object of field -> function(fieldValue, item, tdEl)!");if(!(this._options.fields instanceof Array))throw new TypeError("fields option expects an array of strings!");if(this._options.onCellClick&&"function"!=typeof this._options.onCellClick)throw new TypeError("onCellClick options expects a function!");if(this._options.onHeaderClick&&"function"!=typeof this._options.onHeaderClick)throw new TypeError("onHeaderClick options expects a function!");if(this._orderBy=e,this._orderDir=1,this._options.pageSize){if(!t.isInteger(this._options.pageSize))throw new TypeError("pageSize option must be an integer number!");var o;this._options.pagination?o=t.elOrSelector(this._options.pagination,"pagination option"):(o=document.createElement("nav"),i.insertAfter(o,this._element)),this._pagEl=o,this._options.model?this._onUpdateCount(null,this._options.model.length):t.ajaxJSON(this._options.endpoint,{op:"count"},this._handlers.updatecount)}else this._init(),this._handlers.updatecount()};a.prototype={_init:function(){this._generateMarkup(this._element),this._observe(),t.registerInstance(this,this._element,"table")},_extractModelFromDOM:function(){var e=o.select("> thead > tr > th",this._element),t=o.select("> tbody > tr",this._element);this._options.fields=[],this._options.fieldNames={},this._options.model=[];var n,i,s,r,a=this;e.forEach(function(e){try{i=e.innerHTML,n=e.getAttribute("id"),n?0===n.indexOf("th_")&&(n=n.substring(3)):n=i.toLowerCase().replace(/ /g,"_"),a._options.fields.push(n),a._options.fieldNames[n]=i}catch(t){throw console.error("problematic element:"),console.error(e),Error("Problem parsing table data from DOM!")}}),t.forEach(function(e){r=o.select("> td",e),s={},r.forEach(function(e,t){try{n=e.getAttribute("headers"),n?0===n.indexOf("th_")&&(n=n.substring(3)):n=a._options.fields[t],i=e.innerHTML,s[n]=i}catch(o){throw console.error("problematic element:"),console.error(e),Error("Problem parsing table data from DOM!")}}),a._options.model.push(s)})},_observe:function(){s.observe(this._theadEl,"click",this._handlers.headerclick),s.observe(this._tbodyEl,"click",this._handlers.cellclick)},_whichRow:function(n){for(;"tr"!==n.nodeName.toLowerCase();)n=n.parentNode;return this._pagination?t.childIndex(n):e},_whichColumn:function(e){return t.childIndex(e)},_remoteQuery:function(n){t.ajaxJSON(this._options.endpoint,{op:"count"},function(i,s){if(i)return n(i);var o=s.count;if(this._pagination&&o!==this._modelLength){var r=Math.ceil(o/this._options.pageSize);if(this._pagination.getCurrent()>r-1)return console.log("setCurrent",r-1),this._pagination.setCurrent(r-1);this._onUpdateCount(null,o)}var a={op:"list",orderDir:this._orderDir};this._options.pageSize&&(a.pageSz=this._options.pageSize,a.pageNr=this._pagination.getCurrent()),this._orderBy&&(a.orderBy=this._orderBy),t.ajaxJSON(this._options.endpoint,a,function(t,i){return t?n(t):(n(null,i.items),e)}.bindObj(this))}.bindObj(this))},_localQuery:function(t){var n,i=this._model.slice(),s=i.length;if(this._pagination&&s!==this._modelLength){if(n=Math.ceil(s/this._options.pageSize),this._pagination.getCurrent()>n-1)return console.log("setCurrent",n-1),this._pagination.setCurrent(n-1);this._onUpdateCount(null,s)}var o=this._orderBy;if(o){var r,a=i[0][o],l=function(e){return e[o]};r="number"==typeof a?this._orderDir>0?function(e,t){return l(e)-l(t)}:function(e,t){return l(t)-l(e)}:this._orderDir>0?function(e,t){var n=l(e),i=l(t);return i>n?-1:n>i?1:0}:function(e,t){var n=l(t),i=l(e);return i>n?-1:n>i?1:0},i.sort(r)}n=this._options.pageSize;var h;n!==e&&(h=n*this._pagination.getCurrent(),i=i.slice(h,h+n)),t(null,i)},_query:function(e){this[this._model?"_localQuery":"_remoteQuery"](function(t,n){if(t)throw t;this._visibleItems=n,e(null,n)}.bindObj(this))},_updateHeaders:function(e){e||(e=this._theadEl),t.cleanChildren(e);var n,i,s,o,r,a=document.createElement("tr");for(n=0,i=this._options.fields.length;i>n;++n)s=this._options.fields[n],r=document.createElement("th"),o=this._options.fieldNames[s]||s,this._orderBy===s&&(o=[o,' <i class="icon-caret-',this._orderDir>0?"down":"up",'"></i>'].join("")),r.innerHTML=o,a.appendChild(r);e.appendChild(a)},_generateMarkup:function(e){n.addClassName(e,"ink-table");var i=document.createElement("thead");this._updateHeaders(i);var s=document.createElement("tbody");t.cleanChildren(e),e.appendChild(i),e.appendChild(s),this._theadEl=i,this._tbodyEl=s,this.refresh()},_onPaginationChange:function(){this.refresh()},_onHeaderClick:function(e){var t,n=s.element(e),i=this._whichColumn(n),o=this._options.fields[i];("*"===this._options.sortableFields||r.inArray(o,this._options.sortableFields))&&(this._orderBy===o?this._orderDir*=-1:(this._orderBy=o,this._orderDir=1),t=this._orderDir,this._updateHeaders(),this._pagination?this._pagination.setCurrent(0):this.refresh()),this._options.onHeaderClick&&this._options.onHeaderClick(this,{col:i,field:o,orderDir:t})},_onCellClick:function(e){var t=s.element(e),n=this._whichRow(t),i=this._whichColumn(t),o=this._options.fields[i],r=this._visibleItems[n];this._options.onCellClick&&this._options.onCellClick(this,{item:r,row:n,col:i,field:o})},_onUpdateCount:function(e,t){if(!this._options.pageSize)return this.refresh();if(e)throw e;"object"==typeof t&&(t=t.count),this._modelLength=t;var n=Math.ceil(t/this._options.pageSize);this._pagination?(this._pagination.setSize(n),this.refresh()):(this._pagination=new SAPO.Ink.Pagination(this._pagEl,{size:n,onChange:this._onPaginationChange.bindObj(this)}),this._init())},getModel:function(){return this._model.slice()},setModel:function(e){if(!this._options.model)throw Error("Component has't been instanced in model mode.");this._model=e,this.refresh()},getVisibleItems:function(){return this._visibleItems.slice()},refresh:function(){this._query(function(e,t){var n,i,o,r,a,l,h,c,d,u,m=document.createElement("tbody");for(r=this._options.fields.length,n=0,i=t.length;i>n;++n){for(h=t[n],a=document.createElement("tr"),o=0;r>o;++o)c=this._options.fields[o],d=h[c],u=this._options.formatters[c],l=document.createElement("td"),u?u(d,h,l):l.innerHTML=d||"",a.appendChild(l);m.appendChild(a)}this._element.replaceChild(m,this._tbodyEl),this._tbodyEl=m,s.observe(this._tbodyEl,"click",this._handlers.cellclick)}.bindObj(this))},destroy:t.destroyComponent},SAPO.Ink.Table=a}(),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Css,i=SAPO.Dom.Event,s=SAPO.Dom.Selector,o=function(t,n){if(this._options=SAPO.extendObj({active:e,disabled:[],onBeforeChange:e,onChange:e},n||{}),this._handlers={tabClicked:this._onTabClicked.bindObjEvent(this),disabledTabClicked:this._onDisabledTabClicked.bindObjEvent(this),resize:this._onResize.bindObjEvent(this)},!SAPO.Ink.Aux.isDOMElement(t)){if(t=s.select(t),0===t.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=t[0]}this._init()};o.prototype={_init:function(){this._menu=s.select(".ink-tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=s.select(".ink-tabs-container",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink),this._handlers.resize(),t.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var e=0;this._contentTabs.length>e;e++)n.hide(this._contentTabs[e])},_observe:function(){this._menuTabs.forEach(function(e){var t=s.select("a",e)[0];SAPO.Utility.Array.inArray(t.getAttribute("href"),this._options.disabled)?this.disable(t):this.enable(t)}.bindObj(this)),i.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var e=window.location.hash;if(this._activeContentTab=s.select(e,this._element)[0]||s.select(this._hashify(this._options.active),this._element)[0]||s.select(".ink-tabs-container",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),n.hasClassName(this._activeMenuLink,"ink-disabled"))for(var t=0;this._menuTabs.length>t;t++){var i=s.select("a",this._menuTabs[t])[0];if(!n.hasClassName(i,"ink-disabled")){this._activeMenuLink=i;break}}this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(t,i){i&&this._options.onBeforeChange!==e&&this._options.onBeforeChange(this);var o=t.getAttribute("href");n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeContentTab,"active"),this._activeContentTab&&n.hide(this._activeContentTab),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=s.select(o,this._element)[0],n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeContentTab,"active"),n.show(this._activeContentTab),i&&this._options.onChange!==e&&this._options.onChange(this)},_onTabClicked:function(e){i.stop(e);var t=i.findElement(e,"A");"a"===t.nodeName.toLowerCase()&&(window.location.hash=t.getAttribute("href"),t!==this._activeMenuLink&&this.changeTab(t))},_onDisabledTabClicked:function(e){i.stop(e)},_onResize:function(){var e=SAPO.Ink.Aux.currentLayout();e!==this._lastLayout&&(e===SAPO.Ink.Aux.Layouts.SMALL||e===SAPO.Ink.Aux.Layouts.MEDIUM?(n.removeClassName(this._menu,"menu"),n.removeClassName(this._menu,"horizontal"),n.addClassName(this._menu,"pills")):(n.addClassName(this._menu,"menu"),n.addClassName(this._menu,"horizontal"),n.removeClassName(this._menu,"pills")),this._lastLayout=e)},_hashify:function(e){return e?0===e.indexOf("#")?e:"#"+e:""},_findLinkByHref:function(e){e=this._hashify(e);var t;return this._menuTabs.forEach(function(n){var i=s.select("a",n)[0];i.getAttribute("href")===e&&(t=i)}),t},_getChildElements:function(e){for(var t=[],n=e.children,i=0;n.length>i;i++)1===n[i].nodeType&&t.push(n[i]);return t},changeTab:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&(i.stopObserving(t,"click",this._handlers.tabClicked),i.observe(t,"click",this._handlers.disabledTabClicked),n.addClassName(t,"ink-disabled"))},enable:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&(i.stopObserving(t,"click",this._handlers.disabledTabClicked),i.observe(t,"click",this._handlers.tabClicked),n.removeClassName(t,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:t.destroyComponent},SAPO.Ink.Tabs=o}(),function(){"use strict";SAPO.namespace("Ink");var e=SAPO.Dom.Css,t=SAPO.Utility.Array,n=SAPO.Dom.Event,i=function(){n.observe(document.body,"click",function(i){var s=n.element(i);if(e.hasClassName(s,"ink-close")||e.hasClassName(s,"ink-dismiss")){var o;do if(s.className&&(o=s.className.split(" "),o&&(t.inArray("ink-alert",o)||t.inArray("ink-alert-block",o))))break;while(s=s.parentNode);s&&(n.stop(i),s.parentNode.removeChild(s))}})};SAPO.Ink.Close=i}(),function(e,t){"use strict";SAPO.namespace("Ink");var n=SAPO.Ink.Aux,i=SAPO.Dom.Css,s=SAPO.Dom.Element,o=SAPO.Dom.Event,r=function(e,i){if(this._element=n.elOrSelector(e,"1st argument"),this._options=SAPO.extendObj({fixedHeight:0,throttlingDeltaT:.2},i||{}),null!==this._element.getAttribute("data-fixed-height")){var s=parseInt(this._element.getAttribute("data-fixed-height"),10);this._options.fixedHeight=s}this._isFixed=!1,this._timer=t,this._handlers={timer:this._onTimer.bindObj(this),change:this._onChange.bindObjEvent(this)},this._init()};r.prototype={version:"0.1",_init:function(){o.observe(e,"scroll",this._handlers.change),o.observe(e,"resize",this._handlers.change),n.registerInstance(this,this._element,"dockable")},_fix:function(){this._isFixed||(i.addClassName(this._element,"ink-docked"),this._oldTop=this._element.style.top,this._element.style.top=this._options.fixedHeight+"px",this._isFixed=!0)},_reset:function(){this._isFixed&&(i.removeClassName(this._element,"ink-docked"),this._element.style.top=this._oldTop,delete this._oldTop,this._isFixed=!1)},_onTimer:function(){clearTimeout(this._timer),this._timer=t;var e=s.scroll()[1];if(this._isFixed)this._fixedAt-this._options.fixedHeight>e&&this._reset();else{var n=s.offset2(this._element)[1];e>n-this._options.fixedHeight&&(this._fixedAt=n,this._fix())}},_onChange:function(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this._handlers.timer,1e3*this._options.throttlingDeltaT)}},SAPO.Ink.Dockable=r}(window),function(e){"use strict";SAPO.namespace("Ink");var t=SAPO.Ink.Aux,n=SAPO.Dom.Element,i=SAPO.Dom.Event,s=SAPO.Dom.Selector,o=function(e,n){this._options=SAPO.extendObj({},n||{}),this._handlers={resize:this._onResize.bindObjEvent(this),toggle:this._onToggle.bindObjEvent(this)},this._element=t.elOrSelector(e,"1st argument"),"ul"!==this._element.nodeName.toLowerCase()&&(this._element=s.select("ul",this._element)[0]),this._init()};o.prototype={_init:function(){this._expandedMenu=s.select(">li",this._element),this._insertMenuElement(),this._observe(),t.registerInstance(this,this._element,"collapsible")},_insertMenuElement:function(){this._menuTitleElement=s.select("li:first",this._element)[0],this._toggle=n.create("button",{className:"ink-for-s ink-for-m ink-button",innerHTML:'<i class="icon-reorder" style="height:auto"></i>'}),this._expandedMenu=n.siblings(this._menuTitleElement),this._menuTitleElement.appendChild(this._toggle),this._onResize(),this._menuTitleElement.appendChild(this._toggle),this._element.insertBefore(this._menuTitleElement,this._element.firstChild)},_observe:function(){i.observe(e,"resize",this._handlers.resize),i.observe(this._toggle,"click",this._handlers.toggle)},_onResize:function(){var e=SAPO.Ink.Aux.currentLayout();e!==this._lastLayout&&(e===SAPO.Ink.Aux.Layouts.SMALL||e===SAPO.Ink.Aux.Layouts.MEDIUM?this._initVertical():this._initHorizontal(),this._lastLayout=e)},_onToggle:function(e,t){e&&i.stop(e);var n;n=t!==undefined?t?"block":"none":"none"===this._expandedMenu[0].style.display?"block":"none",this._expandedMenu.forEach(function(e){e.style.display=n})},_initHorizontal:function(){this._toggle.style.display="none",this._expandedMenu.forEach(function(e){e.style.display="inline-block"})},_initVertical:function(){this._toggle.style.display="block",this._expandedMenu.forEach(function(e){e.style.display="none"})},toggle:function(){this._onToggle()}},SAPO.Ink.Collapsible=o}(window);